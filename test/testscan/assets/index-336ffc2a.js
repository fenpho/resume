function d1(o,l){for(var c=0;c<l.length;c++){const d=l[c];if(typeof d!="string"&&!Array.isArray(d)){for(const g in d)if(g!=="default"&&!(g in o)){const h=Object.getOwnPropertyDescriptor(d,g);h&&Object.defineProperty(o,g,h.get?h:{enumerable:!0,get:()=>d[g]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))d(g);new MutationObserver(g=>{for(const h of g)if(h.type==="childList")for(const C of h.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&d(C)}).observe(document,{childList:!0,subtree:!0});function c(g){const h={};return g.integrity&&(h.integrity=g.integrity),g.referrerPolicy&&(h.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?h.credentials="include":g.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function d(g){if(g.ep)return;g.ep=!0;const h=c(g);fetch(g.href,h)}})();function us(o,l){const c=Object.create(null),d=o.split(",");for(let g=0;g<d.length;g++)c[d[g]]=!0;return l?g=>!!c[g.toLowerCase()]:g=>!!c[g]}function hs(o){if(Ce(o)){const l={};for(let c=0;c<o.length;c++){const d=o[c],g=pt(d)?A1(d):hs(d);if(g)for(const h in g)l[h]=g[h]}return l}else{if(pt(o))return o;if(lt(o))return o}}const g1=/;(?![^(]*\))/g,x1=/:([^]+)/,w1=/\/\*.*?\*\//gs;function A1(o){const l={};return o.replace(w1,"").split(g1).forEach(c=>{if(c){const d=c.split(x1);d.length>1&&(l[d[0].trim()]=d[1].trim())}}),l}function ds(o){let l="";if(pt(o))l=o;else if(Ce(o))for(let c=0;c<o.length;c++){const d=ds(o[c]);d&&(l+=d+" ")}else if(lt(o))for(const c in o)o[c]&&(l+=c+" ");return l.trim()}const p1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",C1=us(p1);function Po(o){return!!o||o===""}const qs=o=>pt(o)?o:o==null?"":Ce(o)||lt(o)&&(o.toString===Uo||!_e(o.toString))?JSON.stringify(o,Lo,2):String(o),Lo=(o,l)=>l&&l.__v_isRef?Lo(o,l.value):lr(l)?{[`Map(${l.size})`]:[...l.entries()].reduce((c,[d,g])=>(c[`${d} =>`]=g,c),{})}:Fo(l)?{[`Set(${l.size})`]:[...l.values()]}:lt(l)&&!Ce(l)&&!Vo(l)?String(l):l,rt={},ar=[],rn=()=>{},E1=()=>!1,m1=/^on[^a-z]/,hi=o=>m1.test(o),gs=o=>o.startsWith("onUpdate:"),Nt=Object.assign,xs=(o,l)=>{const c=o.indexOf(l);c>-1&&o.splice(c,1)},b1=Object.prototype.hasOwnProperty,Pe=(o,l)=>b1.call(o,l),Ce=Array.isArray,lr=o=>di(o)==="[object Map]",Fo=o=>di(o)==="[object Set]",_e=o=>typeof o=="function",pt=o=>typeof o=="string",ws=o=>typeof o=="symbol",lt=o=>o!==null&&typeof o=="object",ko=o=>lt(o)&&_e(o.then)&&_e(o.catch),Uo=Object.prototype.toString,di=o=>Uo.call(o),I1=o=>di(o).slice(8,-1),Vo=o=>di(o)==="[object Object]",As=o=>pt(o)&&o!=="NaN"&&o[0]!=="-"&&""+parseInt(o,10)===o,ti=us(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),gi=o=>{const l=Object.create(null);return c=>l[c]||(l[c]=o(c))},y1=/-(\w)/g,ur=gi(o=>o.replace(y1,(l,c)=>c?c.toUpperCase():"")),_1=/\B([A-Z])/g,gr=gi(o=>o.replace(_1,"-$1").toLowerCase()),Ho=gi(o=>o.charAt(0).toUpperCase()+o.slice(1)),Wi=gi(o=>o?`on${Ho(o)}`:""),Mr=(o,l)=>!Object.is(o,l),Gi=(o,l)=>{for(let c=0;c<o.length;c++)o[c](l)},si=(o,l,c)=>{Object.defineProperty(o,l,{configurable:!0,enumerable:!1,value:c})},T1=o=>{const l=parseFloat(o);return isNaN(l)?o:l};let Qs;const S1=()=>Qs||(Qs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let $t;class N1{constructor(l=!1){this.detached=l,this._active=!0,this.effects=[],this.cleanups=[],this.parent=$t,!l&&$t&&(this.index=($t.scopes||($t.scopes=[])).push(this)-1)}get active(){return this._active}run(l){if(this._active){const c=$t;try{return $t=this,l()}finally{$t=c}}}on(){$t=this}off(){$t=this.parent}stop(l){if(this._active){let c,d;for(c=0,d=this.effects.length;c<d;c++)this.effects[c].stop();for(c=0,d=this.cleanups.length;c<d;c++)this.cleanups[c]();if(this.scopes)for(c=0,d=this.scopes.length;c<d;c++)this.scopes[c].stop(!0);if(!this.detached&&this.parent&&!l){const g=this.parent.scopes.pop();g&&g!==this&&(this.parent.scopes[this.index]=g,g.index=this.index)}this.parent=void 0,this._active=!1}}}function O1(o,l=$t){l&&l.active&&l.effects.push(o)}function R1(){return $t}const ps=o=>{const l=new Set(o);return l.w=0,l.n=0,l},Wo=o=>(o.w&vn)>0,Go=o=>(o.n&vn)>0,D1=({deps:o})=>{if(o.length)for(let l=0;l<o.length;l++)o[l].w|=vn},M1=o=>{const{deps:l}=o;if(l.length){let c=0;for(let d=0;d<l.length;d++){const g=l[d];Wo(g)&&!Go(g)?g.delete(o):l[c++]=g,g.w&=~vn,g.n&=~vn}l.length=c}},Qi=new WeakMap;let Nr=0,vn=1;const Ji=30;let en;const jn=Symbol(""),$i=Symbol("");class Cs{constructor(l,c=null,d){this.fn=l,this.scheduler=c,this.active=!0,this.deps=[],this.parent=void 0,O1(this,d)}run(){if(!this.active)return this.fn();let l=en,c=Dn;for(;l;){if(l===this)return;l=l.parent}try{return this.parent=en,en=this,Dn=!0,vn=1<<++Nr,Nr<=Ji?D1(this):Js(this),this.fn()}finally{Nr<=Ji&&M1(this),vn=1<<--Nr,en=this.parent,Dn=c,this.parent=void 0,this.deferStop&&this.stop()}}stop(){en===this?this.deferStop=!0:this.active&&(Js(this),this.onStop&&this.onStop(),this.active=!1)}}function Js(o){const{deps:l}=o;if(l.length){for(let c=0;c<l.length;c++)l[c].delete(o);l.length=0}}let Dn=!0;const Xo=[];function xr(){Xo.push(Dn),Dn=!1}function wr(){const o=Xo.pop();Dn=o===void 0?!0:o}function kt(o,l,c){if(Dn&&en){let d=Qi.get(o);d||Qi.set(o,d=new Map);let g=d.get(c);g||d.set(c,g=ps()),Yo(g)}}function Yo(o,l){let c=!1;Nr<=Ji?Go(o)||(o.n|=vn,c=!Wo(o)):c=!o.has(en),c&&(o.add(en),en.deps.push(o))}function En(o,l,c,d,g,h){const C=Qi.get(o);if(!C)return;let m=[];if(l==="clear")m=[...C.values()];else if(c==="length"&&Ce(o)){const y=Number(d);C.forEach((p,N)=>{(N==="length"||N>=y)&&m.push(p)})}else switch(c!==void 0&&m.push(C.get(c)),l){case"add":Ce(o)?As(c)&&m.push(C.get("length")):(m.push(C.get(jn)),lr(o)&&m.push(C.get($i)));break;case"delete":Ce(o)||(m.push(C.get(jn)),lr(o)&&m.push(C.get($i)));break;case"set":lr(o)&&m.push(C.get(jn));break}if(m.length===1)m[0]&&es(m[0]);else{const y=[];for(const p of m)p&&y.push(...p);es(ps(y))}}function es(o,l){const c=Ce(o)?o:[...o];for(const d of c)d.computed&&$s(d);for(const d of c)d.computed||$s(d)}function $s(o,l){(o!==en||o.allowRecurse)&&(o.scheduler?o.scheduler():o.run())}const B1=us("__proto__,__v_isRef,__isVue"),zo=new Set(Object.getOwnPropertyNames(Symbol).filter(o=>o!=="arguments"&&o!=="caller").map(o=>Symbol[o]).filter(ws)),v1=Es(),P1=Es(!1,!0),L1=Es(!0),eo=F1();function F1(){const o={};return["includes","indexOf","lastIndexOf"].forEach(l=>{o[l]=function(...c){const d=Fe(this);for(let h=0,C=this.length;h<C;h++)kt(d,"get",h+"");const g=d[l](...c);return g===-1||g===!1?d[l](...c.map(Fe)):g}}),["push","pop","shift","unshift","splice"].forEach(l=>{o[l]=function(...c){xr();const d=Fe(this)[l].apply(this,c);return wr(),d}}),o}function k1(o){const l=Fe(this);return kt(l,"has",o),l.hasOwnProperty(o)}function Es(o=!1,l=!1){return function(d,g,h){if(g==="__v_isReactive")return!o;if(g==="__v_isReadonly")return o;if(g==="__v_isShallow")return l;if(g==="__v_raw"&&h===(o?l?el:Qo:l?qo:Ko).get(d))return d;const C=Ce(d);if(!o){if(C&&Pe(eo,g))return Reflect.get(eo,g,h);if(g==="hasOwnProperty")return k1}const m=Reflect.get(d,g,h);return(ws(g)?zo.has(g):B1(g))||(o||kt(d,"get",g),l)?m:St(m)?C&&As(g)?m:m.value:lt(m)?o?Jo(m):Is(m):m}}const U1=Zo(),V1=Zo(!0);function Zo(o=!1){return function(c,d,g,h){let C=c[d];if(hr(C)&&St(C)&&!St(g))return!1;if(!o&&(!oi(g)&&!hr(g)&&(C=Fe(C),g=Fe(g)),!Ce(c)&&St(C)&&!St(g)))return C.value=g,!0;const m=Ce(c)&&As(d)?Number(d)<c.length:Pe(c,d),y=Reflect.set(c,d,g,h);return c===Fe(h)&&(m?Mr(g,C)&&En(c,"set",d,g):En(c,"add",d,g)),y}}function H1(o,l){const c=Pe(o,l);o[l];const d=Reflect.deleteProperty(o,l);return d&&c&&En(o,"delete",l,void 0),d}function W1(o,l){const c=Reflect.has(o,l);return(!ws(l)||!zo.has(l))&&kt(o,"has",l),c}function G1(o){return kt(o,"iterate",Ce(o)?"length":jn),Reflect.ownKeys(o)}const jo={get:v1,set:U1,deleteProperty:H1,has:W1,ownKeys:G1},X1={get:L1,set(o,l){return!0},deleteProperty(o,l){return!0}},Y1=Nt({},jo,{get:P1,set:V1}),ms=o=>o,xi=o=>Reflect.getPrototypeOf(o);function Kr(o,l,c=!1,d=!1){o=o.__v_raw;const g=Fe(o),h=Fe(l);c||(l!==h&&kt(g,"get",l),kt(g,"get",h));const{has:C}=xi(g),m=d?ms:c?_s:Br;if(C.call(g,l))return m(o.get(l));if(C.call(g,h))return m(o.get(h));o!==g&&o.get(l)}function qr(o,l=!1){const c=this.__v_raw,d=Fe(c),g=Fe(o);return l||(o!==g&&kt(d,"has",o),kt(d,"has",g)),o===g?c.has(o):c.has(o)||c.has(g)}function Qr(o,l=!1){return o=o.__v_raw,!l&&kt(Fe(o),"iterate",jn),Reflect.get(o,"size",o)}function to(o){o=Fe(o);const l=Fe(this);return xi(l).has.call(l,o)||(l.add(o),En(l,"add",o,o)),this}function no(o,l){l=Fe(l);const c=Fe(this),{has:d,get:g}=xi(c);let h=d.call(c,o);h||(o=Fe(o),h=d.call(c,o));const C=g.call(c,o);return c.set(o,l),h?Mr(l,C)&&En(c,"set",o,l):En(c,"add",o,l),this}function ro(o){const l=Fe(this),{has:c,get:d}=xi(l);let g=c.call(l,o);g||(o=Fe(o),g=c.call(l,o)),d&&d.call(l,o);const h=l.delete(o);return g&&En(l,"delete",o,void 0),h}function io(){const o=Fe(this),l=o.size!==0,c=o.clear();return l&&En(o,"clear",void 0,void 0),c}function Jr(o,l){return function(d,g){const h=this,C=h.__v_raw,m=Fe(C),y=l?ms:o?_s:Br;return!o&&kt(m,"iterate",jn),C.forEach((p,N)=>d.call(g,y(p),y(N),h))}}function $r(o,l,c){return function(...d){const g=this.__v_raw,h=Fe(g),C=lr(h),m=o==="entries"||o===Symbol.iterator&&C,y=o==="keys"&&C,p=g[o](...d),N=c?ms:l?_s:Br;return!l&&kt(h,"iterate",y?$i:jn),{next(){const{value:R,done:Y}=p.next();return Y?{value:R,done:Y}:{value:m?[N(R[0]),N(R[1])]:N(R),done:Y}},[Symbol.iterator](){return this}}}}function On(o){return function(...l){return o==="delete"?!1:this}}function z1(){const o={get(h){return Kr(this,h)},get size(){return Qr(this)},has:qr,add:to,set:no,delete:ro,clear:io,forEach:Jr(!1,!1)},l={get(h){return Kr(this,h,!1,!0)},get size(){return Qr(this)},has:qr,add:to,set:no,delete:ro,clear:io,forEach:Jr(!1,!0)},c={get(h){return Kr(this,h,!0)},get size(){return Qr(this,!0)},has(h){return qr.call(this,h,!0)},add:On("add"),set:On("set"),delete:On("delete"),clear:On("clear"),forEach:Jr(!0,!1)},d={get(h){return Kr(this,h,!0,!0)},get size(){return Qr(this,!0)},has(h){return qr.call(this,h,!0)},add:On("add"),set:On("set"),delete:On("delete"),clear:On("clear"),forEach:Jr(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(h=>{o[h]=$r(h,!1,!1),c[h]=$r(h,!0,!1),l[h]=$r(h,!1,!0),d[h]=$r(h,!0,!0)}),[o,c,l,d]}const[Z1,j1,K1,q1]=z1();function bs(o,l){const c=l?o?q1:K1:o?j1:Z1;return(d,g,h)=>g==="__v_isReactive"?!o:g==="__v_isReadonly"?o:g==="__v_raw"?d:Reflect.get(Pe(c,g)&&g in d?c:d,g,h)}const Q1={get:bs(!1,!1)},J1={get:bs(!1,!0)},$1={get:bs(!0,!1)},Ko=new WeakMap,qo=new WeakMap,Qo=new WeakMap,el=new WeakMap;function tl(o){switch(o){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function nl(o){return o.__v_skip||!Object.isExtensible(o)?0:tl(I1(o))}function Is(o){return hr(o)?o:ys(o,!1,jo,Q1,Ko)}function rl(o){return ys(o,!1,Y1,J1,qo)}function Jo(o){return ys(o,!0,X1,$1,Qo)}function ys(o,l,c,d,g){if(!lt(o)||o.__v_raw&&!(l&&o.__v_isReactive))return o;const h=g.get(o);if(h)return h;const C=nl(o);if(C===0)return o;const m=new Proxy(o,C===2?d:c);return g.set(o,m),m}function cr(o){return hr(o)?cr(o.__v_raw):!!(o&&o.__v_isReactive)}function hr(o){return!!(o&&o.__v_isReadonly)}function oi(o){return!!(o&&o.__v_isShallow)}function $o(o){return cr(o)||hr(o)}function Fe(o){const l=o&&o.__v_raw;return l?Fe(l):o}function ea(o){return si(o,"__v_skip",!0),o}const Br=o=>lt(o)?Is(o):o,_s=o=>lt(o)?Jo(o):o;function ta(o){Dn&&en&&(o=Fe(o),Yo(o.dep||(o.dep=ps())))}function na(o,l){o=Fe(o);const c=o.dep;c&&es(c)}function St(o){return!!(o&&o.__v_isRef===!0)}function il(o){return sl(o,!1)}function sl(o,l){return St(o)?o:new ol(o,l)}class ol{constructor(l,c){this.__v_isShallow=c,this.dep=void 0,this.__v_isRef=!0,this._rawValue=c?l:Fe(l),this._value=c?l:Br(l)}get value(){return ta(this),this._value}set value(l){const c=this.__v_isShallow||oi(l)||hr(l);l=c?l:Fe(l),Mr(l,this._rawValue)&&(this._rawValue=l,this._value=c?l:Br(l),na(this))}}function al(o){return St(o)?o.value:o}const ll={get:(o,l,c)=>al(Reflect.get(o,l,c)),set:(o,l,c,d)=>{const g=o[l];return St(g)&&!St(c)?(g.value=c,!0):Reflect.set(o,l,c,d)}};function ra(o){return cr(o)?o:new Proxy(o,ll)}var ia;class cl{constructor(l,c,d,g){this._setter=c,this.dep=void 0,this.__v_isRef=!0,this[ia]=!1,this._dirty=!0,this.effect=new Cs(l,()=>{this._dirty||(this._dirty=!0,na(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!g,this.__v_isReadonly=d}get value(){const l=Fe(this);return ta(l),(l._dirty||!l._cacheable)&&(l._dirty=!1,l._value=l.effect.run()),l._value}set value(l){this._setter(l)}}ia="__v_isReadonly";function fl(o,l,c=!1){let d,g;const h=_e(o);return h?(d=o,g=rn):(d=o.get,g=o.set),new cl(d,g,h||!g,c)}function Mn(o,l,c,d){let g;try{g=d?o(...d):o()}catch(h){wi(h,l,c)}return g}function Kt(o,l,c,d){if(_e(o)){const h=Mn(o,l,c,d);return h&&ko(h)&&h.catch(C=>{wi(C,l,c)}),h}const g=[];for(let h=0;h<o.length;h++)g.push(Kt(o[h],l,c,d));return g}function wi(o,l,c,d=!0){const g=l?l.vnode:null;if(l){let h=l.parent;const C=l.proxy,m=c;for(;h;){const p=h.ec;if(p){for(let N=0;N<p.length;N++)if(p[N](o,C,m)===!1)return}h=h.parent}const y=l.appContext.config.errorHandler;if(y){Mn(y,null,10,[o,C,m]);return}}ul(o,c,g,d)}function ul(o,l,c,d=!0){console.error(o)}let vr=!1,ts=!1;const Tt=[];let xn=0;const fr=[];let pn=null,Yn=0;const sa=Promise.resolve();let Ts=null;function hl(o){const l=Ts||sa;return o?l.then(this?o.bind(this):o):l}function dl(o){let l=xn+1,c=Tt.length;for(;l<c;){const d=l+c>>>1;Pr(Tt[d])<o?l=d+1:c=d}return l}function Ss(o){(!Tt.length||!Tt.includes(o,vr&&o.allowRecurse?xn+1:xn))&&(o.id==null?Tt.push(o):Tt.splice(dl(o.id),0,o),oa())}function oa(){!vr&&!ts&&(ts=!0,Ts=sa.then(la))}function gl(o){const l=Tt.indexOf(o);l>xn&&Tt.splice(l,1)}function xl(o){Ce(o)?fr.push(...o):(!pn||!pn.includes(o,o.allowRecurse?Yn+1:Yn))&&fr.push(o),oa()}function so(o,l=vr?xn+1:0){for(;l<Tt.length;l++){const c=Tt[l];c&&c.pre&&(Tt.splice(l,1),l--,c())}}function aa(o){if(fr.length){const l=[...new Set(fr)];if(fr.length=0,pn){pn.push(...l);return}for(pn=l,pn.sort((c,d)=>Pr(c)-Pr(d)),Yn=0;Yn<pn.length;Yn++)pn[Yn]();pn=null,Yn=0}}const Pr=o=>o.id==null?1/0:o.id,wl=(o,l)=>{const c=Pr(o)-Pr(l);if(c===0){if(o.pre&&!l.pre)return-1;if(l.pre&&!o.pre)return 1}return c};function la(o){ts=!1,vr=!0,Tt.sort(wl);const l=rn;try{for(xn=0;xn<Tt.length;xn++){const c=Tt[xn];c&&c.active!==!1&&Mn(c,null,14)}}finally{xn=0,Tt.length=0,aa(),vr=!1,Ts=null,(Tt.length||fr.length)&&la()}}function Al(o,l,...c){if(o.isUnmounted)return;const d=o.vnode.props||rt;let g=c;const h=l.startsWith("update:"),C=h&&l.slice(7);if(C&&C in d){const N=`${C==="modelValue"?"model":C}Modifiers`,{number:R,trim:Y}=d[N]||rt;Y&&(g=c.map(ee=>pt(ee)?ee.trim():ee)),R&&(g=c.map(T1))}let m,y=d[m=Wi(l)]||d[m=Wi(ur(l))];!y&&h&&(y=d[m=Wi(gr(l))]),y&&Kt(y,o,6,g);const p=d[m+"Once"];if(p){if(!o.emitted)o.emitted={};else if(o.emitted[m])return;o.emitted[m]=!0,Kt(p,o,6,g)}}function ca(o,l,c=!1){const d=l.emitsCache,g=d.get(o);if(g!==void 0)return g;const h=o.emits;let C={},m=!1;if(!_e(o)){const y=p=>{const N=ca(p,l,!0);N&&(m=!0,Nt(C,N))};!c&&l.mixins.length&&l.mixins.forEach(y),o.extends&&y(o.extends),o.mixins&&o.mixins.forEach(y)}return!h&&!m?(lt(o)&&d.set(o,null),null):(Ce(h)?h.forEach(y=>C[y]=null):Nt(C,h),lt(o)&&d.set(o,C),C)}function Ai(o,l){return!o||!hi(l)?!1:(l=l.slice(2).replace(/Once$/,""),Pe(o,l[0].toLowerCase()+l.slice(1))||Pe(o,gr(l))||Pe(o,l))}let tn=null,pi=null;function ai(o){const l=tn;return tn=o,pi=o&&o.type.__scopeId||null,l}function fa(o){pi=o}function ua(){pi=null}function pl(o,l=tn,c){if(!l||o._n)return o;const d=(...g)=>{d._d&&xo(-1);const h=ai(l);let C;try{C=o(...g)}finally{ai(h),d._d&&xo(1)}return C};return d._n=!0,d._c=!0,d._d=!0,d}function Xi(o){const{type:l,vnode:c,proxy:d,withProxy:g,props:h,propsOptions:[C],slots:m,attrs:y,emit:p,render:N,renderCache:R,data:Y,setupState:ee,ctx:Ae,inheritAttrs:J}=o;let ke,Oe;const me=ai(o);try{if(c.shapeFlag&4){const ue=g||d;ke=gn(N.call(ue,ue,R,h,ee,Y,Ae)),Oe=y}else{const ue=l;ke=gn(ue.length>1?ue(h,{attrs:y,slots:m,emit:p}):ue(h,null)),Oe=l.props?y:Cl(y)}}catch(ue){Rr.length=0,wi(ue,o,1),ke=Bn(Cn)}let q=ke;if(Oe&&J!==!1){const ue=Object.keys(Oe),{shapeFlag:Je}=q;ue.length&&Je&7&&(C&&ue.some(gs)&&(Oe=El(Oe,C)),q=Pn(q,Oe))}return c.dirs&&(q=Pn(q),q.dirs=q.dirs?q.dirs.concat(c.dirs):c.dirs),c.transition&&(q.transition=c.transition),ke=q,ai(me),ke}const Cl=o=>{let l;for(const c in o)(c==="class"||c==="style"||hi(c))&&((l||(l={}))[c]=o[c]);return l},El=(o,l)=>{const c={};for(const d in o)(!gs(d)||!(d.slice(9)in l))&&(c[d]=o[d]);return c};function ml(o,l,c){const{props:d,children:g,component:h}=o,{props:C,children:m,patchFlag:y}=l,p=h.emitsOptions;if(l.dirs||l.transition)return!0;if(c&&y>=0){if(y&1024)return!0;if(y&16)return d?oo(d,C,p):!!C;if(y&8){const N=l.dynamicProps;for(let R=0;R<N.length;R++){const Y=N[R];if(C[Y]!==d[Y]&&!Ai(p,Y))return!0}}}else return(g||m)&&(!m||!m.$stable)?!0:d===C?!1:d?C?oo(d,C,p):!0:!!C;return!1}function oo(o,l,c){const d=Object.keys(l);if(d.length!==Object.keys(o).length)return!0;for(let g=0;g<d.length;g++){const h=d[g];if(l[h]!==o[h]&&!Ai(c,h))return!0}return!1}function bl({vnode:o,parent:l},c){for(;l&&l.subTree===o;)(o=l.vnode).el=c,l=l.parent}const Il=o=>o.__isSuspense;function yl(o,l){l&&l.pendingBranch?Ce(o)?l.effects.push(...o):l.effects.push(o):xl(o)}function _l(o,l){if(ut){let c=ut.provides;const d=ut.parent&&ut.parent.provides;d===c&&(c=ut.provides=Object.create(d)),c[o]=l}}function ni(o,l,c=!1){const d=ut||tn;if(d){const g=d.parent==null?d.vnode.appContext&&d.vnode.appContext.provides:d.parent.provides;if(g&&o in g)return g[o];if(arguments.length>1)return c&&_e(l)?l.call(d.proxy):l}}const ei={};function Yi(o,l,c){return ha(o,l,c)}function ha(o,l,{immediate:c,deep:d,flush:g,onTrack:h,onTrigger:C}=rt){const m=R1()===(ut==null?void 0:ut.scope)?ut:null;let y,p=!1,N=!1;if(St(o)?(y=()=>o.value,p=oi(o)):cr(o)?(y=()=>o,d=!0):Ce(o)?(N=!0,p=o.some(q=>cr(q)||oi(q)),y=()=>o.map(q=>{if(St(q))return q.value;if(cr(q))return or(q);if(_e(q))return Mn(q,m,2)})):_e(o)?l?y=()=>Mn(o,m,2):y=()=>{if(!(m&&m.isUnmounted))return R&&R(),Kt(o,m,3,[Y])}:y=rn,l&&d){const q=y;y=()=>or(q())}let R,Y=q=>{R=Oe.onStop=()=>{Mn(q,m,4)}},ee;if(Fr)if(Y=rn,l?c&&Kt(l,m,3,[y(),N?[]:void 0,Y]):y(),g==="sync"){const q=m0();ee=q.__watcherHandles||(q.__watcherHandles=[])}else return rn;let Ae=N?new Array(o.length).fill(ei):ei;const J=()=>{if(Oe.active)if(l){const q=Oe.run();(d||p||(N?q.some((ue,Je)=>Mr(ue,Ae[Je])):Mr(q,Ae)))&&(R&&R(),Kt(l,m,3,[q,Ae===ei?void 0:N&&Ae[0]===ei?[]:Ae,Y]),Ae=q)}else Oe.run()};J.allowRecurse=!!l;let ke;g==="sync"?ke=J:g==="post"?ke=()=>Ft(J,m&&m.suspense):(J.pre=!0,m&&(J.id=m.uid),ke=()=>Ss(J));const Oe=new Cs(y,ke);l?c?J():Ae=Oe.run():g==="post"?Ft(Oe.run.bind(Oe),m&&m.suspense):Oe.run();const me=()=>{Oe.stop(),m&&m.scope&&xs(m.scope.effects,Oe)};return ee&&ee.push(me),me}function Tl(o,l,c){const d=this.proxy,g=pt(o)?o.includes(".")?da(d,o):()=>d[o]:o.bind(d,d);let h;_e(l)?h=l:(h=l.handler,c=l);const C=ut;dr(this);const m=ha(g,h.bind(d),c);return C?dr(C):Kn(),m}function da(o,l){const c=l.split(".");return()=>{let d=o;for(let g=0;g<c.length&&d;g++)d=d[c[g]];return d}}function or(o,l){if(!lt(o)||o.__v_skip||(l=l||new Set,l.has(o)))return o;if(l.add(o),St(o))or(o.value,l);else if(Ce(o))for(let c=0;c<o.length;c++)or(o[c],l);else if(Fo(o)||lr(o))o.forEach(c=>{or(c,l)});else if(Vo(o))for(const c in o)or(o[c],l);return o}function Sl(){const o={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Aa(()=>{o.isMounted=!0}),pa(()=>{o.isUnmounting=!0}),o}const Zt=[Function,Array],Nl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Zt,onEnter:Zt,onAfterEnter:Zt,onEnterCancelled:Zt,onBeforeLeave:Zt,onLeave:Zt,onAfterLeave:Zt,onLeaveCancelled:Zt,onBeforeAppear:Zt,onAppear:Zt,onAfterAppear:Zt,onAppearCancelled:Zt},setup(o,{slots:l}){const c=d0(),d=Sl();let g;return()=>{const h=l.default&&xa(l.default(),!0);if(!h||!h.length)return;let C=h[0];if(h.length>1){for(const J of h)if(J.type!==Cn){C=J;break}}const m=Fe(o),{mode:y}=m;if(d.isLeaving)return zi(C);const p=ao(C);if(!p)return zi(C);const N=ns(p,m,d,c);rs(p,N);const R=c.subTree,Y=R&&ao(R);let ee=!1;const{getTransitionKey:Ae}=p.type;if(Ae){const J=Ae();g===void 0?g=J:J!==g&&(g=J,ee=!0)}if(Y&&Y.type!==Cn&&(!zn(p,Y)||ee)){const J=ns(Y,m,d,c);if(rs(Y,J),y==="out-in")return d.isLeaving=!0,J.afterLeave=()=>{d.isLeaving=!1,c.update.active!==!1&&c.update()},zi(C);y==="in-out"&&p.type!==Cn&&(J.delayLeave=(ke,Oe,me)=>{const q=ga(d,Y);q[String(Y.key)]=Y,ke._leaveCb=()=>{Oe(),ke._leaveCb=void 0,delete N.delayedLeave},N.delayedLeave=me})}return C}}},Ol=Nl;function ga(o,l){const{leavingVNodes:c}=o;let d=c.get(l.type);return d||(d=Object.create(null),c.set(l.type,d)),d}function ns(o,l,c,d){const{appear:g,mode:h,persisted:C=!1,onBeforeEnter:m,onEnter:y,onAfterEnter:p,onEnterCancelled:N,onBeforeLeave:R,onLeave:Y,onAfterLeave:ee,onLeaveCancelled:Ae,onBeforeAppear:J,onAppear:ke,onAfterAppear:Oe,onAppearCancelled:me}=l,q=String(o.key),ue=ga(c,o),Je=(re,W)=>{re&&Kt(re,d,9,W)},Re=(re,W)=>{const We=W[1];Je(re,W),Ce(re)?re.every(Xe=>Xe.length<=1)&&We():re.length<=1&&We()},j={mode:h,persisted:C,beforeEnter(re){let W=m;if(!c.isMounted)if(g)W=J||m;else return;re._leaveCb&&re._leaveCb(!0);const We=ue[q];We&&zn(o,We)&&We.el._leaveCb&&We.el._leaveCb(),Je(W,[re])},enter(re){let W=y,We=p,Xe=N;if(!c.isMounted)if(g)W=ke||y,We=Oe||p,Xe=me||N;else return;let ce=!1;const Ie=re._enterCb=tt=>{ce||(ce=!0,tt?Je(Xe,[re]):Je(We,[re]),j.delayedLeave&&j.delayedLeave(),re._enterCb=void 0)};W?Re(W,[re,Ie]):Ie()},leave(re,W){const We=String(o.key);if(re._enterCb&&re._enterCb(!0),c.isUnmounting)return W();Je(R,[re]);let Xe=!1;const ce=re._leaveCb=Ie=>{Xe||(Xe=!0,W(),Ie?Je(Ae,[re]):Je(ee,[re]),re._leaveCb=void 0,ue[We]===o&&delete ue[We])};ue[We]=o,Y?Re(Y,[re,ce]):ce()},clone(re){return ns(re,l,c,d)}};return j}function zi(o){if(Ci(o))return o=Pn(o),o.children=null,o}function ao(o){return Ci(o)?o.children?o.children[0]:void 0:o}function rs(o,l){o.shapeFlag&6&&o.component?rs(o.component.subTree,l):o.shapeFlag&128?(o.ssContent.transition=l.clone(o.ssContent),o.ssFallback.transition=l.clone(o.ssFallback)):o.transition=l}function xa(o,l=!1,c){let d=[],g=0;for(let h=0;h<o.length;h++){let C=o[h];const m=c==null?C.key:String(c)+String(C.key!=null?C.key:h);C.type===jt?(C.patchFlag&128&&g++,d=d.concat(xa(C.children,l,m))):(l||C.type!==Cn)&&d.push(m!=null?Pn(C,{key:m}):C)}if(g>1)for(let h=0;h<d.length;h++)d[h].patchFlag=-2;return d}const ri=o=>!!o.type.__asyncLoader,Ci=o=>o.type.__isKeepAlive;function Rl(o,l){wa(o,"a",l)}function Dl(o,l){wa(o,"da",l)}function wa(o,l,c=ut){const d=o.__wdc||(o.__wdc=()=>{let g=c;for(;g;){if(g.isDeactivated)return;g=g.parent}return o()});if(Ei(l,d,c),c){let g=c.parent;for(;g&&g.parent;)Ci(g.parent.vnode)&&Ml(d,l,c,g),g=g.parent}}function Ml(o,l,c,d){const g=Ei(l,o,d,!0);Ca(()=>{xs(d[l],g)},c)}function Ei(o,l,c=ut,d=!1){if(c){const g=c[o]||(c[o]=[]),h=l.__weh||(l.__weh=(...C)=>{if(c.isUnmounted)return;xr(),dr(c);const m=Kt(l,c,o,C);return Kn(),wr(),m});return d?g.unshift(h):g.push(h),h}}const mn=o=>(l,c=ut)=>(!Fr||o==="sp")&&Ei(o,(...d)=>l(...d),c),Bl=mn("bm"),Aa=mn("m"),vl=mn("bu"),Pl=mn("u"),pa=mn("bum"),Ca=mn("um"),Ll=mn("sp"),Fl=mn("rtg"),kl=mn("rtc");function Ul(o,l=ut){Ei("ec",o,l)}function Wn(o,l,c,d){const g=o.dirs,h=l&&l.dirs;for(let C=0;C<g.length;C++){const m=g[C];h&&(m.oldValue=h[C].value);let y=m.dir[d];y&&(xr(),Kt(y,c,8,[o.el,m,o,l]),wr())}}const Vl=Symbol(),is=o=>o?Da(o)?Ds(o)||o.proxy:is(o.parent):null,Or=Nt(Object.create(null),{$:o=>o,$el:o=>o.vnode.el,$data:o=>o.data,$props:o=>o.props,$attrs:o=>o.attrs,$slots:o=>o.slots,$refs:o=>o.refs,$parent:o=>is(o.parent),$root:o=>is(o.root),$emit:o=>o.emit,$options:o=>Ns(o),$forceUpdate:o=>o.f||(o.f=()=>Ss(o.update)),$nextTick:o=>o.n||(o.n=hl.bind(o.proxy)),$watch:o=>Tl.bind(o)}),Zi=(o,l)=>o!==rt&&!o.__isScriptSetup&&Pe(o,l),Hl={get({_:o},l){const{ctx:c,setupState:d,data:g,props:h,accessCache:C,type:m,appContext:y}=o;let p;if(l[0]!=="$"){const ee=C[l];if(ee!==void 0)switch(ee){case 1:return d[l];case 2:return g[l];case 4:return c[l];case 3:return h[l]}else{if(Zi(d,l))return C[l]=1,d[l];if(g!==rt&&Pe(g,l))return C[l]=2,g[l];if((p=o.propsOptions[0])&&Pe(p,l))return C[l]=3,h[l];if(c!==rt&&Pe(c,l))return C[l]=4,c[l];ss&&(C[l]=0)}}const N=Or[l];let R,Y;if(N)return l==="$attrs"&&kt(o,"get",l),N(o);if((R=m.__cssModules)&&(R=R[l]))return R;if(c!==rt&&Pe(c,l))return C[l]=4,c[l];if(Y=y.config.globalProperties,Pe(Y,l))return Y[l]},set({_:o},l,c){const{data:d,setupState:g,ctx:h}=o;return Zi(g,l)?(g[l]=c,!0):d!==rt&&Pe(d,l)?(d[l]=c,!0):Pe(o.props,l)||l[0]==="$"&&l.slice(1)in o?!1:(h[l]=c,!0)},has({_:{data:o,setupState:l,accessCache:c,ctx:d,appContext:g,propsOptions:h}},C){let m;return!!c[C]||o!==rt&&Pe(o,C)||Zi(l,C)||(m=h[0])&&Pe(m,C)||Pe(d,C)||Pe(Or,C)||Pe(g.config.globalProperties,C)},defineProperty(o,l,c){return c.get!=null?o._.accessCache[l]=0:Pe(c,"value")&&this.set(o,l,c.value,null),Reflect.defineProperty(o,l,c)}};let ss=!0;function Wl(o){const l=Ns(o),c=o.proxy,d=o.ctx;ss=!1,l.beforeCreate&&lo(l.beforeCreate,o,"bc");const{data:g,computed:h,methods:C,watch:m,provide:y,inject:p,created:N,beforeMount:R,mounted:Y,beforeUpdate:ee,updated:Ae,activated:J,deactivated:ke,beforeDestroy:Oe,beforeUnmount:me,destroyed:q,unmounted:ue,render:Je,renderTracked:Re,renderTriggered:j,errorCaptured:re,serverPrefetch:W,expose:We,inheritAttrs:Xe,components:ce,directives:Ie,filters:tt}=l;if(p&&Gl(p,d,null,o.appContext.config.unwrapInjectedRef),C)for(const ie in C){const Le=C[ie];_e(Le)&&(d[ie]=Le.bind(c))}if(g){const ie=g.call(c,c);lt(ie)&&(o.data=Is(ie))}if(ss=!0,h)for(const ie in h){const Le=h[ie],It=_e(Le)?Le.bind(c,c):_e(Le.get)?Le.get.bind(c,c):rn,Ut=!_e(Le)&&_e(Le.set)?Le.set.bind(c):rn,sn=C0({get:It,set:Ut});Object.defineProperty(d,ie,{enumerable:!0,configurable:!0,get:()=>sn.value,set:Ke=>sn.value=Ke})}if(m)for(const ie in m)Ea(m[ie],d,c,ie);if(y){const ie=_e(y)?y.call(c):y;Reflect.ownKeys(ie).forEach(Le=>{_l(Le,ie[Le])})}N&&lo(N,o,"c");function Me(ie,Le){Ce(Le)?Le.forEach(It=>ie(It.bind(c))):Le&&ie(Le.bind(c))}if(Me(Bl,R),Me(Aa,Y),Me(vl,ee),Me(Pl,Ae),Me(Rl,J),Me(Dl,ke),Me(Ul,re),Me(kl,Re),Me(Fl,j),Me(pa,me),Me(Ca,ue),Me(Ll,W),Ce(We))if(We.length){const ie=o.exposed||(o.exposed={});We.forEach(Le=>{Object.defineProperty(ie,Le,{get:()=>c[Le],set:It=>c[Le]=It})})}else o.exposed||(o.exposed={});Je&&o.render===rn&&(o.render=Je),Xe!=null&&(o.inheritAttrs=Xe),ce&&(o.components=ce),Ie&&(o.directives=Ie)}function Gl(o,l,c=rn,d=!1){Ce(o)&&(o=os(o));for(const g in o){const h=o[g];let C;lt(h)?"default"in h?C=ni(h.from||g,h.default,!0):C=ni(h.from||g):C=ni(h),St(C)&&d?Object.defineProperty(l,g,{enumerable:!0,configurable:!0,get:()=>C.value,set:m=>C.value=m}):l[g]=C}}function lo(o,l,c){Kt(Ce(o)?o.map(d=>d.bind(l.proxy)):o.bind(l.proxy),l,c)}function Ea(o,l,c,d){const g=d.includes(".")?da(c,d):()=>c[d];if(pt(o)){const h=l[o];_e(h)&&Yi(g,h)}else if(_e(o))Yi(g,o.bind(c));else if(lt(o))if(Ce(o))o.forEach(h=>Ea(h,l,c,d));else{const h=_e(o.handler)?o.handler.bind(c):l[o.handler];_e(h)&&Yi(g,h,o)}}function Ns(o){const l=o.type,{mixins:c,extends:d}=l,{mixins:g,optionsCache:h,config:{optionMergeStrategies:C}}=o.appContext,m=h.get(l);let y;return m?y=m:!g.length&&!c&&!d?y=l:(y={},g.length&&g.forEach(p=>li(y,p,C,!0)),li(y,l,C)),lt(l)&&h.set(l,y),y}function li(o,l,c,d=!1){const{mixins:g,extends:h}=l;h&&li(o,h,c,!0),g&&g.forEach(C=>li(o,C,c,!0));for(const C in l)if(!(d&&C==="expose")){const m=Xl[C]||c&&c[C];o[C]=m?m(o[C],l[C]):l[C]}return o}const Xl={data:co,props:Xn,emits:Xn,methods:Xn,computed:Xn,beforeCreate:Rt,created:Rt,beforeMount:Rt,mounted:Rt,beforeUpdate:Rt,updated:Rt,beforeDestroy:Rt,beforeUnmount:Rt,destroyed:Rt,unmounted:Rt,activated:Rt,deactivated:Rt,errorCaptured:Rt,serverPrefetch:Rt,components:Xn,directives:Xn,watch:zl,provide:co,inject:Yl};function co(o,l){return l?o?function(){return Nt(_e(o)?o.call(this,this):o,_e(l)?l.call(this,this):l)}:l:o}function Yl(o,l){return Xn(os(o),os(l))}function os(o){if(Ce(o)){const l={};for(let c=0;c<o.length;c++)l[o[c]]=o[c];return l}return o}function Rt(o,l){return o?[...new Set([].concat(o,l))]:l}function Xn(o,l){return o?Nt(Nt(Object.create(null),o),l):l}function zl(o,l){if(!o)return l;if(!l)return o;const c=Nt(Object.create(null),o);for(const d in l)c[d]=Rt(o[d],l[d]);return c}function Zl(o,l,c,d=!1){const g={},h={};si(h,bi,1),o.propsDefaults=Object.create(null),ma(o,l,g,h);for(const C in o.propsOptions[0])C in g||(g[C]=void 0);c?o.props=d?g:rl(g):o.type.props?o.props=g:o.props=h,o.attrs=h}function jl(o,l,c,d){const{props:g,attrs:h,vnode:{patchFlag:C}}=o,m=Fe(g),[y]=o.propsOptions;let p=!1;if((d||C>0)&&!(C&16)){if(C&8){const N=o.vnode.dynamicProps;for(let R=0;R<N.length;R++){let Y=N[R];if(Ai(o.emitsOptions,Y))continue;const ee=l[Y];if(y)if(Pe(h,Y))ee!==h[Y]&&(h[Y]=ee,p=!0);else{const Ae=ur(Y);g[Ae]=as(y,m,Ae,ee,o,!1)}else ee!==h[Y]&&(h[Y]=ee,p=!0)}}}else{ma(o,l,g,h)&&(p=!0);let N;for(const R in m)(!l||!Pe(l,R)&&((N=gr(R))===R||!Pe(l,N)))&&(y?c&&(c[R]!==void 0||c[N]!==void 0)&&(g[R]=as(y,m,R,void 0,o,!0)):delete g[R]);if(h!==m)for(const R in h)(!l||!Pe(l,R))&&(delete h[R],p=!0)}p&&En(o,"set","$attrs")}function ma(o,l,c,d){const[g,h]=o.propsOptions;let C=!1,m;if(l)for(let y in l){if(ti(y))continue;const p=l[y];let N;g&&Pe(g,N=ur(y))?!h||!h.includes(N)?c[N]=p:(m||(m={}))[N]=p:Ai(o.emitsOptions,y)||(!(y in d)||p!==d[y])&&(d[y]=p,C=!0)}if(h){const y=Fe(c),p=m||rt;for(let N=0;N<h.length;N++){const R=h[N];c[R]=as(g,y,R,p[R],o,!Pe(p,R))}}return C}function as(o,l,c,d,g,h){const C=o[c];if(C!=null){const m=Pe(C,"default");if(m&&d===void 0){const y=C.default;if(C.type!==Function&&_e(y)){const{propsDefaults:p}=g;c in p?d=p[c]:(dr(g),d=p[c]=y.call(null,l),Kn())}else d=y}C[0]&&(h&&!m?d=!1:C[1]&&(d===""||d===gr(c))&&(d=!0))}return d}function ba(o,l,c=!1){const d=l.propsCache,g=d.get(o);if(g)return g;const h=o.props,C={},m=[];let y=!1;if(!_e(o)){const N=R=>{y=!0;const[Y,ee]=ba(R,l,!0);Nt(C,Y),ee&&m.push(...ee)};!c&&l.mixins.length&&l.mixins.forEach(N),o.extends&&N(o.extends),o.mixins&&o.mixins.forEach(N)}if(!h&&!y)return lt(o)&&d.set(o,ar),ar;if(Ce(h))for(let N=0;N<h.length;N++){const R=ur(h[N]);fo(R)&&(C[R]=rt)}else if(h)for(const N in h){const R=ur(N);if(fo(R)){const Y=h[N],ee=C[R]=Ce(Y)||_e(Y)?{type:Y}:Object.assign({},Y);if(ee){const Ae=go(Boolean,ee.type),J=go(String,ee.type);ee[0]=Ae>-1,ee[1]=J<0||Ae<J,(Ae>-1||Pe(ee,"default"))&&m.push(R)}}}const p=[C,m];return lt(o)&&d.set(o,p),p}function fo(o){return o[0]!=="$"}function uo(o){const l=o&&o.toString().match(/^\s*(function|class) (\w+)/);return l?l[2]:o===null?"null":""}function ho(o,l){return uo(o)===uo(l)}function go(o,l){return Ce(l)?l.findIndex(c=>ho(c,o)):_e(l)&&ho(l,o)?0:-1}const Ia=o=>o[0]==="_"||o==="$stable",Os=o=>Ce(o)?o.map(gn):[gn(o)],Kl=(o,l,c)=>{if(l._n)return l;const d=pl((...g)=>Os(l(...g)),c);return d._c=!1,d},ya=(o,l,c)=>{const d=o._ctx;for(const g in o){if(Ia(g))continue;const h=o[g];if(_e(h))l[g]=Kl(g,h,d);else if(h!=null){const C=Os(h);l[g]=()=>C}}},_a=(o,l)=>{const c=Os(l);o.slots.default=()=>c},ql=(o,l)=>{if(o.vnode.shapeFlag&32){const c=l._;c?(o.slots=Fe(l),si(l,"_",c)):ya(l,o.slots={})}else o.slots={},l&&_a(o,l);si(o.slots,bi,1)},Ql=(o,l,c)=>{const{vnode:d,slots:g}=o;let h=!0,C=rt;if(d.shapeFlag&32){const m=l._;m?c&&m===1?h=!1:(Nt(g,l),!c&&m===1&&delete g._):(h=!l.$stable,ya(l,g)),C=l}else l&&(_a(o,l),C={default:1});if(h)for(const m in g)!Ia(m)&&!(m in C)&&delete g[m]};function Ta(){return{app:null,config:{isNativeTag:E1,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Jl=0;function $l(o,l){return function(d,g=null){_e(d)||(d=Object.assign({},d)),g!=null&&!lt(g)&&(g=null);const h=Ta(),C=new Set;let m=!1;const y=h.app={_uid:Jl++,_component:d,_props:g,_container:null,_context:h,_instance:null,version:b0,get config(){return h.config},set config(p){},use(p,...N){return C.has(p)||(p&&_e(p.install)?(C.add(p),p.install(y,...N)):_e(p)&&(C.add(p),p(y,...N))),y},mixin(p){return h.mixins.includes(p)||h.mixins.push(p),y},component(p,N){return N?(h.components[p]=N,y):h.components[p]},directive(p,N){return N?(h.directives[p]=N,y):h.directives[p]},mount(p,N,R){if(!m){const Y=Bn(d,g);return Y.appContext=h,N&&l?l(Y,p):o(Y,p,R),m=!0,y._container=p,p.__vue_app__=y,Ds(Y.component)||Y.component.proxy}},unmount(){m&&(o(null,y._container),delete y._container.__vue_app__)},provide(p,N){return h.provides[p]=N,y}};return y}}function ls(o,l,c,d,g=!1){if(Ce(o)){o.forEach((Y,ee)=>ls(Y,l&&(Ce(l)?l[ee]:l),c,d,g));return}if(ri(d)&&!g)return;const h=d.shapeFlag&4?Ds(d.component)||d.component.proxy:d.el,C=g?null:h,{i:m,r:y}=o,p=l&&l.r,N=m.refs===rt?m.refs={}:m.refs,R=m.setupState;if(p!=null&&p!==y&&(pt(p)?(N[p]=null,Pe(R,p)&&(R[p]=null)):St(p)&&(p.value=null)),_e(y))Mn(y,m,12,[C,N]);else{const Y=pt(y),ee=St(y);if(Y||ee){const Ae=()=>{if(o.f){const J=Y?Pe(R,y)?R[y]:N[y]:y.value;g?Ce(J)&&xs(J,h):Ce(J)?J.includes(h)||J.push(h):Y?(N[y]=[h],Pe(R,y)&&(R[y]=N[y])):(y.value=[h],o.k&&(N[o.k]=y.value))}else Y?(N[y]=C,Pe(R,y)&&(R[y]=C)):ee&&(y.value=C,o.k&&(N[o.k]=C))};C?(Ae.id=-1,Ft(Ae,c)):Ae()}}}const Ft=yl;function e0(o){return t0(o)}function t0(o,l){const c=S1();c.__VUE__=!0;const{insert:d,remove:g,patchProp:h,createElement:C,createText:m,createComment:y,setText:p,setElementText:N,parentNode:R,nextSibling:Y,setScopeId:ee=rn,insertStaticContent:Ae}=o,J=(_,S,L,U=null,V=null,G=null,z=!1,k=null,$=!!S.dynamicChildren)=>{if(_===S)return;_&&!zn(_,S)&&(U=bn(_),Ke(_,V,G,!0),_=null),S.patchFlag===-2&&($=!1,S.dynamicChildren=null);const{type:B,ref:le,shapeFlag:se}=S;switch(B){case mi:ke(_,S,L,U);break;case Cn:Oe(_,S,L,U);break;case ji:_==null&&me(S,L,U,z);break;case jt:ce(_,S,L,U,V,G,z,k,$);break;default:se&1?Je(_,S,L,U,V,G,z,k,$):se&6?Ie(_,S,L,U,V,G,z,k,$):(se&64||se&128)&&B.process(_,S,L,U,V,G,z,k,$,Wt)}le!=null&&V&&ls(le,_&&_.ref,G,S||_,!S)},ke=(_,S,L,U)=>{if(_==null)d(S.el=m(S.children),L,U);else{const V=S.el=_.el;S.children!==_.children&&p(V,S.children)}},Oe=(_,S,L,U)=>{_==null?d(S.el=y(S.children||""),L,U):S.el=_.el},me=(_,S,L,U)=>{[_.el,_.anchor]=Ae(_.children,S,L,U,_.el,_.anchor)},q=({el:_,anchor:S},L,U)=>{let V;for(;_&&_!==S;)V=Y(_),d(_,L,U),_=V;d(S,L,U)},ue=({el:_,anchor:S})=>{let L;for(;_&&_!==S;)L=Y(_),g(_),_=L;g(S)},Je=(_,S,L,U,V,G,z,k,$)=>{z=z||S.type==="svg",_==null?Re(S,L,U,V,G,z,k,$):W(_,S,V,G,z,k,$)},Re=(_,S,L,U,V,G,z,k)=>{let $,B;const{type:le,props:se,shapeFlag:oe,transition:xe,dirs:we}=_;if($=_.el=C(_.type,G,se&&se.is,se),oe&8?N($,_.children):oe&16&&re(_.children,$,null,U,V,G&&le!=="foreignObject",z,k),we&&Wn(_,null,U,"created"),j($,_,_.scopeId,z,U),se){for(const Te in se)Te!=="value"&&!ti(Te)&&h($,Te,null,se[Te],G,_.children,U,V,ae);"value"in se&&h($,"value",null,se.value),(B=se.onVnodeBeforeMount)&&dn(B,U,_)}we&&Wn(_,null,U,"beforeMount");const Ge=(!V||V&&!V.pendingBranch)&&xe&&!xe.persisted;Ge&&xe.beforeEnter($),d($,S,L),((B=se&&se.onVnodeMounted)||Ge||we)&&Ft(()=>{B&&dn(B,U,_),Ge&&xe.enter($),we&&Wn(_,null,U,"mounted")},V)},j=(_,S,L,U,V)=>{if(L&&ee(_,L),U)for(let G=0;G<U.length;G++)ee(_,U[G]);if(V){let G=V.subTree;if(S===G){const z=V.vnode;j(_,z,z.scopeId,z.slotScopeIds,V.parent)}}},re=(_,S,L,U,V,G,z,k,$=0)=>{for(let B=$;B<_.length;B++){const le=_[B]=k?Rn(_[B]):gn(_[B]);J(null,le,S,L,U,V,G,z,k)}},W=(_,S,L,U,V,G,z)=>{const k=S.el=_.el;let{patchFlag:$,dynamicChildren:B,dirs:le}=S;$|=_.patchFlag&16;const se=_.props||rt,oe=S.props||rt;let xe;L&&Gn(L,!1),(xe=oe.onVnodeBeforeUpdate)&&dn(xe,L,S,_),le&&Wn(S,_,L,"beforeUpdate"),L&&Gn(L,!0);const we=V&&S.type!=="foreignObject";if(B?We(_.dynamicChildren,B,k,L,U,we,G):z||Le(_,S,k,null,L,U,we,G,!1),$>0){if($&16)Xe(k,S,se,oe,L,U,V);else if($&2&&se.class!==oe.class&&h(k,"class",null,oe.class,V),$&4&&h(k,"style",se.style,oe.style,V),$&8){const Ge=S.dynamicProps;for(let Te=0;Te<Ge.length;Te++){const Se=Ge[Te],Dt=se[Se],qt=oe[Se];(qt!==Dt||Se==="value")&&h(k,Se,Dt,qt,V,_.children,L,U,ae)}}$&1&&_.children!==S.children&&N(k,S.children)}else!z&&B==null&&Xe(k,S,se,oe,L,U,V);((xe=oe.onVnodeUpdated)||le)&&Ft(()=>{xe&&dn(xe,L,S,_),le&&Wn(S,_,L,"updated")},U)},We=(_,S,L,U,V,G,z)=>{for(let k=0;k<S.length;k++){const $=_[k],B=S[k],le=$.el&&($.type===jt||!zn($,B)||$.shapeFlag&70)?R($.el):L;J($,B,le,null,U,V,G,z,!0)}},Xe=(_,S,L,U,V,G,z)=>{if(L!==U){if(L!==rt)for(const k in L)!ti(k)&&!(k in U)&&h(_,k,L[k],null,z,S.children,V,G,ae);for(const k in U){if(ti(k))continue;const $=U[k],B=L[k];$!==B&&k!=="value"&&h(_,k,B,$,z,S.children,V,G,ae)}"value"in U&&h(_,"value",L.value,U.value)}},ce=(_,S,L,U,V,G,z,k,$)=>{const B=S.el=_?_.el:m(""),le=S.anchor=_?_.anchor:m("");let{patchFlag:se,dynamicChildren:oe,slotScopeIds:xe}=S;xe&&(k=k?k.concat(xe):xe),_==null?(d(B,L,U),d(le,L,U),re(S.children,L,le,V,G,z,k,$)):se>0&&se&64&&oe&&_.dynamicChildren?(We(_.dynamicChildren,oe,L,V,G,z,k),(S.key!=null||V&&S===V.subTree)&&Sa(_,S,!0)):Le(_,S,L,le,V,G,z,k,$)},Ie=(_,S,L,U,V,G,z,k,$)=>{S.slotScopeIds=k,_==null?S.shapeFlag&512?V.ctx.activate(S,L,U,z,$):tt(S,L,U,V,G,z,$):F(_,S,$)},tt=(_,S,L,U,V,G,z)=>{const k=_.component=h0(_,U,V);if(Ci(_)&&(k.ctx.renderer=Wt),g0(k),k.asyncDep){if(V&&V.registerDep(k,Me),!_.el){const $=k.subTree=Bn(Cn);Oe(null,$,S,L)}return}Me(k,_,S,L,V,G,z)},F=(_,S,L)=>{const U=S.component=_.component;if(ml(_,S,L))if(U.asyncDep&&!U.asyncResolved){ie(U,S,L);return}else U.next=S,gl(U.update),U.update();else S.el=_.el,U.vnode=S},Me=(_,S,L,U,V,G,z)=>{const k=()=>{if(_.isMounted){let{next:le,bu:se,u:oe,parent:xe,vnode:we}=_,Ge=le,Te;Gn(_,!1),le?(le.el=we.el,ie(_,le,z)):le=we,se&&Gi(se),(Te=le.props&&le.props.onVnodeBeforeUpdate)&&dn(Te,xe,le,we),Gn(_,!0);const Se=Xi(_),Dt=_.subTree;_.subTree=Se,J(Dt,Se,R(Dt.el),bn(Dt),_,V,G),le.el=Se.el,Ge===null&&bl(_,Se.el),oe&&Ft(oe,V),(Te=le.props&&le.props.onVnodeUpdated)&&Ft(()=>dn(Te,xe,le,we),V)}else{let le;const{el:se,props:oe}=S,{bm:xe,m:we,parent:Ge}=_,Te=ri(S);if(Gn(_,!1),xe&&Gi(xe),!Te&&(le=oe&&oe.onVnodeBeforeMount)&&dn(le,Ge,S),Gn(_,!0),se&&xt){const Se=()=>{_.subTree=Xi(_),xt(se,_.subTree,_,V,null)};Te?S.type.__asyncLoader().then(()=>!_.isUnmounted&&Se()):Se()}else{const Se=_.subTree=Xi(_);J(null,Se,L,U,_,V,G),S.el=Se.el}if(we&&Ft(we,V),!Te&&(le=oe&&oe.onVnodeMounted)){const Se=S;Ft(()=>dn(le,Ge,Se),V)}(S.shapeFlag&256||Ge&&ri(Ge.vnode)&&Ge.vnode.shapeFlag&256)&&_.a&&Ft(_.a,V),_.isMounted=!0,S=L=U=null}},$=_.effect=new Cs(k,()=>Ss(B),_.scope),B=_.update=()=>$.run();B.id=_.uid,Gn(_,!0),B()},ie=(_,S,L)=>{S.component=_;const U=_.vnode.props;_.vnode=S,_.next=null,jl(_,S.props,U,L),Ql(_,S.children,L),xr(),so(),wr()},Le=(_,S,L,U,V,G,z,k,$=!1)=>{const B=_&&_.children,le=_?_.shapeFlag:0,se=S.children,{patchFlag:oe,shapeFlag:xe}=S;if(oe>0){if(oe&128){Ut(B,se,L,U,V,G,z,k,$);return}else if(oe&256){It(B,se,L,U,V,G,z,k,$);return}}xe&8?(le&16&&ae(B,V,G),se!==B&&N(L,se)):le&16?xe&16?Ut(B,se,L,U,V,G,z,k,$):ae(B,V,G,!0):(le&8&&N(L,""),xe&16&&re(se,L,U,V,G,z,k,$))},It=(_,S,L,U,V,G,z,k,$)=>{_=_||ar,S=S||ar;const B=_.length,le=S.length,se=Math.min(B,le);let oe;for(oe=0;oe<se;oe++){const xe=S[oe]=$?Rn(S[oe]):gn(S[oe]);J(_[oe],xe,L,null,V,G,z,k,$)}B>le?ae(_,V,G,!0,!1,se):re(S,L,U,V,G,z,k,$,se)},Ut=(_,S,L,U,V,G,z,k,$)=>{let B=0;const le=S.length;let se=_.length-1,oe=le-1;for(;B<=se&&B<=oe;){const xe=_[B],we=S[B]=$?Rn(S[B]):gn(S[B]);if(zn(xe,we))J(xe,we,L,null,V,G,z,k,$);else break;B++}for(;B<=se&&B<=oe;){const xe=_[se],we=S[oe]=$?Rn(S[oe]):gn(S[oe]);if(zn(xe,we))J(xe,we,L,null,V,G,z,k,$);else break;se--,oe--}if(B>se){if(B<=oe){const xe=oe+1,we=xe<le?S[xe].el:U;for(;B<=oe;)J(null,S[B]=$?Rn(S[B]):gn(S[B]),L,we,V,G,z,k,$),B++}}else if(B>oe)for(;B<=se;)Ke(_[B],V,G,!0),B++;else{const xe=B,we=B,Ge=new Map;for(B=we;B<=oe;B++){const Be=S[B]=$?Rn(S[B]):gn(S[B]);Be.key!=null&&Ge.set(Be.key,B)}let Te,Se=0;const Dt=oe-we+1;let qt=!1,Ur=0;const qe=new Array(Dt);for(B=0;B<Dt;B++)qe[B]=0;for(B=xe;B<=se;B++){const Be=_[B];if(Se>=Dt){Ke(Be,V,G,!0);continue}let ye;if(Be.key!=null)ye=Ge.get(Be.key);else for(Te=we;Te<=oe;Te++)if(qe[Te-we]===0&&zn(Be,S[Te])){ye=Te;break}ye===void 0?Ke(Be,V,G,!0):(qe[ye-we]=B+1,ye>=Ur?Ur=ye:qt=!0,J(Be,S[ye],L,null,V,G,z,k,$),Se++)}const Q=qt?n0(qe):ar;for(Te=Q.length-1,B=Dt-1;B>=0;B--){const Be=we+B,ye=S[Be],$e=Be+1<le?S[Be+1].el:U;qe[B]===0?J(null,ye,L,$e,V,G,z,k,$):qt&&(Te<0||B!==Q[Te]?sn(ye,L,$e,2):Te--)}}},sn=(_,S,L,U,V=null)=>{const{el:G,type:z,transition:k,children:$,shapeFlag:B}=_;if(B&6){sn(_.component.subTree,S,L,U);return}if(B&128){_.suspense.move(S,L,U);return}if(B&64){z.move(_,S,L,Wt);return}if(z===jt){d(G,S,L);for(let se=0;se<$.length;se++)sn($[se],S,L,U);d(_.anchor,S,L);return}if(z===ji){q(_,S,L);return}if(U!==2&&B&1&&k)if(U===0)k.beforeEnter(G),d(G,S,L),Ft(()=>k.enter(G),V);else{const{leave:se,delayLeave:oe,afterLeave:xe}=k,we=()=>d(G,S,L),Ge=()=>{se(G,()=>{we(),xe&&xe()})};oe?oe(G,we,Ge):Ge()}else d(G,S,L)},Ke=(_,S,L,U=!1,V=!1)=>{const{type:G,props:z,ref:k,children:$,dynamicChildren:B,shapeFlag:le,patchFlag:se,dirs:oe}=_;if(k!=null&&ls(k,null,L,_,!0),le&256){S.ctx.deactivate(_);return}const xe=le&1&&oe,we=!ri(_);let Ge;if(we&&(Ge=z&&z.onVnodeBeforeUnmount)&&dn(Ge,S,_),le&6)Ar(_.component,L,U);else{if(le&128){_.suspense.unmount(L,U);return}xe&&Wn(_,null,S,"beforeUnmount"),le&64?_.type.remove(_,S,L,V,Wt,U):B&&(G!==jt||se>0&&se&64)?ae(B,S,L,!1,!0):(G===jt&&se&384||!V&&le&16)&&ae($,S,L),U&&on(_)}(we&&(Ge=z&&z.onVnodeUnmounted)||xe)&&Ft(()=>{Ge&&dn(Ge,S,_),xe&&Wn(_,null,S,"unmounted")},L)},on=_=>{const{type:S,el:L,anchor:U,transition:V}=_;if(S===jt){Ct(L,U);return}if(S===ji){ue(_);return}const G=()=>{g(L),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if(_.shapeFlag&1&&V&&!V.persisted){const{leave:z,delayLeave:k}=V,$=()=>z(L,G);k?k(_.el,G,$):$()}else G()},Ct=(_,S)=>{let L;for(;_!==S;)L=Y(_),g(_),_=L;g(S)},Ar=(_,S,L)=>{const{bum:U,scope:V,update:G,subTree:z,um:k}=_;U&&Gi(U),V.stop(),G&&(G.active=!1,Ke(z,_,S,L)),k&&Ft(k,S),Ft(()=>{_.isUnmounted=!0},S),S&&S.pendingBranch&&!S.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===S.pendingId&&(S.deps--,S.deps===0&&S.resolve())},ae=(_,S,L,U=!1,V=!1,G=0)=>{for(let z=G;z<_.length;z++)Ke(_[z],S,L,U,V)},bn=_=>_.shapeFlag&6?bn(_.component.subTree):_.shapeFlag&128?_.suspense.next():Y(_.anchor||_.el),ct=(_,S,L)=>{_==null?S._vnode&&Ke(S._vnode,null,null,!0):J(S._vnode||null,_,S,null,null,null,L),so(),aa(),S._vnode=_},Wt={p:J,um:Ke,m:sn,r:on,mt:tt,mc:re,pc:Le,pbc:We,n:bn,o};let wn,xt;return l&&([wn,xt]=l(Wt)),{render:ct,hydrate:wn,createApp:$l(ct,wn)}}function Gn({effect:o,update:l},c){o.allowRecurse=l.allowRecurse=c}function Sa(o,l,c=!1){const d=o.children,g=l.children;if(Ce(d)&&Ce(g))for(let h=0;h<d.length;h++){const C=d[h];let m=g[h];m.shapeFlag&1&&!m.dynamicChildren&&((m.patchFlag<=0||m.patchFlag===32)&&(m=g[h]=Rn(g[h]),m.el=C.el),c||Sa(C,m)),m.type===mi&&(m.el=C.el)}}function n0(o){const l=o.slice(),c=[0];let d,g,h,C,m;const y=o.length;for(d=0;d<y;d++){const p=o[d];if(p!==0){if(g=c[c.length-1],o[g]<p){l[d]=g,c.push(d);continue}for(h=0,C=c.length-1;h<C;)m=h+C>>1,o[c[m]]<p?h=m+1:C=m;p<o[c[h]]&&(h>0&&(l[d]=c[h-1]),c[h]=d)}}for(h=c.length,C=c[h-1];h-- >0;)c[h]=C,C=l[C];return c}const r0=o=>o.__isTeleport,jt=Symbol(void 0),mi=Symbol(void 0),Cn=Symbol(void 0),ji=Symbol(void 0),Rr=[];let nn=null;function Na(o=!1){Rr.push(nn=o?null:[])}function i0(){Rr.pop(),nn=Rr[Rr.length-1]||null}let Lr=1;function xo(o){Lr+=o}function s0(o){return o.dynamicChildren=Lr>0?nn||ar:null,i0(),Lr>0&&nn&&nn.push(o),o}function Oa(o,l,c,d,g,h){return s0(gt(o,l,c,d,g,h,!0))}function o0(o){return o?o.__v_isVNode===!0:!1}function zn(o,l){return o.type===l.type&&o.key===l.key}const bi="__vInternal",Ra=({key:o})=>o??null,ii=({ref:o,ref_key:l,ref_for:c})=>o!=null?pt(o)||St(o)||_e(o)?{i:tn,r:o,k:l,f:!!c}:o:null;function gt(o,l=null,c=null,d=0,g=null,h=o===jt?0:1,C=!1,m=!1){const y={__v_isVNode:!0,__v_skip:!0,type:o,props:l,key:l&&Ra(l),ref:l&&ii(l),scopeId:pi,slotScopeIds:null,children:c,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:h,patchFlag:d,dynamicProps:g,dynamicChildren:null,appContext:null,ctx:tn};return m?(Rs(y,c),h&128&&o.normalize(y)):c&&(y.shapeFlag|=pt(c)?8:16),Lr>0&&!C&&nn&&(y.patchFlag>0||h&6)&&y.patchFlag!==32&&nn.push(y),y}const Bn=a0;function a0(o,l=null,c=null,d=0,g=null,h=!1){if((!o||o===Vl)&&(o=Cn),o0(o)){const m=Pn(o,l,!0);return c&&Rs(m,c),Lr>0&&!h&&nn&&(m.shapeFlag&6?nn[nn.indexOf(o)]=m:nn.push(m)),m.patchFlag|=-2,m}if(p0(o)&&(o=o.__vccOpts),l){l=l0(l);let{class:m,style:y}=l;m&&!pt(m)&&(l.class=ds(m)),lt(y)&&($o(y)&&!Ce(y)&&(y=Nt({},y)),l.style=hs(y))}const C=pt(o)?1:Il(o)?128:r0(o)?64:lt(o)?4:_e(o)?2:0;return gt(o,l,c,d,g,C,h,!0)}function l0(o){return o?$o(o)||bi in o?Nt({},o):o:null}function Pn(o,l,c=!1){const{props:d,ref:g,patchFlag:h,children:C}=o,m=l?c0(d||{},l):d;return{__v_isVNode:!0,__v_skip:!0,type:o.type,props:m,key:m&&Ra(m),ref:l&&l.ref?c&&g?Ce(g)?g.concat(ii(l)):[g,ii(l)]:ii(l):g,scopeId:o.scopeId,slotScopeIds:o.slotScopeIds,children:C,target:o.target,targetAnchor:o.targetAnchor,staticCount:o.staticCount,shapeFlag:o.shapeFlag,patchFlag:l&&o.type!==jt?h===-1?16:h|16:h,dynamicProps:o.dynamicProps,dynamicChildren:o.dynamicChildren,appContext:o.appContext,dirs:o.dirs,transition:o.transition,component:o.component,suspense:o.suspense,ssContent:o.ssContent&&Pn(o.ssContent),ssFallback:o.ssFallback&&Pn(o.ssFallback),el:o.el,anchor:o.anchor,ctx:o.ctx,ce:o.ce}}function qn(o=" ",l=0){return Bn(mi,null,o,l)}function gn(o){return o==null||typeof o=="boolean"?Bn(Cn):Ce(o)?Bn(jt,null,o.slice()):typeof o=="object"?Rn(o):Bn(mi,null,String(o))}function Rn(o){return o.el===null&&o.patchFlag!==-1||o.memo?o:Pn(o)}function Rs(o,l){let c=0;const{shapeFlag:d}=o;if(l==null)l=null;else if(Ce(l))c=16;else if(typeof l=="object")if(d&65){const g=l.default;g&&(g._c&&(g._d=!1),Rs(o,g()),g._c&&(g._d=!0));return}else{c=32;const g=l._;!g&&!(bi in l)?l._ctx=tn:g===3&&tn&&(tn.slots._===1?l._=1:(l._=2,o.patchFlag|=1024))}else _e(l)?(l={default:l,_ctx:tn},c=32):(l=String(l),d&64?(c=16,l=[qn(l)]):c=8);o.children=l,o.shapeFlag|=c}function c0(...o){const l={};for(let c=0;c<o.length;c++){const d=o[c];for(const g in d)if(g==="class")l.class!==d.class&&(l.class=ds([l.class,d.class]));else if(g==="style")l.style=hs([l.style,d.style]);else if(hi(g)){const h=l[g],C=d[g];C&&h!==C&&!(Ce(h)&&h.includes(C))&&(l[g]=h?[].concat(h,C):C)}else g!==""&&(l[g]=d[g])}return l}function dn(o,l,c,d=null){Kt(o,l,7,[c,d])}const f0=Ta();let u0=0;function h0(o,l,c){const d=o.type,g=(l?l.appContext:o.appContext)||f0,h={uid:u0++,vnode:o,type:d,parent:l,appContext:g,root:null,next:null,subTree:null,effect:null,update:null,scope:new N1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:l?l.provides:Object.create(g.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ba(d,g),emitsOptions:ca(d,g),emit:null,emitted:null,propsDefaults:rt,inheritAttrs:d.inheritAttrs,ctx:rt,data:rt,props:rt,attrs:rt,slots:rt,refs:rt,setupState:rt,setupContext:null,suspense:c,suspenseId:c?c.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return h.ctx={_:h},h.root=l?l.root:h,h.emit=Al.bind(null,h),o.ce&&o.ce(h),h}let ut=null;const d0=()=>ut||tn,dr=o=>{ut=o,o.scope.on()},Kn=()=>{ut&&ut.scope.off(),ut=null};function Da(o){return o.vnode.shapeFlag&4}let Fr=!1;function g0(o,l=!1){Fr=l;const{props:c,children:d}=o.vnode,g=Da(o);Zl(o,c,g,l),ql(o,d);const h=g?x0(o,l):void 0;return Fr=!1,h}function x0(o,l){const c=o.type;o.accessCache=Object.create(null),o.proxy=ea(new Proxy(o.ctx,Hl));const{setup:d}=c;if(d){const g=o.setupContext=d.length>1?A0(o):null;dr(o),xr();const h=Mn(d,o,0,[o.props,g]);if(wr(),Kn(),ko(h)){if(h.then(Kn,Kn),l)return h.then(C=>{wo(o,C,l)}).catch(C=>{wi(C,o,0)});o.asyncDep=h}else wo(o,h,l)}else Ma(o,l)}function wo(o,l,c){_e(l)?o.type.__ssrInlineRender?o.ssrRender=l:o.render=l:lt(l)&&(o.setupState=ra(l)),Ma(o,c)}let Ao;function Ma(o,l,c){const d=o.type;if(!o.render){if(!l&&Ao&&!d.render){const g=d.template||Ns(o).template;if(g){const{isCustomElement:h,compilerOptions:C}=o.appContext.config,{delimiters:m,compilerOptions:y}=d,p=Nt(Nt({isCustomElement:h,delimiters:m},C),y);d.render=Ao(g,p)}}o.render=d.render||rn}dr(o),xr(),Wl(o),wr(),Kn()}function w0(o){return new Proxy(o.attrs,{get(l,c){return kt(o,"get","$attrs"),l[c]}})}function A0(o){const l=d=>{o.exposed=d||{}};let c;return{get attrs(){return c||(c=w0(o))},slots:o.slots,emit:o.emit,expose:l}}function Ds(o){if(o.exposed)return o.exposeProxy||(o.exposeProxy=new Proxy(ra(ea(o.exposed)),{get(l,c){if(c in l)return l[c];if(c in Or)return Or[c](o)},has(l,c){return c in l||c in Or}}))}function p0(o){return _e(o)&&"__vccOpts"in o}const C0=(o,l)=>fl(o,l,Fr),E0=Symbol(""),m0=()=>ni(E0),b0="3.2.47",I0="http://www.w3.org/2000/svg",Zn=typeof document<"u"?document:null,po=Zn&&Zn.createElement("template"),y0={insert:(o,l,c)=>{l.insertBefore(o,c||null)},remove:o=>{const l=o.parentNode;l&&l.removeChild(o)},createElement:(o,l,c,d)=>{const g=l?Zn.createElementNS(I0,o):Zn.createElement(o,c?{is:c}:void 0);return o==="select"&&d&&d.multiple!=null&&g.setAttribute("multiple",d.multiple),g},createText:o=>Zn.createTextNode(o),createComment:o=>Zn.createComment(o),setText:(o,l)=>{o.nodeValue=l},setElementText:(o,l)=>{o.textContent=l},parentNode:o=>o.parentNode,nextSibling:o=>o.nextSibling,querySelector:o=>Zn.querySelector(o),setScopeId(o,l){o.setAttribute(l,"")},insertStaticContent(o,l,c,d,g,h){const C=c?c.previousSibling:l.lastChild;if(g&&(g===h||g.nextSibling))for(;l.insertBefore(g.cloneNode(!0),c),!(g===h||!(g=g.nextSibling)););else{po.innerHTML=d?`<svg>${o}</svg>`:o;const m=po.content;if(d){const y=m.firstChild;for(;y.firstChild;)m.appendChild(y.firstChild);m.removeChild(y)}l.insertBefore(m,c)}return[C?C.nextSibling:l.firstChild,c?c.previousSibling:l.lastChild]}};function _0(o,l,c){const d=o._vtc;d&&(l=(l?[l,...d]:[...d]).join(" ")),l==null?o.removeAttribute("class"):c?o.setAttribute("class",l):o.className=l}function T0(o,l,c){const d=o.style,g=pt(c);if(c&&!g){if(l&&!pt(l))for(const h in l)c[h]==null&&cs(d,h,"");for(const h in c)cs(d,h,c[h])}else{const h=d.display;g?l!==c&&(d.cssText=c):l&&o.removeAttribute("style"),"_vod"in o&&(d.display=h)}}const Co=/\s*!important$/;function cs(o,l,c){if(Ce(c))c.forEach(d=>cs(o,l,d));else if(c==null&&(c=""),l.startsWith("--"))o.setProperty(l,c);else{const d=S0(o,l);Co.test(c)?o.setProperty(gr(d),c.replace(Co,""),"important"):o[d]=c}}const Eo=["Webkit","Moz","ms"],Ki={};function S0(o,l){const c=Ki[l];if(c)return c;let d=ur(l);if(d!=="filter"&&d in o)return Ki[l]=d;d=Ho(d);for(let g=0;g<Eo.length;g++){const h=Eo[g]+d;if(h in o)return Ki[l]=h}return l}const mo="http://www.w3.org/1999/xlink";function N0(o,l,c,d,g){if(d&&l.startsWith("xlink:"))c==null?o.removeAttributeNS(mo,l.slice(6,l.length)):o.setAttributeNS(mo,l,c);else{const h=C1(l);c==null||h&&!Po(c)?o.removeAttribute(l):o.setAttribute(l,h?"":c)}}function O0(o,l,c,d,g,h,C){if(l==="innerHTML"||l==="textContent"){d&&C(d,g,h),o[l]=c??"";return}if(l==="value"&&o.tagName!=="PROGRESS"&&!o.tagName.includes("-")){o._value=c;const y=c??"";(o.value!==y||o.tagName==="OPTION")&&(o.value=y),c==null&&o.removeAttribute(l);return}let m=!1;if(c===""||c==null){const y=typeof o[l];y==="boolean"?c=Po(c):c==null&&y==="string"?(c="",m=!0):y==="number"&&(c=0,m=!0)}try{o[l]=c}catch{}m&&o.removeAttribute(l)}function R0(o,l,c,d){o.addEventListener(l,c,d)}function D0(o,l,c,d){o.removeEventListener(l,c,d)}function M0(o,l,c,d,g=null){const h=o._vei||(o._vei={}),C=h[l];if(d&&C)C.value=d;else{const[m,y]=B0(l);if(d){const p=h[l]=L0(d,g);R0(o,m,p,y)}else C&&(D0(o,m,C,y),h[l]=void 0)}}const bo=/(?:Once|Passive|Capture)$/;function B0(o){let l;if(bo.test(o)){l={};let d;for(;d=o.match(bo);)o=o.slice(0,o.length-d[0].length),l[d[0].toLowerCase()]=!0}return[o[2]===":"?o.slice(3):gr(o.slice(2)),l]}let qi=0;const v0=Promise.resolve(),P0=()=>qi||(v0.then(()=>qi=0),qi=Date.now());function L0(o,l){const c=d=>{if(!d._vts)d._vts=Date.now();else if(d._vts<=c.attached)return;Kt(F0(d,c.value),l,5,[d])};return c.value=o,c.attached=P0(),c}function F0(o,l){if(Ce(l)){const c=o.stopImmediatePropagation;return o.stopImmediatePropagation=()=>{c.call(o),o._stopped=!0},l.map(d=>g=>!g._stopped&&d&&d(g))}else return l}const Io=/^on[a-z]/,k0=(o,l,c,d,g=!1,h,C,m,y)=>{l==="class"?_0(o,d,g):l==="style"?T0(o,c,d):hi(l)?gs(l)||M0(o,l,c,d,C):(l[0]==="."?(l=l.slice(1),!0):l[0]==="^"?(l=l.slice(1),!1):U0(o,l,d,g))?O0(o,l,d,h,C,m,y):(l==="true-value"?o._trueValue=d:l==="false-value"&&(o._falseValue=d),N0(o,l,d,g))};function U0(o,l,c,d){return d?!!(l==="innerHTML"||l==="textContent"||l in o&&Io.test(l)&&_e(c)):l==="spellcheck"||l==="draggable"||l==="translate"||l==="form"||l==="list"&&o.tagName==="INPUT"||l==="type"&&o.tagName==="TEXTAREA"||Io.test(l)&&pt(c)?!1:l in o}const V0={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Ol.props;const H0=Nt({patchProp:k0},y0);let yo;function W0(){return yo||(yo=e0(H0))}const G0=(...o)=>{const l=W0().createApp(...o),{mount:c}=l;return l.mount=d=>{const g=X0(d);if(!g)return;const h=l._component;!_e(h)&&!h.render&&!h.template&&(h.template=g.innerHTML),g.innerHTML="";const C=c(g,!1,g instanceof SVGElement);return g instanceof Element&&(g.removeAttribute("v-cloak"),g.setAttribute("data-v-app","")),C},l};function X0(o){return pt(o)?document.querySelector(o):o}const Y0="/vite.svg",z0="/assets/vue-5532db34.svg";var ne;(function(o){o[o.QR_CODE=0]="QR_CODE",o[o.AZTEC=1]="AZTEC",o[o.CODABAR=2]="CODABAR",o[o.CODE_39=3]="CODE_39",o[o.CODE_93=4]="CODE_93",o[o.CODE_128=5]="CODE_128",o[o.DATA_MATRIX=6]="DATA_MATRIX",o[o.MAXICODE=7]="MAXICODE",o[o.ITF=8]="ITF",o[o.EAN_13=9]="EAN_13",o[o.EAN_8=10]="EAN_8",o[o.PDF_417=11]="PDF_417",o[o.RSS_14=12]="RSS_14",o[o.RSS_EXPANDED=13]="RSS_EXPANDED",o[o.UPC_A=14]="UPC_A",o[o.UPC_E=15]="UPC_E",o[o.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ne||(ne={}));var _o=new Map([[ne.QR_CODE,"QR_CODE"],[ne.AZTEC,"AZTEC"],[ne.CODABAR,"CODABAR"],[ne.CODE_39,"CODE_39"],[ne.CODE_93,"CODE_93"],[ne.CODE_128,"CODE_128"],[ne.DATA_MATRIX,"DATA_MATRIX"],[ne.MAXICODE,"MAXICODE"],[ne.ITF,"ITF"],[ne.EAN_13,"EAN_13"],[ne.EAN_8,"EAN_8"],[ne.PDF_417,"PDF_417"],[ne.RSS_14,"RSS_14"],[ne.RSS_EXPANDED,"RSS_EXPANDED"],[ne.UPC_A,"UPC_A"],[ne.UPC_E,"UPC_E"],[ne.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),To;(function(o){o[o.UNKNOWN=0]="UNKNOWN",o[o.URL=1]="URL"})(To||(To={}));function Z0(o){return Object.values(ne).includes(o)}var ci;(function(o){o[o.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",o[o.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(ci||(ci={}));var j0=function(){function o(){}return o.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",o.SCAN_DEFAULT_FPS=2,o.DEFAULT_DISABLE_FLIP=!1,o.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,o.DEFAULT_SUPPORTED_SCAN_TYPE=[ci.SCAN_TYPE_CAMERA,ci.SCAN_TYPE_FILE],o}(),Ba=function(){function o(l,c){this.format=l,this.formatName=c}return o.prototype.toString=function(){return this.formatName},o.create=function(l){if(!_o.has(l))throw l+" not in html5QrcodeSupportedFormatsTextMap";return new o(l,_o.get(l))},o}(),So=function(){function o(){}return o.createFromText=function(l){var c={text:l};return{decodedText:l,result:c}},o.createFromQrcodeResult=function(l){return{decodedText:l.text,result:l}},o}(),fs;(function(o){o[o.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",o[o.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",o[o.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(fs||(fs={}));var K0=function(){function o(){}return o.createFrom=function(l){return{errorMessage:l,type:fs.UNKWOWN_ERROR}},o}(),q0=function(){function o(l){this.verbose=l}return o.prototype.log=function(l){this.verbose&&console.log(l)},o.prototype.warn=function(l){this.verbose&&console.warn(l)},o.prototype.logError=function(l,c){(this.verbose||c===!0)&&console.error(l)},o.prototype.logErrors=function(l){if(l.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(l)},o}();function An(o){return typeof o>"u"||o===null}var Dr=function(){function o(){}return o.codeParseError=function(l){return"QR code parse error, error = "+l},o.errorGettingUserMedia=function(l){return"Error getting userMedia, error = "+l},o.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},o.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},o.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},o.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},o}(),va=function(){function o(){}return o.isMediaStreamConstraintsValid=function(l,c){if(typeof l!="object"){var d=typeof l;return c.logError("videoConstraints should be of type object, the "+("object passed is of type "+d+"."),!0),!1}for(var g=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],h=new Set(g),C=Object.keys(l),m=0,y=C;m<y.length;m++){var p=y[m];if(h.has(p))return c.logError(p+" is not supported videoConstaints.",!0),!1}return!0},o}(),Sr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Q0(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var ze={},J0={get exports(){return ze},set exports(o){ze=o}};(function(o,l){(function(c,d){d(l)})(Sr,function(c){function d(w){return w==null}var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,e){w.__proto__=e}||function(w,e){for(var t in e)e.hasOwnProperty(t)&&(w[t]=e[t])};function h(w,e){g(w,e);function t(){this.constructor=w}w.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function C(w,e){var t=Object.setPrototypeOf;t?t(w,e):w.__proto__=e}function m(w,e){e===void 0&&(e=w.constructor);var t=Error.captureStackTrace;t&&t(w,e)}var y=function(w){h(e,w);function e(t){var n=this.constructor,r=w.call(this,t)||this;return Object.defineProperty(r,"name",{value:n.name,enumerable:!1}),C(r,n.prototype),m(r),r}return e}(Error);class p extends y{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}p.kind="Exception";class N extends p{}N.kind="ArgumentException";class R extends p{}R.kind="IllegalArgumentException";class Y{constructor(e){if(this.binarizer=e,e===null)throw new R("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,n,r){const i=this.binarizer.getLuminanceSource().crop(e,t,n,r);return new Y(this.binarizer.createBinarizer(i))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new Y(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new Y(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class ee extends p{static getChecksumInstance(){return new ee}}ee.kind="ChecksumException";class Ae{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class J{static arraycopy(e,t,n,r,i){for(;i--;)n[r++]=e[t++]}static currentTimeMillis(){return Date.now()}}class ke extends p{}ke.kind="IndexOutOfBoundsException";class Oe extends ke{constructor(e=void 0,t=void 0){super(t),this.index=e,this.message=t}}Oe.kind="ArrayIndexOutOfBoundsException";class me{static fill(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t}static fillWithin(e,t,n,r){me.rangeCheck(e.length,t,n);for(let i=t;i<n;i++)e[i]=r}static rangeCheck(e,t,n){if(t>n)throw new R("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new Oe(t);if(n>e)throw new Oe(n)}static asList(...e){return e}static create(e,t,n){return Array.from({length:e}).map(i=>Array.from({length:t}).fill(n))}static createInt32Array(e,t,n){return Array.from({length:e}).map(i=>Int32Array.from({length:t}).fill(n))}static equals(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}static hashCode(e){if(e===null)return 0;let t=1;for(const n of e)t=31*t+n;return t}static fillUint8Array(e,t){for(let n=0;n!==e.length;n++)e[n]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)}static copyOfRange(e,t,n){const r=n-t,i=new Int32Array(r);return J.arraycopy(e,t,i,0,r),i}static binarySearch(e,t,n){n===void 0&&(n=me.numberComparator);let r=0,i=e.length-1;for(;r<=i;){const s=i+r>>1,a=n(t,e[s]);if(a>0)r=s+1;else if(a<0)i=s-1;else return s}return-r-1}static numberComparator(e,t){return e-t}}class q{static numberOfTrailingZeros(e){let t;if(e===0)return 32;let n=31;return t=e<<16,t!==0&&(n-=16,e=t),t=e<<8,t!==0&&(n-=8,e=t),t=e<<4,t!==0&&(n-=4,e=t),t=e<<2,t!==0&&(n-=2,e=t),n-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e,t=void 0){return parseInt(e,t)}}q.MIN_VALUE_32_BITS=-2147483648,q.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ue{constructor(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=ue.makeArray(e):this.bits=t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const t=ue.makeArray(e);J.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=n[r];i&=~((1<<(e&31))-1);const s=n.length;for(;i===0;){if(++r===s)return t;i=n[r]}const a=r*32+q.numberOfTrailingZeros(i);return a>t?t:a}getNextUnset(e){const t=this.size;if(e>=t)return t;const n=this.bits;let r=Math.floor(e/32),i=~n[r];i&=~((1<<(e&31))-1);const s=n.length;for(;i===0;){if(++r===s)return t;i=~n[r]}const a=r*32+q.numberOfTrailingZeros(i);return a>t?t:a}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new R;if(t===e)return;t--;const n=Math.floor(e/32),r=Math.floor(t/32),i=this.bits;for(let s=n;s<=r;s++){const a=s>n?0:e&31,u=(2<<(s<r?31:t&31))-(1<<a);i[s]|=u}}clear(){const e=this.bits.length,t=this.bits;for(let n=0;n<e;n++)t[n]=0}isRange(e,t,n){if(t<e||e<0||t>this.size)throw new R;if(t===e)return!0;t--;const r=Math.floor(e/32),i=Math.floor(t/32),s=this.bits;for(let a=r;a<=i;a++){const f=a>r?0:e&31,x=(2<<(a<i?31:t&31))-(1<<f)&4294967295;if((s[a]&x)!==(n?x:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,t){if(t<0||t>32)throw new R("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let n=t;n>0;n--)this.appendBit((e>>n-1&1)===1)}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let n=0;n<t;n++)this.appendBit(e.get(n))}xor(e){if(this.size!==e.size)throw new R("Sizes don't match");const t=this.bits;for(let n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]}toBytes(e,t,n,r){for(let i=0;i<r;i++){let s=0;for(let a=0;a<8;a++)this.get(e)&&(s|=1<<7-a),e++;t[n+i]=s}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits;for(let i=0;i<n;i++){let s=r[i];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-i]=s}if(this.size!==n*32){const i=n*32-this.size;let s=e[0]>>>i;for(let a=1;a<n;a++){const f=e[a];s|=f<<32-i,e[a-1]=s,s=f>>>i}e[n-1]=s}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof ue))return!1;const t=e;return this.size===t.size&&me.equals(this.bits,t.bits)}hashCode(){return 31*this.size+me.hashCode(this.bits)}toString(){let e="";for(let t=0,n=this.size;t<n;t++)t&7||(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new ue(this.size,this.bits.slice())}}var Je;(function(w){w[w.OTHER=0]="OTHER",w[w.PURE_BARCODE=1]="PURE_BARCODE",w[w.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",w[w.TRY_HARDER=3]="TRY_HARDER",w[w.CHARACTER_SET=4]="CHARACTER_SET",w[w.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",w[w.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",w[w.ASSUME_GS1=7]="ASSUME_GS1",w[w.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",w[w.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",w[w.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Je||(Je={}));var Re=Je;class j extends p{static getFormatInstance(){return new j}}j.kind="FormatException";var re;(function(w){w[w.Cp437=0]="Cp437",w[w.ISO8859_1=1]="ISO8859_1",w[w.ISO8859_2=2]="ISO8859_2",w[w.ISO8859_3=3]="ISO8859_3",w[w.ISO8859_4=4]="ISO8859_4",w[w.ISO8859_5=5]="ISO8859_5",w[w.ISO8859_6=6]="ISO8859_6",w[w.ISO8859_7=7]="ISO8859_7",w[w.ISO8859_8=8]="ISO8859_8",w[w.ISO8859_9=9]="ISO8859_9",w[w.ISO8859_10=10]="ISO8859_10",w[w.ISO8859_11=11]="ISO8859_11",w[w.ISO8859_13=12]="ISO8859_13",w[w.ISO8859_14=13]="ISO8859_14",w[w.ISO8859_15=14]="ISO8859_15",w[w.ISO8859_16=15]="ISO8859_16",w[w.SJIS=16]="SJIS",w[w.Cp1250=17]="Cp1250",w[w.Cp1251=18]="Cp1251",w[w.Cp1252=19]="Cp1252",w[w.Cp1256=20]="Cp1256",w[w.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",w[w.UTF8=22]="UTF8",w[w.ASCII=23]="ASCII",w[w.Big5=24]="Big5",w[w.GB18030=25]="GB18030",w[w.EUC_KR=26]="EUC_KR"})(re||(re={}));class W{constructor(e,t,n,...r){this.valueIdentifier=e,this.name=n,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=r,W.VALUE_IDENTIFIER_TO_ECI.set(e,this),W.NAME_TO_ECI.set(n,this);const i=this.values;for(let s=0,a=i.length;s!==a;s++){const f=i[s];W.VALUES_TO_ECI.set(f,this)}for(const s of r)W.NAME_TO_ECI.set(s,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new j("incorect value");const t=W.VALUES_TO_ECI.get(e);if(t===void 0)throw new j("incorect value");return t}static getCharacterSetECIByName(e){const t=W.NAME_TO_ECI.get(e);if(t===void 0)throw new j("incorect value");return t}equals(e){if(!(e instanceof W))return!1;const t=e;return this.getName()===t.getName()}}W.VALUE_IDENTIFIER_TO_ECI=new Map,W.VALUES_TO_ECI=new Map,W.NAME_TO_ECI=new Map,W.Cp437=new W(re.Cp437,Int32Array.from([0,2]),"Cp437"),W.ISO8859_1=new W(re.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),W.ISO8859_2=new W(re.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),W.ISO8859_3=new W(re.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),W.ISO8859_4=new W(re.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),W.ISO8859_5=new W(re.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),W.ISO8859_6=new W(re.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),W.ISO8859_7=new W(re.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),W.ISO8859_8=new W(re.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),W.ISO8859_9=new W(re.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),W.ISO8859_10=new W(re.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),W.ISO8859_11=new W(re.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),W.ISO8859_13=new W(re.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),W.ISO8859_14=new W(re.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),W.ISO8859_15=new W(re.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),W.ISO8859_16=new W(re.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),W.SJIS=new W(re.SJIS,20,"SJIS","Shift_JIS"),W.Cp1250=new W(re.Cp1250,21,"Cp1250","windows-1250"),W.Cp1251=new W(re.Cp1251,22,"Cp1251","windows-1251"),W.Cp1252=new W(re.Cp1252,23,"Cp1252","windows-1252"),W.Cp1256=new W(re.Cp1256,24,"Cp1256","windows-1256"),W.UnicodeBigUnmarked=new W(re.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),W.UTF8=new W(re.UTF8,26,"UTF8","UTF-8"),W.ASCII=new W(re.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),W.Big5=new W(re.Big5,28,"Big5"),W.GB18030=new W(re.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),W.EUC_KR=new W(re.EUC_KR,30,"EUC_KR","EUC-KR");class We extends p{}We.kind="UnsupportedOperationException";class Xe{static decode(e,t){const n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)}static shouldDecodeOnFallback(e){return!Xe.isBrowser()&&e==="ISO-8859-1"}static encode(e,t){const n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof W?e:W.getCharacterSetECIByName(e)}static decodeFallback(e,t){const n=this.encodingCharacterSet(t);if(Xe.isDecodeFallbackSupported(n)){let r="";for(let i=0,s=e.length;i<s;i++){let a=e[i].toString(16);a.length<2&&(a="0"+a),r+="%"+a}return decodeURIComponent(r)}if(n.equals(W.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new We(`Encoding ${this.encodingName(t)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(W.UTF8)||e.equals(W.ISO8859_1)||e.equals(W.ASCII)}static encodeFallback(e){const n=btoa(unescape(encodeURIComponent(e))).split(""),r=[];for(let i=0;i<n.length;i++)r.push(n[i].charCodeAt(0));return new Uint8Array(r)}}class ce{static castAsNonUtf8Char(e,t=null){const n=t?t.getName():this.ISO88591;return Xe.decode(new Uint8Array([e]),n)}static guessEncoding(e,t){if(t!=null&&t.get(Re.CHARACTER_SET)!==void 0)return t.get(Re.CHARACTER_SET).toString();const n=e.length;let r=!0,i=!0,s=!0,a=0,f=0,u=0,x=0,A=0,E=0,I=0,T=0,O=0,D=0,P=0;const Z=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let K=0;K<n&&(r||i||s);K++){const X=e[K]&255;s&&(a>0?X&128?a--:s=!1:X&128&&(X&64?(a++,X&32?(a++,X&16?(a++,X&8?s=!1:x++):u++):f++):s=!1)),r&&(X>127&&X<160?r=!1:X>159&&(X<192||X===215||X===247)&&P++),i&&(A>0?X<64||X===127||X>252?i=!1:A--:X===128||X===160||X>239?i=!1:X>160&&X<224?(E++,T=0,I++,I>O&&(O=I)):X>127?(A++,I=0,T++,T>D&&(D=T)):(I=0,T=0))}return s&&a>0&&(s=!1),i&&A>0&&(i=!1),s&&(Z||f+u+x>0)?ce.UTF8:i&&(ce.ASSUME_SHIFT_JIS||O>=3||D>=3)?ce.SHIFT_JIS:r&&i?O===2&&E===2||P*10>=n?ce.SHIFT_JIS:ce.ISO88591:r?ce.ISO88591:i?ce.SHIFT_JIS:s?ce.UTF8:ce.PLATFORM_DEFAULT_ENCODING}static format(e,...t){let n=-1;function r(s,a,f,u,x,A){if(s==="%%")return"%";if(t[++n]===void 0)return;s=u?parseInt(u.substr(1)):void 0;let E=x?parseInt(x.substr(1)):void 0,I;switch(A){case"s":I=t[n];break;case"c":I=t[n][0];break;case"f":I=parseFloat(t[n]).toFixed(s);break;case"p":I=parseFloat(t[n]).toPrecision(s);break;case"e":I=parseFloat(t[n]).toExponential(s);break;case"x":I=parseInt(t[n]).toString(E||16);break;case"d":I=parseFloat(parseInt(t[n],E||10).toPrecision(s)).toFixed(0);break}I=typeof I=="object"?JSON.stringify(I):(+I).toString(E);let T=parseInt(f),O=f&&f[0]+""=="0"?"0":" ";for(;I.length<T;)I=a!==void 0?I+O:O+I;return I}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,r)}static getBytes(e,t){return Xe.encode(e,t)}static getCharCode(e,t=0){return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}ce.SHIFT_JIS=W.SJIS.getName(),ce.GB2312="GB2312",ce.ISO88591=W.ISO8859_1.getName(),ce.EUC_JP="EUC_JP",ce.UTF8=W.UTF8.getName(),ce.PLATFORM_DEFAULT_ENCODING=ce.UTF8,ce.ASSUME_SHIFT_JIS=!1;class Ie{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=ce.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,n){for(let r=t;t<t+n;r++)this.append(e[r]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class tt{constructor(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,t==null&&(t=e),this.height=t,e<1||t<1)throw new R("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,r==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,n=e[0].length,r=new tt(n,t);for(let i=0;i<t;i++){const s=e[i];for(let a=0;a<n;a++)s[a]&&r.set(a,i)}return r}static parseFromString(e,t,n){if(e===null)throw new R("stringRepresentation cannot be null");const r=new Array(e.length);let i=0,s=0,a=-1,f=0,u=0;for(;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(i>s){if(a===-1)a=i-s;else if(i-s!==a)throw new R("row lengths do not match");s=i,f++}u++}else if(e.substring(u,u+t.length)===t)u+=t.length,r[i]=!0,i++;else if(e.substring(u,u+n.length)===n)u+=n.length,r[i]=!1,i++;else throw new R("illegal character encountered: "+e.substring(u));if(i>s){if(a===-1)a=i-s;else if(i-s!==a)throw new R("row lengths do not match");f++}const x=new tt(a,f);for(let A=0;A<i;A++)r[A]&&x.set(Math.floor(A%a),Math.floor(A/a));return x}get(e,t){const n=t*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0}set(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295}unset(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)}flip(e,t){const n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new R("input matrix dimensions do not match");const t=new ue(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits;for(let i=0,s=this.height;i<s;i++){const a=i*n,f=e.getRow(i,t).getBitArray();for(let u=0;u<n;u++)r[a+u]^=f[u]}}clear(){const e=this.bits,t=e.length;for(let n=0;n<t;n++)e[n]=0}setRegion(e,t,n,r){if(t<0||e<0)throw new R("Left and top must be nonnegative");if(r<1||n<1)throw new R("Height and width must be at least 1");const i=e+n,s=t+r;if(s>this.height||i>this.width)throw new R("The region must fit inside the matrix");const a=this.rowSize,f=this.bits;for(let u=t;u<s;u++){const x=u*a;for(let A=e;A<i;A++)f[x+Math.floor(A/32)]|=1<<(A&31)&4294967295}}getRow(e,t){t==null||t.getSize()<this.width?t=new ue(this.width):t.clear();const n=this.rowSize,r=this.bits,i=e*n;for(let s=0;s<n;s++)t.setBulk(s*32,r[i+s]);return t}setRow(e,t){J.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let n=new ue(e),r=new ue(e);for(let i=0,s=Math.floor((t+1)/2);i<s;i++)n=this.getRow(i,n),r=this.getRow(t-1-i,r),n.reverse(),r.reverse(),this.setRow(i,r),this.setRow(t-1-i,n)}getEnclosingRectangle(){const e=this.width,t=this.height,n=this.rowSize,r=this.bits;let i=e,s=t,a=-1,f=-1;for(let u=0;u<t;u++)for(let x=0;x<n;x++){const A=r[u*n+x];if(A!==0){if(u<s&&(s=u),u>f&&(f=u),x*32<i){let E=0;for(;!(A<<31-E&4294967295);)E++;x*32+E<i&&(i=x*32+E)}if(x*32+31>a){let E=31;for(;!(A>>>E);)E--;x*32+E>a&&(a=x*32+E)}}}return a<i||f<s?null:Int32Array.from([i,s,a-i+1,f-s+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let n=0;for(;n<t.length&&t[n]===0;)n++;if(n===t.length)return null;const r=n/e;let i=n%e*32;const s=t[n];let a=0;for(;!(s<<31-a&4294967295);)a++;return i+=a,Int32Array.from([i,r])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let n=t.length-1;for(;n>=0&&t[n]===0;)n--;if(n<0)return null;const r=Math.floor(n/e);let i=Math.floor(n%e)*32;const s=t[n];let a=31;for(;!(s>>>a);)a--;return i+=a,Int32Array.from([i,r])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof tt))return!1;const t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&me.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+me.hashCode(this.bits),e}toString(e="X ",t="  ",n=`
`){return this.buildToString(e,t,n)}buildToString(e,t,n){let r=new Ie;for(let i=0,s=this.height;i<s;i++){for(let a=0,f=this.width;a<f;a++)r.append(this.get(a,i)?e:t);r.append(n)}return r.toString()}clone(){return new tt(this.width,this.height,this.rowSize,this.bits.slice())}}class F extends p{static getNotFoundInstance(){return new F}}F.kind="NotFoundException";class Me extends Ae{constructor(e){super(e),this.luminances=Me.EMPTY,this.buckets=new Int32Array(Me.LUMINANCE_BUCKETS)}getBlackRow(e,t){const n=this.getLuminanceSource(),r=n.getWidth();t==null||t.getSize()<r?t=new ue(r):t.clear(),this.initArrays(r);const i=n.getRow(e,this.luminances),s=this.buckets;for(let f=0;f<r;f++)s[(i[f]&255)>>Me.LUMINANCE_SHIFT]++;const a=Me.estimateBlackPoint(s);if(r<3)for(let f=0;f<r;f++)(i[f]&255)<a&&t.set(f);else{let f=i[0]&255,u=i[1]&255;for(let x=1;x<r-1;x++){const A=i[x+1]&255;(u*4-f-A)/2<a&&t.set(x),f=u,u=A}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight(),r=new tt(t,n);this.initArrays(t);const i=this.buckets;for(let f=1;f<5;f++){const u=Math.floor(n*f/5),x=e.getRow(u,this.luminances),A=Math.floor(t*4/5);for(let E=Math.floor(t/5);E<A;E++){const I=x[E]&255;i[I>>Me.LUMINANCE_SHIFT]++}}const s=Me.estimateBlackPoint(i),a=e.getMatrix();for(let f=0;f<n;f++){const u=f*t;for(let x=0;x<t;x++)(a[u+x]&255)<s&&r.set(x,f)}return r}createBinarizer(e){return new Me(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let n=0;n<Me.LUMINANCE_BUCKETS;n++)t[n]=0}static estimateBlackPoint(e){const t=e.length;let n=0,r=0,i=0;for(let x=0;x<t;x++)e[x]>i&&(r=x,i=e[x]),e[x]>n&&(n=e[x]);let s=0,a=0;for(let x=0;x<t;x++){const A=x-r,E=e[x]*A*A;E>a&&(s=x,a=E)}if(r>s){const x=r;r=s,s=x}if(s-r<=t/16)throw new F;let f=s-1,u=-1;for(let x=s-1;x>r;x--){const A=x-r,E=A*A*(s-x)*(n-e[x]);E>u&&(f=x,u=E)}return f<<Me.LUMINANCE_SHIFT}}Me.LUMINANCE_BITS=5,Me.LUMINANCE_SHIFT=8-Me.LUMINANCE_BITS,Me.LUMINANCE_BUCKETS=1<<Me.LUMINANCE_BITS,Me.EMPTY=Uint8ClampedArray.from([0]);class ie extends Me{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight();if(t>=ie.MINIMUM_DIMENSION&&n>=ie.MINIMUM_DIMENSION){const r=e.getMatrix();let i=t>>ie.BLOCK_SIZE_POWER;t&ie.BLOCK_SIZE_MASK&&i++;let s=n>>ie.BLOCK_SIZE_POWER;n&ie.BLOCK_SIZE_MASK&&s++;const a=ie.calculateBlackPoints(r,i,s,t,n),f=new tt(t,n);ie.calculateThresholdForBlock(r,i,s,t,n,a,f),this.matrix=f}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new ie(e)}static calculateThresholdForBlock(e,t,n,r,i,s,a){const f=i-ie.BLOCK_SIZE,u=r-ie.BLOCK_SIZE;for(let x=0;x<n;x++){let A=x<<ie.BLOCK_SIZE_POWER;A>f&&(A=f);const E=ie.cap(x,2,n-3);for(let I=0;I<t;I++){let T=I<<ie.BLOCK_SIZE_POWER;T>u&&(T=u);const O=ie.cap(I,2,t-3);let D=0;for(let Z=-2;Z<=2;Z++){const K=s[E+Z];D+=K[O-2]+K[O-1]+K[O]+K[O+1]+K[O+2]}const P=D/25;ie.thresholdBlock(e,T,A,P,r,a)}}}static cap(e,t,n){return e<t?t:e>n?n:e}static thresholdBlock(e,t,n,r,i,s){for(let a=0,f=n*i+t;a<ie.BLOCK_SIZE;a++,f+=i)for(let u=0;u<ie.BLOCK_SIZE;u++)(e[f+u]&255)<=r&&s.set(t+u,n+a)}static calculateBlackPoints(e,t,n,r,i){const s=i-ie.BLOCK_SIZE,a=r-ie.BLOCK_SIZE,f=new Array(n);for(let u=0;u<n;u++){f[u]=new Int32Array(t);let x=u<<ie.BLOCK_SIZE_POWER;x>s&&(x=s);for(let A=0;A<t;A++){let E=A<<ie.BLOCK_SIZE_POWER;E>a&&(E=a);let I=0,T=255,O=0;for(let P=0,Z=x*r+E;P<ie.BLOCK_SIZE;P++,Z+=r){for(let K=0;K<ie.BLOCK_SIZE;K++){const X=e[Z+K]&255;I+=X,X<T&&(T=X),X>O&&(O=X)}if(O-T>ie.MIN_DYNAMIC_RANGE)for(P++,Z+=r;P<ie.BLOCK_SIZE;P++,Z+=r)for(let K=0;K<ie.BLOCK_SIZE;K++)I+=e[Z+K]&255}let D=I>>ie.BLOCK_SIZE_POWER*2;if(O-T<=ie.MIN_DYNAMIC_RANGE&&(D=T/2,u>0&&A>0)){const P=(f[u-1][A]+2*f[u][A-1]+f[u-1][A-1])/4;T<P&&(D=P)}f[u][A]=D}}return f}}ie.BLOCK_SIZE_POWER=3,ie.BLOCK_SIZE=1<<ie.BLOCK_SIZE_POWER,ie.BLOCK_SIZE_MASK=ie.BLOCK_SIZE-1,ie.MINIMUM_DIMENSION=ie.BLOCK_SIZE*5,ie.MIN_DYNAMIC_RANGE=24;class Le{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,n,r){throw new We("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new We("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new We("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new Ie;for(let n=0;n<this.height;n++){const r=this.getRow(n,e);for(let i=0;i<this.width;i++){const s=r[i]&255;let a;s<64?a="#":s<128?a="+":s<192?a=".":a=" ",t.append(a)}t.append(`
`)}return t.toString()}}class It extends Le{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const n=this.delegate.getRow(e,t),r=this.getWidth();for(let i=0;i<r;i++)n[i]=255-(n[i]&255);return n}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t);for(let r=0;r<t;r++)n[r]=255-(e[r]&255);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,n,r){return new It(this.delegate.crop(e,t,n,r))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new It(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new It(this.delegate.rotateCounterClockwise45())}}class Ut extends Le{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=Ut.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return Ut.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,n){const r=new Uint8ClampedArray(t*n);for(let i=0,s=0,a=e.length;i<a;i+=4,s++){let f;if(e[i+3]===0)f=255;else{const x=e[i],A=e[i+1],E=e[i+2];f=306*x+601*A+117*E+512>>10}r[s]=f}return r}getRow(e,t){if(e<0||e>=this.getHeight())throw new R("Requested row is outside the image: "+e);const n=this.getWidth(),r=e*n;return t===null?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,n,r){return super.crop(e,t,n,r),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),n=t.getContext("2d"),r=e*Ut.DEGREE_TO_RADIANS,i=this.canvas.width,s=this.canvas.height,a=Math.ceil(Math.abs(Math.cos(r))*i+Math.abs(Math.sin(r))*s),f=Math.ceil(Math.abs(Math.sin(r))*i+Math.abs(Math.cos(r))*s);return t.width=a,t.height=f,n.translate(a/2,f/2),n.rotate(r),n.drawImage(this.canvas,i/-2,s/-2),this.buffer=Ut.makeBufferFromCanvasImageData(t),this}invert(){return new It(this)}}Ut.DEGREE_TO_RADIANS=Math.PI/180;class sn{constructor(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Ke=(globalThis||Sr||self||window||void 0)&&(globalThis||Sr||self||window||void 0).__awaiter||function(w,e,t,n){function r(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(x){try{u(n.next(x))}catch(A){s(A)}}function f(x){try{u(n.throw(x))}catch(A){s(A)}}function u(x){x.done?i(x.value):r(x.value).then(a,f)}u((n=n.apply(w,e||[])).next())})};class on{constructor(e,t=500,n){this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return Ke(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const n of e){const r=n.kind==="video"?"videoinput":n.kind;if(r!=="videoinput")continue;const i=n.deviceId||n.id,s=n.label||`Video device ${t.length+1}`,a=n.groupId,f={deviceId:i,label:s,kind:r,groupId:a};t.push(f)}return t})}getVideoInputDevices(){return Ke(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(t=>new sn(t.deviceId,t.label))})}findDeviceById(e){return Ke(this,void 0,void 0,function*(){const t=yield this.listVideoInputDevices();return t?t.find(n=>n.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return Ke(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return Ke(this,void 0,void 0,function*(){this.reset();let n;e?n={deviceId:{exact:e}}:n={facingMode:"environment"};const r={video:n};return yield this.decodeOnceFromConstraints(r,t)})}decodeOnceFromConstraints(e,t){return Ke(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(n,t)})}decodeOnceFromStream(e,t){return Ke(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(n)})}decodeFromInputVideoDeviceContinuously(e,t,n){return Ke(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,n)})}decodeFromVideoDevice(e,t,n){return Ke(this,void 0,void 0,function*(){let r;e?r={deviceId:{exact:e}}:r={facingMode:"environment"};const i={video:r};return yield this.decodeFromConstraints(i,t,n)})}decodeFromConstraints(e,t,n){return Ke(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(r,t,n)})}decodeFromStream(e,t,n){return Ke(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(r,n)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return Ke(this,void 0,void 0,function*(){const n=this.prepareVideoElement(t);return this.addVideoSource(n,e),this.videoElement=n,this.stream=e,yield this.playVideoOnLoadAsync(n),n})}playVideoOnLoadAsync(e){return new Promise((t,n)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return Ke(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){const n=document.getElementById(e);if(!n)throw new N(`element with id '${e}' not found`);if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new N(`element with id '${e}' must be an ${t} element`);return n}decodeFromImage(e,t){if(!e&&!t)throw new N("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new N("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,n){if(e===void 0&&t===void 0)throw new N("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)}decodeFromImageElement(e){if(!e)throw new N("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);this.imageElement=t;let n;return this.isImageLoaded(t)?n=this.decodeOnce(t,!1,!0):n=this._decodeOnLoadImage(t),n}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)}_decodeFromVideoElementSetup(e){if(!e)throw new N("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new N("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const n=this._decodeOnLoadImage(t);return t.src=e,n}decodeFromVideoUrl(e){if(!e)throw new N("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n}decodeFromVideoUrlContinuously(e,t){if(!e)throw new N("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r}_decodeOnLoadImage(e){return new Promise((t,n)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,n),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return Ke(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return Ke(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e,t=!0,n=!0){this._stopAsyncDecode=!1;const r=(i,s)=>{if(this._stopAsyncDecode){s(new F("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const a=this.decode(e);i(a)}catch(a){const f=t&&a instanceof F,x=(a instanceof ee||a instanceof j)&&n;if(f||x)return setTimeout(r,this._timeBetweenDecodingAttempts,i,s);s(a)}};return new Promise((i,s)=>r(i,s))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const n=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const r=this.decode(e);t(r,null),setTimeout(n,this.timeBetweenScansMillis)}catch(r){t(null,r);const i=r instanceof ee||r instanceof j,s=r instanceof F;(i||s)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,t,n){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t,n=this.captureCanvasContext){t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const t=this.getCaptureCanvas(e),n=new Ut(t),r=new ie(n);return new Y(r)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const n=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=n}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let n,r;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,r=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,r=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=r+"px",t.width=n,t.height=r,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class Ct{constructor(e,t,n=t==null?0:8*t.length,r,i,s=J.currentTimeMillis()){this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=i,this.timestamp=s,this.text=e,this.rawBytes=t,n==null?this.numBits=t==null?0:8*t.length:this.numBits=n,this.resultPoints=r,this.format=i,this.resultMetadata=null,s==null?this.timestamp=J.currentTimeMillis():this.timestamp=s}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){const n=new Array(t.length+e.length);J.arraycopy(t,0,n,0,t.length),J.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ar;(function(w){w[w.AZTEC=0]="AZTEC",w[w.CODABAR=1]="CODABAR",w[w.CODE_39=2]="CODE_39",w[w.CODE_93=3]="CODE_93",w[w.CODE_128=4]="CODE_128",w[w.DATA_MATRIX=5]="DATA_MATRIX",w[w.EAN_8=6]="EAN_8",w[w.EAN_13=7]="EAN_13",w[w.ITF=8]="ITF",w[w.MAXICODE=9]="MAXICODE",w[w.PDF_417=10]="PDF_417",w[w.QR_CODE=11]="QR_CODE",w[w.RSS_14=12]="RSS_14",w[w.RSS_EXPANDED=13]="RSS_EXPANDED",w[w.UPC_A=14]="UPC_A",w[w.UPC_E=15]="UPC_E",w[w.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ar||(Ar={}));var ae=Ar,bn;(function(w){w[w.OTHER=0]="OTHER",w[w.ORIENTATION=1]="ORIENTATION",w[w.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",w[w.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",w[w.ISSUE_NUMBER=4]="ISSUE_NUMBER",w[w.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",w[w.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",w[w.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",w[w.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",w[w.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",w[w.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(bn||(bn={}));var ct=bn;class Wt{constructor(e,t,n,r,i=-1,s=-1){this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class wn{exp(e){return this.expTable[e]}log(e){if(e===0)throw new R;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class xt{constructor(e,t){if(t.length===0)throw new R;this.field=e;const n=t.length;if(n>1&&t[0]===0){let r=1;for(;r<n&&t[r]===0;)r++;r===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-r),J.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const t=this.coefficients;let n;if(e===1){n=0;for(let s=0,a=t.length;s!==a;s++){const f=t[s];n=wn.addOrSubtract(n,f)}return n}n=t[0];const r=t.length,i=this.field;for(let s=1;s<r;s++)n=wn.addOrSubtract(i.multiply(e,n),t[s]);return n}addOrSubtract(e){if(!this.field.equals(e.field))throw new R("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){const s=t;t=n,n=s}let r=new Int32Array(n.length);const i=n.length-t.length;J.arraycopy(n,0,r,0,i);for(let s=i;s<n.length;s++)r[s]=wn.addOrSubtract(t[s-i],n[s]);return new xt(this.field,r)}multiply(e){if(!this.field.equals(e.field))throw new R("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,s=new Int32Array(n+i-1),a=this.field;for(let f=0;f<n;f++){const u=t[f];for(let x=0;x<i;x++)s[f+x]=wn.addOrSubtract(s[f+x],a.multiply(u,r[x]))}return new xt(a,s)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const t=this.coefficients.length,n=this.field,r=new Int32Array(t),i=this.coefficients;for(let s=0;s<t;s++)r[s]=n.multiply(i[s],e);return new xt(n,r)}multiplyByMonomial(e,t){if(e<0)throw new R;if(t===0)return this.field.getZero();const n=this.coefficients,r=n.length,i=new Int32Array(r+e),s=this.field;for(let a=0;a<r;a++)i[a]=s.multiply(n[a],t);return new xt(s,i)}divide(e){if(!this.field.equals(e.field))throw new R("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new R("Divide by 0");const t=this.field;let n=t.getZero(),r=this;const i=e.getCoefficient(e.getDegree()),s=t.inverse(i);for(;r.getDegree()>=e.getDegree()&&!r.isZero();){const a=r.getDegree()-e.getDegree(),f=t.multiply(r.getCoefficient(r.getDegree()),s),u=e.multiplyByMonomial(a,f),x=t.buildMonomial(a,f);n=n.addOrSubtract(x),r=r.addOrSubtract(u)}return[n,r]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),t===0||n!==1){const r=this.field.log(n);r===0?e+="1":r===1?e+="a":(e+="a^",e+=r)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e}}class _ extends p{}_.kind="ArithmeticException";class S extends wn{constructor(e,t,n){super(),this.primitive=e,this.size=t,this.generatorBase=n;const r=new Int32Array(t);let i=1;for(let a=0;a<t;a++)r[a]=i,i*=2,i>=t&&(i^=e,i&=t-1);this.expTable=r;const s=new Int32Array(t);for(let a=0;a<t-1;a++)s[r[a]]=a;this.logTable=s,this.zero=new xt(this,Int32Array.from([0])),this.one=new xt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new R;if(t===0)return this.zero;const n=new Int32Array(e+1);return n[0]=t,new xt(this,n)}inverse(e){if(e===0)throw new _;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+q.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}S.AZTEC_DATA_12=new S(4201,4096,1),S.AZTEC_DATA_10=new S(1033,1024,1),S.AZTEC_DATA_6=new S(67,64,1),S.AZTEC_PARAM=new S(19,16,1),S.QR_CODE_FIELD_256=new S(285,256,0),S.DATA_MATRIX_FIELD_256=new S(301,256,1),S.AZTEC_DATA_8=S.DATA_MATRIX_FIELD_256,S.MAXICODE_FIELD_64=S.AZTEC_DATA_6;class L extends p{}L.kind="ReedSolomonException";class U extends p{}U.kind="IllegalStateException";class V{constructor(e){this.field=e}decode(e,t){const n=this.field,r=new xt(n,e),i=new Int32Array(t);let s=!0;for(let I=0;I<t;I++){const T=r.evaluateAt(n.exp(I+n.getGeneratorBase()));i[i.length-1-I]=T,T!==0&&(s=!1)}if(s)return;const a=new xt(n,i),f=this.runEuclideanAlgorithm(n.buildMonomial(t,1),a,t),u=f[0],x=f[1],A=this.findErrorLocations(u),E=this.findErrorMagnitudes(x,A);for(let I=0;I<A.length;I++){const T=e.length-1-n.log(A[I]);if(T<0)throw new L("Bad error location");e[T]=S.addOrSubtract(e[T],E[I])}}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){const I=e;e=t,t=I}const r=this.field;let i=e,s=t,a=r.getZero(),f=r.getOne();for(;s.getDegree()>=(n/2|0);){let I=i,T=a;if(i=s,a=f,i.isZero())throw new L("r_{i-1} was zero");s=I;let O=r.getZero();const D=i.getCoefficient(i.getDegree()),P=r.inverse(D);for(;s.getDegree()>=i.getDegree()&&!s.isZero();){const Z=s.getDegree()-i.getDegree(),K=r.multiply(s.getCoefficient(s.getDegree()),P);O=O.addOrSubtract(r.buildMonomial(Z,K)),s=s.addOrSubtract(i.multiplyByMonomial(Z,K))}if(f=O.multiply(a).addOrSubtract(T),s.getDegree()>=i.getDegree())throw new U("Division algorithm failed to reduce polynomial?")}const u=f.getCoefficient(0);if(u===0)throw new L("sigmaTilde(0) was zero");const x=r.inverse(u),A=f.multiplyScalar(x),E=s.multiplyScalar(x);return[A,E]}findErrorLocations(e){const t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);const n=new Int32Array(t);let r=0;const i=this.field;for(let s=1;s<i.getSize()&&r<t;s++)e.evaluateAt(s)===0&&(n[r]=i.inverse(s),r++);if(r!==t)throw new L("Error locator degree does not match number of roots");return n}findErrorMagnitudes(e,t){const n=t.length,r=new Int32Array(n),i=this.field;for(let s=0;s<n;s++){const a=i.inverse(t[s]);let f=1;for(let u=0;u<n;u++)if(s!==u){const x=i.multiply(t[u],a),A=x&1?x&-2:x|1;f=i.multiply(f,A)}r[s]=i.multiply(e.evaluateAt(a),i.inverse(f)),i.getGeneratorBase()!==0&&(r[s]=i.multiply(r[s],a))}return r}}var G;(function(w){w[w.UPPER=0]="UPPER",w[w.LOWER=1]="LOWER",w[w.MIXED=2]="MIXED",w[w.DIGIT=3]="DIGIT",w[w.PUNCT=4]="PUNCT",w[w.BINARY=5]="BINARY"})(G||(G={}));class z{decode(e){this.ddata=e;let t=e.getBits(),n=this.extractBits(t),r=this.correctBits(n),i=z.convertBoolArrayToByteArray(r),s=z.getEncodedData(r),a=new Wt(i,s,null,null);return a.setNumBits(r.length),a}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,n=G.UPPER,r=G.UPPER,i="",s=0;for(;s<t;)if(r===G.BINARY){if(t-s<5)break;let a=z.readCode(e,s,5);if(s+=5,a===0){if(t-s<11)break;a=z.readCode(e,s,11)+31,s+=11}for(let f=0;f<a;f++){if(t-s<8){s=t;break}const u=z.readCode(e,s,8);i+=ce.castAsNonUtf8Char(u),s+=8}r=n}else{let a=r===G.DIGIT?4:5;if(t-s<a)break;let f=z.readCode(e,s,a);s+=a;let u=z.getCharacter(r,f);u.startsWith("CTRL_")?(n=r,r=z.getTable(u.charAt(5)),u.charAt(6)==="L"&&(n=r)):(i+=u,r=n)}return i}static getTable(e){switch(e){case"L":return G.LOWER;case"P":return G.PUNCT;case"M":return G.MIXED;case"D":return G.DIGIT;case"B":return G.BINARY;case"U":default:return G.UPPER}}static getCharacter(e,t){switch(e){case G.UPPER:return z.UPPER_TABLE[t];case G.LOWER:return z.LOWER_TABLE[t];case G.MIXED:return z.MIXED_TABLE[t];case G.PUNCT:return z.PUNCT_TABLE[t];case G.DIGIT:return z.DIGIT_TABLE[t];default:throw new U("Bad table")}}correctBits(e){let t,n;this.ddata.getNbLayers()<=2?(n=6,t=S.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,t=S.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,t=S.AZTEC_DATA_10):(n=12,t=S.AZTEC_DATA_12);let r=this.ddata.getNbDatablocks(),i=e.length/n;if(i<r)throw new j;let s=e.length%n,a=new Int32Array(i);for(let E=0;E<i;E++,s+=n)a[E]=z.readCode(e,s,n);try{new V(t).decode(a,i-r)}catch(E){throw new j(E)}let f=(1<<n)-1,u=0;for(let E=0;E<r;E++){let I=a[E];if(I===0||I===f)throw new j;(I===1||I===f-1)&&u++}let x=new Array(r*n-u),A=0;for(let E=0;E<r;E++){let I=a[E];if(I===1||I===f-1)x.fill(I>1,A,A+n-1),A+=n-1;else for(let T=n-1;T>=0;--T)x[A++]=(I&1<<T)!==0}return x}extractBits(e){let t=this.ddata.isCompact(),n=this.ddata.getNbLayers(),r=(t?11:14)+n*4,i=new Int32Array(r),s=new Array(this.totalBitsInLayer(n,t));if(t)for(let a=0;a<i.length;a++)i[a]=a;else{let a=r+1+2*q.truncDivision(q.truncDivision(r,2)-1,15),f=r/2,u=q.truncDivision(a,2);for(let x=0;x<f;x++){let A=x+q.truncDivision(x,15);i[f-x-1]=u-A-1,i[f+x]=u+A+1}}for(let a=0,f=0;a<n;a++){let u=(n-a)*4+(t?9:12),x=a*2,A=r-1-x;for(let E=0;E<u;E++){let I=E*2;for(let T=0;T<2;T++)s[f+I+T]=e.get(i[x+T],i[x+E]),s[f+2*u+I+T]=e.get(i[x+E],i[A-T]),s[f+4*u+I+T]=e.get(i[A-T],i[A-E]),s[f+6*u+I+T]=e.get(i[A-E],i[x+T])}f+=u*8}return s}static readCode(e,t,n){let r=0;for(let i=t;i<t+n;i++)r<<=1,e[i]&&(r|=1);return r}static readByte(e,t){let n=e.length-t;return n>=8?z.readCode(e,t,8):z.readCode(e,t,n)<<8-n}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let n=0;n<t.length;n++)t[n]=z.readByte(e,8*n);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}z.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],z.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],z.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],z.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],z.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class k{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,n,r){const i=e-n,s=t-r;return Math.sqrt(i*i+s*s)}static sum(e){let t=0;for(let n=0,r=e.length;n!==r;n++){const i=e[n];t+=i}return t}}class ${static floatToIntBits(e){return e}}$.MAX_VALUE=Number.MAX_SAFE_INTEGER;class B{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof B){const t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*$.floatToIntBits(this.x)+$.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),r=this.distance(e[0],e[2]);let i,s,a;if(n>=t&&n>=r?(s=e[0],i=e[1],a=e[2]):r>=n&&r>=t?(s=e[1],i=e[0],a=e[2]):(s=e[2],i=e[0],a=e[1]),this.crossProductZ(i,s,a)<0){const f=i;i=a,a=f}e[0]=i,e[1]=s,e[2]=a}static distance(e,t){return k.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,n){const r=t.x,i=t.y;return(n.x-r)*(e.y-i)-(n.y-i)*(e.x-r)}}class le{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class se extends le{constructor(e,t,n,r,i){super(e,t),this.compact=n,this.nbDatablocks=r,this.nbLayers=i}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class oe{constructor(e,t,n,r){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=oe.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),r==null&&(r=e.getHeight()/2|0);const i=t/2|0;if(this.leftInit=n-i,this.rightInit=n+i,this.upInit=r-i,this.downInit=r+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new F}detect(){let e=this.leftInit,t=this.rightInit,n=this.upInit,r=this.downInit,i=!1,s=!0,a=!1,f=!1,u=!1,x=!1,A=!1;const E=this.width,I=this.height;for(;s;){s=!1;let T=!0;for(;(T||!f)&&t<E;)T=this.containsBlackPoint(n,r,t,!1),T?(t++,s=!0,f=!0):f||t++;if(t>=E){i=!0;break}let O=!0;for(;(O||!u)&&r<I;)O=this.containsBlackPoint(e,t,r,!0),O?(r++,s=!0,u=!0):u||r++;if(r>=I){i=!0;break}let D=!0;for(;(D||!x)&&e>=0;)D=this.containsBlackPoint(n,r,e,!1),D?(e--,s=!0,x=!0):x||e--;if(e<0){i=!0;break}let P=!0;for(;(P||!A)&&n>=0;)P=this.containsBlackPoint(e,t,n,!0),P?(n--,s=!0,A=!0):A||n--;if(n<0){i=!0;break}s&&(a=!0)}if(!i&&a){const T=t-e;let O=null;for(let K=1;O===null&&K<T;K++)O=this.getBlackPointOnSegment(e,r-K,e+K,r);if(O==null)throw new F;let D=null;for(let K=1;D===null&&K<T;K++)D=this.getBlackPointOnSegment(e,n+K,e+K,n);if(D==null)throw new F;let P=null;for(let K=1;P===null&&K<T;K++)P=this.getBlackPointOnSegment(t,n+K,t-K,n);if(P==null)throw new F;let Z=null;for(let K=1;Z===null&&K<T;K++)Z=this.getBlackPointOnSegment(t,r-K,t-K,r);if(Z==null)throw new F;return this.centerEdges(Z,O,P,D)}else throw new F}getBlackPointOnSegment(e,t,n,r){const i=k.round(k.distance(e,t,n,r)),s=(n-e)/i,a=(r-t)/i,f=this.image;for(let u=0;u<i;u++){const x=k.round(e+u*s),A=k.round(t+u*a);if(f.get(x,A))return new B(x,A)}return null}centerEdges(e,t,n,r){const i=e.getX(),s=e.getY(),a=t.getX(),f=t.getY(),u=n.getX(),x=n.getY(),A=r.getX(),E=r.getY(),I=oe.CORR;return i<this.width/2?[new B(A-I,E+I),new B(a+I,f+I),new B(u-I,x-I),new B(i+I,s-I)]:[new B(A+I,E+I),new B(a+I,f-I),new B(u-I,x+I),new B(i-I,s-I)]}containsBlackPoint(e,t,n,r){const i=this.image;if(r){for(let s=e;s<=t;s++)if(i.get(s,n))return!0}else for(let s=e;s<=t;s++)if(i.get(n,s))return!0;return!1}}oe.INIT_SIZE=10,oe.CORR=1;class xe{static checkAndNudgePoints(e,t){const n=e.getWidth(),r=e.getHeight();let i=!0;for(let s=0;s<t.length&&i;s+=2){const a=Math.floor(t[s]),f=Math.floor(t[s+1]);if(a<-1||a>n||f<-1||f>r)throw new F;i=!1,a===-1?(t[s]=0,i=!0):a===n&&(t[s]=n-1,i=!0),f===-1?(t[s+1]=0,i=!0):f===r&&(t[s+1]=r-1,i=!0)}i=!0;for(let s=t.length-2;s>=0&&i;s-=2){const a=Math.floor(t[s]),f=Math.floor(t[s+1]);if(a<-1||a>n||f<-1||f>r)throw new F;i=!1,a===-1?(t[s]=0,i=!0):a===n&&(t[s]=n-1,i=!0),f===-1?(t[s+1]=0,i=!0):f===r&&(t[s+1]=r-1,i=!0)}}}class we{constructor(e,t,n,r,i,s,a,f,u){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=i,this.a32=s,this.a13=a,this.a23=f,this.a33=u}static quadrilateralToQuadrilateral(e,t,n,r,i,s,a,f,u,x,A,E,I,T,O,D){const P=we.quadrilateralToSquare(e,t,n,r,i,s,a,f);return we.squareToQuadrilateral(u,x,A,E,I,T,O,D).times(P)}transformPoints(e){const t=e.length,n=this.a11,r=this.a12,i=this.a13,s=this.a21,a=this.a22,f=this.a23,u=this.a31,x=this.a32,A=this.a33;for(let E=0;E<t;E+=2){const I=e[E],T=e[E+1],O=i*I+f*T+A;e[E]=(n*I+s*T+u)/O,e[E+1]=(r*I+a*T+x)/O}}transformPointsWithValues(e,t){const n=this.a11,r=this.a12,i=this.a13,s=this.a21,a=this.a22,f=this.a23,u=this.a31,x=this.a32,A=this.a33,E=e.length;for(let I=0;I<E;I++){const T=e[I],O=t[I],D=i*T+f*O+A;e[I]=(n*T+s*O+u)/D,t[I]=(r*T+a*O+x)/D}}static squareToQuadrilateral(e,t,n,r,i,s,a,f){const u=e-n+i-a,x=t-r+s-f;if(u===0&&x===0)return new we(n-e,i-n,e,r-t,s-r,t,0,0,1);{const A=n-i,E=a-i,I=r-s,T=f-s,O=A*T-E*I,D=(u*T-E*x)/O,P=(A*x-u*I)/O;return new we(n-e+D*n,a-e+P*a,e,r-t+D*r,f-t+P*f,t,D,P,1)}}static quadrilateralToSquare(e,t,n,r,i,s,a,f){return we.squareToQuadrilateral(e,t,n,r,i,s,a,f).buildAdjoint()}buildAdjoint(){return new we(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new we(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class Ge extends xe{sampleGrid(e,t,n,r,i,s,a,f,u,x,A,E,I,T,O,D,P,Z,K){const X=we.quadrilateralToQuadrilateral(r,i,s,a,f,u,x,A,E,I,T,O,D,P,Z,K);return this.sampleGridWithTransform(e,t,n,X)}sampleGridWithTransform(e,t,n,r){if(t<=0||n<=0)throw new F;const i=new tt(t,n),s=new Float32Array(2*t);for(let a=0;a<n;a++){const f=s.length,u=a+.5;for(let x=0;x<f;x+=2)s[x]=x/2+.5,s[x+1]=u;r.transformPoints(s),xe.checkAndNudgePoints(e,s);try{for(let x=0;x<f;x+=2)e.get(Math.floor(s[x]),Math.floor(s[x+1]))&&i.set(x/2,a)}catch{throw new F}}return i}}class Te{static setGridSampler(e){Te.gridSampler=e}static getInstance(){return Te.gridSampler}}Te.gridSampler=new Ge;class Se{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new B(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Dt{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){let s=n[0];n[0]=n[2],n[2]=s}this.extractParameters(n);let r=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new se(r,i,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new F;let t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);let r=0;for(let s=0;s<4;s++){let a=n[(this.shift+s)%4];this.compact?(r<<=7,r+=a>>1&127):(r<<=10,r+=(a>>2&31<<5)+(a>>1&31))}let i=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=(i>>6)+1,this.nbDataBlocks=(i&63)+1):(this.nbLayers=(i>>11)+1,this.nbDataBlocks=(i&2047)+1)}getRotation(e,t){let n=0;e.forEach((r,i,s)=>{let a=(r>>t-2<<1)+(r&1);n=(n<<3)+a}),n=((n&1)<<11)+(n>>1);for(let r=0;r<4;r++)if(q.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new F}getCorrectedParameterData(e,t){let n,r;t?(n=7,r=2):(n=10,r=4);let i=n-r,s=new Int32Array(n);for(let f=n-1;f>=0;--f)s[f]=e&15,e>>=4;try{new V(S.AZTEC_PARAM).decode(s,i)}catch{throw new F}let a=0;for(let f=0;f<r;f++)a=(a<<4)+s[f];return a}getBullsEyeCorners(e){let t=e,n=e,r=e,i=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let A=this.getFirstDifferent(t,s,1,-1),E=this.getFirstDifferent(n,s,1,1),I=this.getFirstDifferent(r,s,-1,1),T=this.getFirstDifferent(i,s,-1,-1);if(this.nbCenterLayers>2){let O=this.distancePoint(T,A)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(O<.75||O>1.25||!this.isWhiteOrBlackRectangle(A,E,I,T))break}t=A,n=E,r=I,i=T,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new F;this.compact=this.nbCenterLayers===5;let a=new B(t.getX()+.5,t.getY()-.5),f=new B(n.getX()+.5,n.getY()+.5),u=new B(r.getX()-.5,r.getY()+.5),x=new B(i.getX()-.5,i.getY()-.5);return this.expandSquare([a,f,u,x],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,n,r;try{let a=new oe(this.image).detect();e=a[0],t=a[1],n=a[2],r=a[3]}catch{let f=this.image.getWidth()/2,u=this.image.getHeight()/2;e=this.getFirstDifferent(new Se(f+7,u-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Se(f+7,u+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Se(f-7,u+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new Se(f-7,u-7),!1,-1,-1).toResultPoint()}let i=k.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=k.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{let a=new oe(this.image,15,i,s).detect();e=a[0],t=a[1],n=a[2],r=a[3]}catch{e=this.getFirstDifferent(new Se(i+7,s-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Se(i+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new Se(i-7,s+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new Se(i-7,s-7),!1,-1,-1).toResultPoint()}return i=k.round((e.getX()+r.getX()+t.getX()+n.getX())/4),s=k.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new Se(i,s)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,n,r,i){let s=Te.getInstance(),a=this.getDimension(),f=a/2-this.nbCenterLayers,u=a/2+this.nbCenterLayers;return s.sampleGrid(e,a,a,f,f,u,f,u,u,f,u,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY())}sampleLine(e,t,n){let r=0,i=this.distanceResultPoint(e,t),s=i/n,a=e.getX(),f=e.getY(),u=s*(t.getX()-e.getX())/i,x=s*(t.getY()-e.getY())/i;for(let A=0;A<n;A++)this.image.get(k.round(a+A*u),k.round(f+A*x))&&(r|=1<<n-A-1);return r}isWhiteOrBlackRectangle(e,t,n,r){let i=3;e=new Se(e.getX()-i,e.getY()+i),t=new Se(t.getX()-i,t.getY()-i),n=new Se(n.getX()+i,n.getY()-i),r=new Se(r.getX()+i,r.getY()+i);let s=this.getColor(r,e);if(s===0)return!1;let a=this.getColor(e,t);return a!==s||(a=this.getColor(t,n),a!==s)?!1:(a=this.getColor(n,r),a===s)}getColor(e,t){let n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,i=(t.getY()-e.getY())/n,s=0,a=e.getX(),f=e.getY(),u=this.image.get(e.getX(),e.getY()),x=Math.ceil(n);for(let E=0;E<x;E++)a+=r,f+=i,this.image.get(k.round(a),k.round(f))!==u&&s++;let A=s/n;return A>.1&&A<.9?0:A<=.1===u?1:-1}getFirstDifferent(e,t,n,r){let i=e.getX()+n,s=e.getY()+r;for(;this.isValid(i,s)&&this.image.get(i,s)===t;)i+=n,s+=r;for(i-=n,s-=r;this.isValid(i,s)&&this.image.get(i,s)===t;)i+=n;for(i-=n;this.isValid(i,s)&&this.image.get(i,s)===t;)s+=r;return s-=r,new Se(i,s)}expandSquare(e,t,n){let r=n/(2*t),i=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,f=(e[0].getY()+e[2].getY())/2,u=new B(a+r*i,f+r*s),x=new B(a-r*i,f-r*s);i=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,f=(e[1].getY()+e[3].getY())/2;let A=new B(a+r*i,f+r*s),E=new B(a-r*i,f-r*s);return[u,A,x,E]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=k.round(e.getX()),n=k.round(e.getY());return this.isValid(t,n)}distancePoint(e,t){return k.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return k.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(q.truncDivision(this.nbLayers-4,8)+1)+15}}class qt{decode(e,t=null){let n=null,r=new Dt(e.getBlackMatrix()),i=null,s=null;try{let x=r.detectMirror(!1);i=x.getPoints(),this.reportFoundResultPoints(t,i),s=new z().decode(x)}catch(x){n=x}if(s==null)try{let x=r.detectMirror(!0);i=x.getPoints(),this.reportFoundResultPoints(t,i),s=new z().decode(x)}catch(x){throw n??x}let a=new Ct(s.getText(),s.getRawBytes(),s.getNumBits(),i,ae.AZTEC,J.currentTimeMillis()),f=s.getByteSegments();f!=null&&a.putMetadata(ct.BYTE_SEGMENTS,f);let u=s.getECLevel();return u!=null&&a.putMetadata(ct.ERROR_CORRECTION_LEVEL,u),a}reportFoundResultPoints(e,t){if(e!=null){let n=e.get(Re.NEED_RESULT_POINT_CALLBACK);n!=null&&t.forEach((r,i,s)=>{n.foundPossibleResultPoint(r)})}}reset(){}}class Ur extends on{constructor(e=500){super(new qt,e)}}class qe{decode(e,t){try{return this.doDecode(e,t)}catch{if(t&&t.get(Re.TRY_HARDER)===!0&&e.isRotateSupported()){const i=e.rotateCounterClockwise(),s=this.doDecode(i,t),a=s.getResultMetadata();let f=270;a!==null&&a.get(ct.ORIENTATION)===!0&&(f=f+a.get(ct.ORIENTATION)%360),s.putMetadata(ct.ORIENTATION,f);const u=s.getResultPoints();if(u!==null){const x=i.getHeight();for(let A=0;A<u.length;A++)u[A]=new B(x-u[A].getY()-1,u[A].getX())}return s}else throw new F}}reset(){}doDecode(e,t){const n=e.getWidth(),r=e.getHeight();let i=new ue(n);const s=t&&t.get(Re.TRY_HARDER)===!0,a=Math.max(1,r>>(s?8:5));let f;s?f=r:f=15;const u=Math.trunc(r/2);for(let x=0;x<f;x++){const A=Math.trunc((x+1)/2),E=(x&1)===0,I=u+a*(E?A:-A);if(I<0||I>=r)break;try{i=e.getBlackRow(I,i)}catch{continue}for(let T=0;T<2;T++){if(T===1&&(i.reverse(),t&&t.get(Re.NEED_RESULT_POINT_CALLBACK)===!0)){const O=new Map;t.forEach((D,P)=>O.set(P,D)),O.delete(Re.NEED_RESULT_POINT_CALLBACK),t=O}try{const O=this.decodeRow(I,i,t);if(T===1){O.putMetadata(ct.ORIENTATION,180);const D=O.getResultPoints();D!==null&&(D[0]=new B(n-D[0].getX()-1,D[0].getY()),D[1]=new B(n-D[1].getX()-1,D[1].getY()))}return O}catch{}}}throw new F}static recordPattern(e,t,n){const r=n.length;for(let u=0;u<r;u++)n[u]=0;const i=e.getSize();if(t>=i)throw new F;let s=!e.get(t),a=0,f=t;for(;f<i;){if(e.get(f)!==s)n[a]++;else{if(++a===r)break;n[a]=1,s=!s}f++}if(!(a===r||a===r-1&&f===i))throw new F}static recordPatternInReverse(e,t,n){let r=n.length,i=e.get(t);for(;t>0&&r>=0;)e.get(--t)!==i&&(r--,i=!i);if(r>=0)throw new F;qe.recordPattern(e,t+1,n)}static patternMatchVariance(e,t,n){const r=e.length;let i=0,s=0;for(let u=0;u<r;u++)i+=e[u],s+=t[u];if(i<s)return Number.POSITIVE_INFINITY;const a=i/s;n*=a;let f=0;for(let u=0;u<r;u++){const x=e[u],A=t[u]*a,E=x>A?x-A:A-x;if(E>n)return Number.POSITIVE_INFINITY;f+=E}return f/i}}class Q extends qe{static findStartPattern(e){const t=e.getSize(),n=e.getNextSet(0);let r=0,i=Int32Array.from([0,0,0,0,0,0]),s=n,a=!1;const f=6;for(let u=n;u<t;u++)if(e.get(u)!==a)i[r]++;else{if(r===f-1){let x=Q.MAX_AVG_VARIANCE,A=-1;for(let E=Q.CODE_START_A;E<=Q.CODE_START_C;E++){const I=qe.patternMatchVariance(i,Q.CODE_PATTERNS[E],Q.MAX_INDIVIDUAL_VARIANCE);I<x&&(x=I,A=E)}if(A>=0&&e.isRange(Math.max(0,s-(u-s)/2),s,!1))return Int32Array.from([s,u,A]);s+=i[0]+i[1],i=i.slice(2,i.length-1),i[r-1]=0,i[r]=0,r--}else r++;i[r]=1,a=!a}throw new F}static decodeCode(e,t,n){qe.recordPattern(e,n,t);let r=Q.MAX_AVG_VARIANCE,i=-1;for(let s=0;s<Q.CODE_PATTERNS.length;s++){const a=Q.CODE_PATTERNS[s],f=this.patternMatchVariance(t,a,Q.MAX_INDIVIDUAL_VARIANCE);f<r&&(r=f,i=s)}if(i>=0)return i;throw new F}decodeRow(e,t,n){const r=n&&n.get(Re.ASSUME_GS1)===!0,i=Q.findStartPattern(t),s=i[2];let a=0;const f=new Uint8Array(20);f[a++]=s;let u;switch(s){case Q.CODE_START_A:u=Q.CODE_CODE_A;break;case Q.CODE_START_B:u=Q.CODE_CODE_B;break;case Q.CODE_START_C:u=Q.CODE_CODE_C;break;default:throw new j}let x=!1,A=!1,E="",I=i[0],T=i[1];const O=Int32Array.from([0,0,0,0,0,0]);let D=0,P=0,Z=s,K=0,X=!0,Ne=!1,pe=!1;for(;!x;){const sr=A;switch(A=!1,D=P,P=Q.decodeCode(t,O,T),f[a++]=P,P!==Q.CODE_STOP&&(X=!0),P!==Q.CODE_STOP&&(K++,Z+=K*P),I=T,T+=O.reduce((u1,h1)=>u1+h1,0),P){case Q.CODE_START_A:case Q.CODE_START_B:case Q.CODE_START_C:throw new j}switch(u){case Q.CODE_CODE_A:if(P<64)pe===Ne?E+=String.fromCharCode(" ".charCodeAt(0)+P):E+=String.fromCharCode(" ".charCodeAt(0)+P+128),pe=!1;else if(P<96)pe===Ne?E+=String.fromCharCode(P-64):E+=String.fromCharCode(P+64),pe=!1;else switch(P!==Q.CODE_STOP&&(X=!1),P){case Q.CODE_FNC_1:r&&(E.length===0?E+="]C1":E+=String.fromCharCode(29));break;case Q.CODE_FNC_2:case Q.CODE_FNC_3:break;case Q.CODE_FNC_4_A:!Ne&&pe?(Ne=!0,pe=!1):Ne&&pe?(Ne=!1,pe=!1):pe=!0;break;case Q.CODE_SHIFT:A=!0,u=Q.CODE_CODE_B;break;case Q.CODE_CODE_B:u=Q.CODE_CODE_B;break;case Q.CODE_CODE_C:u=Q.CODE_CODE_C;break;case Q.CODE_STOP:x=!0;break}break;case Q.CODE_CODE_B:if(P<96)pe===Ne?E+=String.fromCharCode(" ".charCodeAt(0)+P):E+=String.fromCharCode(" ".charCodeAt(0)+P+128),pe=!1;else switch(P!==Q.CODE_STOP&&(X=!1),P){case Q.CODE_FNC_1:r&&(E.length===0?E+="]C1":E+=String.fromCharCode(29));break;case Q.CODE_FNC_2:case Q.CODE_FNC_3:break;case Q.CODE_FNC_4_B:!Ne&&pe?(Ne=!0,pe=!1):Ne&&pe?(Ne=!1,pe=!1):pe=!0;break;case Q.CODE_SHIFT:A=!0,u=Q.CODE_CODE_A;break;case Q.CODE_CODE_A:u=Q.CODE_CODE_A;break;case Q.CODE_CODE_C:u=Q.CODE_CODE_C;break;case Q.CODE_STOP:x=!0;break}break;case Q.CODE_CODE_C:if(P<100)P<10&&(E+="0"),E+=P;else switch(P!==Q.CODE_STOP&&(X=!1),P){case Q.CODE_FNC_1:r&&(E.length===0?E+="]C1":E+=String.fromCharCode(29));break;case Q.CODE_CODE_A:u=Q.CODE_CODE_A;break;case Q.CODE_CODE_B:u=Q.CODE_CODE_B;break;case Q.CODE_STOP:x=!0;break}break}sr&&(u=u===Q.CODE_CODE_A?Q.CODE_CODE_B:Q.CODE_CODE_A)}const Pt=T-I;if(T=t.getNextUnset(T),!t.isRange(T,Math.min(t.getSize(),T+(T-I)/2),!1))throw new F;if(Z-=K*D,Z%103!==D)throw new ee;const Jt=E.length;if(Jt===0)throw new F;Jt>0&&X&&(u===Q.CODE_CODE_C?E=E.substring(0,Jt-2):E=E.substring(0,Jt-1));const Lt=(i[1]+i[0])/2,je=I+Pt/2,bt=f.length,Vt=new Uint8Array(bt);for(let sr=0;sr<bt;sr++)Vt[sr]=f[sr];const ir=[new B(Lt,e),new B(je,e)];return new Ct(E,Vt,0,ir,ae.CODE_128,new Date().getTime())}}Q.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Q.MAX_AVG_VARIANCE=.25,Q.MAX_INDIVIDUAL_VARIANCE=.7,Q.CODE_SHIFT=98,Q.CODE_CODE_C=99,Q.CODE_CODE_B=100,Q.CODE_CODE_A=101,Q.CODE_FNC_1=102,Q.CODE_FNC_2=97,Q.CODE_FNC_3=96,Q.CODE_FNC_4_A=101,Q.CODE_FNC_4_B=100,Q.CODE_START_A=103,Q.CODE_START_B=104,Q.CODE_START_C=105,Q.CODE_STOP=106;class Be extends qe{constructor(e=!1,t=!1){super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,n){let r=this.counters;r.fill(0),this.decodeRowResult="";let i=Be.findAsteriskPattern(t,r),s=t.getNextSet(i[1]),a=t.getSize(),f,u;do{Be.recordPattern(t,s,r);let O=Be.toNarrowWidePattern(r);if(O<0)throw new F;f=Be.patternToChar(O),this.decodeRowResult+=f,u=s;for(let D of r)s+=D;s=t.getNextSet(s)}while(f!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let x=0;for(let O of r)x+=O;let A=s-u-x;if(s!==a&&A*2<x)throw new F;if(this.usingCheckDigit){let O=this.decodeRowResult.length-1,D=0;for(let P=0;P<O;P++)D+=Be.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(P));if(this.decodeRowResult.charAt(O)!==Be.ALPHABET_STRING.charAt(D%43))throw new ee;this.decodeRowResult=this.decodeRowResult.substring(0,O)}if(this.decodeRowResult.length===0)throw new F;let E;this.extendedMode?E=Be.decodeExtended(this.decodeRowResult):E=this.decodeRowResult;let I=(i[1]+i[0])/2,T=u+x/2;return new Ct(E,null,0,[new B(I,e),new B(T,e)],ae.CODE_39,new Date().getTime())}static findAsteriskPattern(e,t){let n=e.getSize(),r=e.getNextSet(0),i=0,s=r,a=!1,f=t.length;for(let u=r;u<n;u++)if(e.get(u)!==a)t[i]++;else{if(i===f-1){if(this.toNarrowWidePattern(t)===Be.ASTERISK_ENCODING&&e.isRange(Math.max(0,s-Math.floor((u-s)/2)),s,!1))return[s,u];s+=t[0]+t[1],t.copyWithin(0,2,2+i-1),t[i-1]=0,t[i]=0,i--}else i++;t[i]=1,a=!a}throw new F}static toNarrowWidePattern(e){let t=e.length,n=0,r;do{let i=2147483647;for(let f of e)f<i&&f>n&&(i=f);n=i,r=0;let s=0,a=0;for(let f=0;f<t;f++){let u=e[f];u>n&&(a|=1<<t-1-f,r++,s+=u)}if(r===3){for(let f=0;f<t&&r>0;f++){let u=e[f];if(u>n&&(r--,u*2>=s))return-1}return a}}while(r>3);return-1}static patternToChar(e){for(let t=0;t<Be.CHARACTER_ENCODINGS.length;t++)if(Be.CHARACTER_ENCODINGS[t]===e)return Be.ALPHABET_STRING.charAt(t);if(e===Be.ASTERISK_ENCODING)return"*";throw new F}static decodeExtended(e){let t=e.length,n="";for(let r=0;r<t;r++){let i=e.charAt(r);if(i==="+"||i==="$"||i==="%"||i==="/"){let s=e.charAt(r+1),a="\0";switch(i){case"+":if(s>="A"&&s<="Z")a=String.fromCharCode(s.charCodeAt(0)+32);else throw new j;break;case"$":if(s>="A"&&s<="Z")a=String.fromCharCode(s.charCodeAt(0)-64);else throw new j;break;case"%":if(s>="A"&&s<="E")a=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")a=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")a=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")a=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")a="\0";else if(s==="V")a="@";else if(s==="W")a="`";else if(s==="X"||s==="Y"||s==="Z")a="";else throw new j;break;case"/":if(s>="A"&&s<="O")a=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")a=":";else throw new j;break}n+=a,r++}else n+=i}return n}}Be.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Be.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Be.ASTERISK_ENCODING=148;class ye extends qe{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,n){let r=this.decodeStart(t),i=this.decodeEnd(t),s=new Ie;ye.decodeMiddle(t,r[1],i[0],s);let a=s.toString(),f=null;n!=null&&(f=n.get(Re.ALLOWED_LENGTHS)),f==null&&(f=ye.DEFAULT_ALLOWED_LENGTHS);let u=a.length,x=!1,A=0;for(let T of f){if(u===T){x=!0;break}T>A&&(A=T)}if(!x&&u>A&&(x=!0),!x)throw new j;const E=[new B(r[1],e),new B(i[0],e)];return new Ct(a,null,0,E,ae.ITF,new Date().getTime())}static decodeMiddle(e,t,n,r){let i=new Int32Array(10),s=new Int32Array(5),a=new Int32Array(5);for(i.fill(0),s.fill(0),a.fill(0);t<n;){qe.recordPattern(e,t,i);for(let u=0;u<5;u++){let x=2*u;s[u]=i[x],a[u]=i[x+1]}let f=ye.decodeDigit(s);r.append(f.toString()),f=this.decodeDigit(a),r.append(f.toString()),i.forEach(function(u){t+=u})}}decodeStart(e){let t=ye.skipWhiteSpace(e),n=ye.findGuardPattern(e,t,ye.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(e,n[0]),n}validateQuietZone(e,t){let n=this.narrowLineWidth*10;n=n<t?n:t;for(let r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(n!==0)throw new F}static skipWhiteSpace(e){const t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new F;return n}decodeEnd(e){e.reverse();try{let t=ye.skipWhiteSpace(e),n;try{n=ye.findGuardPattern(e,t,ye.END_PATTERN_REVERSED[0])}catch(i){i instanceof F&&(n=ye.findGuardPattern(e,t,ye.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,n[0]);let r=n[0];return n[0]=e.getSize()-n[1],n[1]=e.getSize()-r,n}finally{e.reverse()}}static findGuardPattern(e,t,n){let r=n.length,i=new Int32Array(r),s=e.getSize(),a=!1,f=0,u=t;i.fill(0);for(let x=t;x<s;x++)if(e.get(x)!==a)i[f]++;else{if(f===r-1){if(qe.patternMatchVariance(i,n,ye.MAX_INDIVIDUAL_VARIANCE)<ye.MAX_AVG_VARIANCE)return[u,x];u+=i[0]+i[1],J.arraycopy(i,2,i,0,f-1),i[f-1]=0,i[f]=0,f--}else f++;i[f]=1,a=!a}throw new F}static decodeDigit(e){let t=ye.MAX_AVG_VARIANCE,n=-1,r=ye.PATTERNS.length;for(let i=0;i<r;i++){let s=ye.PATTERNS[i],a=qe.patternMatchVariance(e,s,ye.MAX_INDIVIDUAL_VARIANCE);a<t?(t=a,n=i):a===t&&(n=-1)}if(n>=0)return n%10;throw new F}}ye.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ye.MAX_AVG_VARIANCE=.38,ye.MAX_INDIVIDUAL_VARIANCE=.5,ye.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ye.START_PATTERN=Int32Array.from([1,1,1,1]),ye.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class $e extends qe{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t=!1,n,r=0,i=Int32Array.from([0,0,0]);for(;!t;){i=Int32Array.from([0,0,0]),n=$e.findGuardPattern(e,r,!1,this.START_END_PATTERN,i);let s=n[0];r=n[1];let a=s-(r-s);a>=0&&(t=e.isRange(a,s,!1))}return n}static checkChecksum(e){return $e.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let n=parseInt(e.charAt(t-1),10);return $e.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(i<0||i>9)throw new j;n+=i}n*=3;for(let r=t-2;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(i<0||i>9)throw new j;n+=i}return(1e3-n)%10}static decodeEnd(e,t){return $e.findGuardPattern(e,t,!1,$e.START_END_PATTERN,new Int32Array($e.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))}static findGuardPattern(e,t,n,r,i){let s=e.getSize();t=n?e.getNextUnset(t):e.getNextSet(t);let a=0,f=t,u=r.length,x=n;for(let A=t;A<s;A++)if(e.get(A)!==x)i[a]++;else{if(a===u-1){if(qe.patternMatchVariance(i,r,$e.MAX_INDIVIDUAL_VARIANCE)<$e.MAX_AVG_VARIANCE)return Int32Array.from([f,A]);f+=i[0]+i[1];let E=i.slice(2,i.length-1);for(let I=0;I<a-1;I++)i[I]=E[I];i[a-1]=0,i[a]=0,a--}else a++;i[a]=1,x=!x}throw new F}static decodeDigit(e,t,n,r){this.recordPattern(e,n,t);let i=this.MAX_AVG_VARIANCE,s=-1,a=r.length;for(let f=0;f<a;f++){let u=r[f],x=qe.patternMatchVariance(t,u,$e.MAX_INDIVIDUAL_VARIANCE);x<i&&(i=x,s=f)}if(s>=0)return s;throw new F}}$e.MAX_AVG_VARIANCE=.48,$e.MAX_INDIVIDUAL_VARIANCE=.7,$e.START_END_PATTERN=Int32Array.from([1,1,1]),$e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),$e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),$e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class pr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),s=r.toString(),a=pr.parseExtensionString(s),f=[new B((n[0]+n[1])/2,e),new B(i,e)],u=new Ct(s,null,0,f,ae.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&u.putAllMetadata(a),u}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],a=0;for(let u=0;u<5&&s<i;u++){let x=$e.decodeDigit(e,r,s,$e.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+x%10);for(let A of r)s+=A;x>=10&&(a|=1<<4-u),u!==4&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(n.length!==5)throw new F;let f=this.determineCheckDigit(a);if(pr.extensionChecksum(n.toString())!==f)throw new F;return s}static extensionChecksum(e){let t=e.length,n=0;for(let r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);n*=3;for(let r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);return n*=3,n%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new F}static parseExtensionString(e){if(e.length!==5)return null;let t=pr.parseExtension5String(e);return t==null?null:new Map([[ct.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}let n=parseInt(e.substring(1)),r=(n/100).toString(),i=n%100,s=i<10?"0"+i:i.toString();return t+r+"."+s}}class Ii{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),s=r.toString(),a=Ii.parseExtensionString(s),f=[new B((n[0]+n[1])/2,e),new B(i,e)],u=new Ct(s,null,0,f,ae.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&u.putAllMetadata(a),u}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],a=0;for(let f=0;f<2&&s<i;f++){let u=$e.decodeDigit(e,r,s,$e.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+u%10);for(let x of r)s+=x;u>=10&&(a|=1<<1-f),f!==1&&(s=e.getNextSet(s),s=e.getNextUnset(s))}if(n.length!==2)throw new F;if(parseInt(n.toString())%4!==a)throw new F;return s}static parseExtensionString(e){return e.length!==2?null:new Map([[ct.ISSUE_NUMBER,parseInt(e)]])}}class Bs{static decodeRow(e,t,n){let r=$e.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new pr().decodeRow(e,t,r)}catch{return new Ii().decodeRow(e,t,r)}}}Bs.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ue extends $e{constructor(){super(),this.decodeRowStringBuffer="",Ue.L_AND_G_PATTERNS=Ue.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=Ue.L_PATTERNS[e-10],n=new Int32Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[t.length-r-1];Ue.L_AND_G_PATTERNS[e]=n}}decodeRow(e,t,n){let r=Ue.findStartGuardPattern(t),i=n==null?null:n.get(Re.NEED_RESULT_POINT_CALLBACK);if(i!=null){const X=new B((r[0]+r[1])/2,e);i.foundPossibleResultPoint(X)}let s=this.decodeMiddle(t,r,this.decodeRowStringBuffer),a=s.rowOffset,f=s.resultString;if(i!=null){const X=new B(a,e);i.foundPossibleResultPoint(X)}let u=this.decodeEnd(t,a);if(i!=null){const X=new B((u[0]+u[1])/2,e);i.foundPossibleResultPoint(X)}let x=u[1],A=x+(x-u[0]);if(A>=t.getSize()||!t.isRange(x,A,!1))throw new F;let E=f.toString();if(E.length<8)throw new j;if(!Ue.checkChecksum(E))throw new ee;let I=(r[1]+r[0])/2,T=(u[1]+u[0])/2,O=this.getBarcodeFormat(),D=[new B(I,e),new B(T,e)],P=new Ct(E,null,0,D,O,new Date().getTime()),Z=0;try{let X=Bs.decodeRow(e,t,u[1]);P.putMetadata(ct.UPC_EAN_EXTENSION,X.getText()),P.putAllMetadata(X.getResultMetadata()),P.addResultPoints(X.getResultPoints()),Z=X.getText().length}catch{}let K=n==null?null:n.get(Re.ALLOWED_EAN_EXTENSIONS);if(K!=null){let X=!1;for(let Ne in K)if(Z.toString()===Ne){X=!0;break}if(!X)throw new F}return P}decodeEnd(e,t){return Ue.findGuardPattern(e,t,!1,Ue.START_END_PATTERN,new Int32Array(Ue.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return Ue.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let n=parseInt(e.charAt(t-1),10);return Ue.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(i<0||i>9)throw new j;n+=i}n*=3;for(let r=t-2;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-"0".charCodeAt(0);if(i<0||i>9)throw new j;n+=i}return(1e3-n)%10}}class Ln extends Ue{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1],a=0;for(let u=0;u<6&&s<i;u++){let x=Ue.decodeDigit(e,r,s,Ue.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+x%10);for(let A of r)s+=A;x>=10&&(a|=1<<5-u)}n=Ln.determineFirstDigit(n,a),s=Ue.findGuardPattern(e,s,!0,Ue.MIDDLE_PATTERN,new Int32Array(Ue.MIDDLE_PATTERN.length).fill(0))[1];for(let u=0;u<6&&s<i;u++){let x=Ue.decodeDigit(e,r,s,Ue.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+x);for(let A of r)s+=A}return{rowOffset:s,resultString:n}}getBarcodeFormat(){return ae.EAN_13}static determineFirstDigit(e,t){for(let n=0;n<10;n++)if(t===this.FIRST_DIGIT_ENCODINGS[n])return e=String.fromCharCode("0".charCodeAt(0)+n)+e,e;throw new F}}Ln.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class vs extends Ue{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s=t[1];for(let f=0;f<4&&s<i;f++){let u=Ue.decodeDigit(e,r,s,Ue.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+u);for(let x of r)s+=x}s=Ue.findGuardPattern(e,s,!0,Ue.MIDDLE_PATTERN,new Int32Array(Ue.MIDDLE_PATTERN.length).fill(0))[1];for(let f=0;f<4&&s<i;f++){let u=Ue.decodeDigit(e,r,s,Ue.L_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+u);for(let x of r)s+=x}return{rowOffset:s,resultString:n}}getBarcodeFormat(){return ae.EAN_8}}class Ps extends Ue{constructor(){super(...arguments),this.ean13Reader=new Ln}getBarcodeFormat(){return ae.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))}decodeMiddle(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)}maybeReturnResult(e){let t=e.getText();if(t.charAt(0)==="0"){let n=new Ct(t.substring(1),null,null,e.getResultPoints(),ae.UPC_A);return e.getResultMetadata()!=null&&n.putAllMetadata(e.getResultMetadata()),n}else throw new F}reset(){this.ean13Reader.reset()}}class Qt extends Ue{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,n){const r=this.decodeMiddleCounters.map(u=>u);r[0]=0,r[1]=0,r[2]=0,r[3]=0;const i=e.getSize();let s=t[1],a=0;for(let u=0;u<6&&s<i;u++){const x=Qt.decodeDigit(e,r,s,Qt.L_AND_G_PATTERNS);n+=String.fromCharCode("0".charCodeAt(0)+x%10);for(let A of r)s+=A;x>=10&&(a|=1<<5-u)}let f=Qt.determineNumSysAndCheckDigit(n,a);return{rowOffset:s,resultString:f}}decodeEnd(e,t){return Qt.findGuardPatternWithoutCounters(e,t,!0,Qt.MIDDLE_END_PATTERN)}checkChecksum(e){return Ue.checkChecksum(Qt.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let n=0;n<=1;n++)for(let r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r]){let i=String.fromCharCode("0".charCodeAt(0)+n),s=String.fromCharCode("0".charCodeAt(0)+r);return i+e+s}throw F.getNotFoundInstance()}getBarcodeFormat(){return ae.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map(i=>i.charCodeAt(0)),n=new Ie;n.append(e.charAt(0));let r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r);break}return e.length>=8&&n.append(e.charAt(7)),n.toString()}}Qt.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Qt.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class yi extends qe{constructor(e){super();let t=e==null?null:e.get(Re.POSSIBLE_FORMATS),n=[];d(t)?(n.push(new Ln),n.push(new Ps),n.push(new vs),n.push(new Qt)):(t.indexOf(ae.EAN_13)>-1&&n.push(new Ln),t.indexOf(ae.UPC_A)>-1&&n.push(new Ps),t.indexOf(ae.EAN_8)>-1&&n.push(new vs),t.indexOf(ae.UPC_E)>-1&&n.push(new Qt)),this.readers=n}decodeRow(e,t,n){for(let r of this.readers)try{const i=r.decodeRow(e,t,n),s=i.getBarcodeFormat()===ae.EAN_13&&i.getText().charAt(0)==="0",a=n==null?null:n.get(Re.POSSIBLE_FORMATS),f=a==null||a.includes(ae.UPC_A);if(s&&f){const u=i.getRawBytes(),x=new Ct(i.getText().substring(1),u,u?u.length:null,i.getResultPoints(),ae.UPC_A);return x.putAllMetadata(i.getResultMetadata()),x}return i}catch{}throw new F}reset(){for(let e of this.readers)e.reset()}}class yt extends qe{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let n=0;n<t.length;n++)if(qe.patternMatchVariance(e,t[n],yt.MAX_INDIVIDUAL_VARIANCE)<yt.MAX_AVG_VARIANCE)return n;throw new F}static count(e){return k.sum(new Int32Array(e))}static increment(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]>r&&(r=t[i],n=i);e[n]++}static decrement(e,t){let n=0,r=t[0];for(let i=1;i<e.length;i++)t[i]<r&&(r=t[i],n=i);e[n]--}static isFinderPattern(e){let t=e[0]+e[1],n=t+e[2]+e[3],r=t/n;if(r>=yt.MIN_FINDER_PATTERN_RATIO&&r<=yt.MAX_FINDER_PATTERN_RATIO){let i=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;for(let a of e)a>s&&(s=a),a<i&&(i=a);return s<10*i}return!1}}yt.MAX_AVG_VARIANCE=.2,yt.MAX_INDIVIDUAL_VARIANCE=.45,yt.MIN_FINDER_PATTERN_RATIO=9.5/12,yt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Qn{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Qn))return!1;const t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Vr{constructor(e,t,n,r,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new B(n,i)),this.resultPoints.push(new B(r,i))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Vr))return!1;const t=e;return this.value===t.value}hashCode(){return this.value}}class an{constructor(){}static getRSSvalue(e,t,n){let r=0;for(let f of e)r+=f;let i=0,s=0,a=e.length;for(let f=0;f<a-1;f++){let u;for(u=1,s|=1<<f;u<e[f];u++,s&=~(1<<f)){let x=an.combins(r-u-1,a-f-2);if(n&&s===0&&r-u-(a-f-1)>=a-f-1&&(x-=an.combins(r-u-(a-f),a-f-2)),a-f-1>1){let A=0;for(let E=r-u-(a-f-2);E>t;E--)A+=an.combins(r-u-E-1,a-f-3);x-=A*(a-1-f)}else r-u>t&&x--;i+=x}r-=u}return i}static combins(e,t){let n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);let i=1,s=1;for(let a=e;a>n;a--)i*=a,s<=r&&(i/=s,s++);for(;s<=r;)i/=s,s++;return i}}class Fa{static buildBitArray(e){let t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);let n=12*t,r=new ue(n),i=0,a=e[0].getRightChar().getValue();for(let f=11;f>=0;--f)a&1<<f&&r.set(i),i++;for(let f=1;f<e.length;++f){let u=e[f],x=u.getLeftChar().getValue();for(let A=11;A>=0;--A)x&1<<A&&r.set(i),i++;if(u.getRightChar()!=null){let A=u.getRightChar().getValue();for(let E=11;E>=0;--E)A&1<<E&&r.set(i),i++}}return r}}class Fn{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class _i{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class Mt extends _i{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===Mt.FNC1}}Mt.FNC1="$";class kn extends _i{constructor(e,t,n){super(e),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Gt extends _i{constructor(e,t,n){if(super(e),t<0||t>10||n<0||n>10)throw new j;this.firstDigit=t,this.secondDigit=n}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Gt.FNC1}isSecondDigitFNC1(){return this.secondDigit===Gt.FNC1}isAnyFNC1(){return this.firstDigit===Gt.FNC1||this.secondDigit===Gt.FNC1}}Gt.FNC1=10;class te{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new F;let t=e.substring(0,2);for(let i of te.TWO_DIGIT_DATA_LENGTH)if(i[0]===t)return i[1]===te.VARIABLE_LENGTH?te.processVariableAI(2,i[2],e):te.processFixedAI(2,i[1],e);if(e.length<3)throw new F;let n=e.substring(0,3);for(let i of te.THREE_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===te.VARIABLE_LENGTH?te.processVariableAI(3,i[2],e):te.processFixedAI(3,i[1],e);for(let i of te.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===te.VARIABLE_LENGTH?te.processVariableAI(4,i[2],e):te.processFixedAI(4,i[1],e);if(e.length<4)throw new F;let r=e.substring(0,4);for(let i of te.FOUR_DIGIT_DATA_LENGTH)if(i[0]===r)return i[1]===te.VARIABLE_LENGTH?te.processVariableAI(4,i[2],e):te.processFixedAI(4,i[1],e);throw new F}static processFixedAI(e,t,n){if(n.length<e)throw new F;let r=n.substring(0,e);if(n.length<e+t)throw new F;let i=n.substring(e,e+t),s=n.substring(e+t),a="("+r+")"+i,f=te.parseFieldsInGeneralPurpose(s);return f==null?a:a+f}static processVariableAI(e,t,n){let r=n.substring(0,e),i;n.length<e+t?i=n.length:i=e+t;let s=n.substring(e,i),a=n.substring(i),f="("+r+")"+s,u=te.parseFieldsInGeneralPurpose(a);return u==null?f:f+u}}te.VARIABLE_LENGTH=[],te.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",te.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",te.VARIABLE_LENGTH,20],["22",te.VARIABLE_LENGTH,29],["30",te.VARIABLE_LENGTH,8],["37",te.VARIABLE_LENGTH,8],["90",te.VARIABLE_LENGTH,30],["91",te.VARIABLE_LENGTH,30],["92",te.VARIABLE_LENGTH,30],["93",te.VARIABLE_LENGTH,30],["94",te.VARIABLE_LENGTH,30],["95",te.VARIABLE_LENGTH,30],["96",te.VARIABLE_LENGTH,30],["97",te.VARIABLE_LENGTH,3],["98",te.VARIABLE_LENGTH,30],["99",te.VARIABLE_LENGTH,30]],te.THREE_DIGIT_DATA_LENGTH=[["240",te.VARIABLE_LENGTH,30],["241",te.VARIABLE_LENGTH,30],["242",te.VARIABLE_LENGTH,6],["250",te.VARIABLE_LENGTH,30],["251",te.VARIABLE_LENGTH,30],["253",te.VARIABLE_LENGTH,17],["254",te.VARIABLE_LENGTH,20],["400",te.VARIABLE_LENGTH,30],["401",te.VARIABLE_LENGTH,30],["402",17],["403",te.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",te.VARIABLE_LENGTH,20],["421",te.VARIABLE_LENGTH,15],["422",3],["423",te.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],te.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",te.VARIABLE_LENGTH,15],["391",te.VARIABLE_LENGTH,18],["392",te.VARIABLE_LENGTH,15],["393",te.VARIABLE_LENGTH,18],["703",te.VARIABLE_LENGTH,30]],te.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",te.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",te.VARIABLE_LENGTH,20],["8003",te.VARIABLE_LENGTH,30],["8004",te.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",te.VARIABLE_LENGTH,30],["8008",te.VARIABLE_LENGTH,12],["8018",18],["8020",te.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",te.VARIABLE_LENGTH,70],["8200",te.VARIABLE_LENGTH,70]];class Jn{constructor(e){this.buffer=new Ie,this.information=e}decodeAllCodes(e,t){let n=t,r=null;do{let i=this.decodeGeneralPurposeField(n,r),s=te.parseFieldsInGeneralPurpose(i.getNewString());if(s!=null&&e.append(s),i.isRemaining()?r=""+i.getRemainingValue():r=null,n===i.getNewPosition())break;n=i.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let i=this.extractNumericValueFromBitArray(e,4);return i===0?new Gt(this.information.getSize(),Gt.FNC1,Gt.FNC1):new Gt(this.information.getSize(),i-1,Gt.FNC1)}let t=this.extractNumericValueFromBitArray(e,7),n=(t-8)/11,r=(t-8)%11;return new Gt(e+7,n,r)}extractNumericValueFromBitArray(e,t){return Jn.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,n){let r=0;for(let i=0;i<n;++i)e.get(t+i)&&(r|=1<<n-i-1);return r}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);let n=this.parseBlocks();return n!=null&&n.isRemaining()?new kn(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new kn(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let n=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),!(n!==this.current.getPosition())&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return e.isSecondDigitFNC1()?t=new kn(this.current.getPosition(),this.buffer.toString()):t=new kn(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Fn(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let t=new kn(this.current.getPosition(),this.buffer.toString());return new Fn(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Fn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new kn(this.current.getPosition(),this.buffer.toString());return new Fn(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Fn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new kn(this.current.getPosition(),this.buffer.toString());return new Fn(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Fn(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Mt(e+5,Mt.FNC1);if(t>=5&&t<15)return new Mt(e+5,"0"+(t-5));let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new Mt(e+7,""+(n+1));if(n>=90&&n<116)return new Mt(e+7,""+(n+7));let r=this.extractNumericValueFromBitArray(e,8),i;switch(r){case 232:i="!";break;case 233:i='"';break;case 234:i="%";break;case 235:i="&";break;case 236:i="'";break;case 237:i="(";break;case 238:i=")";break;case 239:i="*";break;case 240:i="+";break;case 241:i=",";break;case 242:i="-";break;case 243:i=".";break;case 244:i="/";break;case 245:i=":";break;case 246:i=";";break;case 247:i="<";break;case 248:i="=";break;case 249:i=">";break;case 250:i="?";break;case 251:i="_";break;case 252:i=" ";break;default:throw new j}return new Mt(e+8,i)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Mt(e+5,Mt.FNC1);if(t>=5&&t<15)return new Mt(e+5,"0"+(t-5));let n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new Mt(e+6,""+(n+33));let r;switch(n){case 58:r="*";break;case 59:r=",";break;case 60:r="-";break;case 61:r=".";break;case 62:r="/";break;default:throw new U("Decoding invalid alphanumeric value: "+n)}return new Mt(e+6,r)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class Ti{constructor(e){this.information=e,this.generalDecoder=new Jn(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Bt extends Ti{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,n)}encodeCompressedGtinWithoutAI(e,t,n){for(let r=0;r<4;++r){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*r,10);i/100===0&&e.append("0"),i/10===0&&e.append("0"),e.append(i)}Bt.appendCheckDigit(e,n)}static appendCheckDigit(e,t){let n=0;for(let r=0;r<13;r++){let i=e.charAt(r+t).charCodeAt(0)-"0".charCodeAt(0);n+=r&1?i:3*i}n=10-n%10,n===10&&(n=0),e.append(n)}}Bt.GTIN_SIZE=40;class $n extends Bt{constructor(e){super(e)}parseInformation(){let e=new Ie;e.append("(01)");let t=e.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray($n.HEADER_SIZE,4);return e.append(n),this.encodeCompressedGtinWithoutAI(e,$n.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,$n.HEADER_SIZE+44)}}$n.HEADER_SIZE=1+1+2;class Hr extends Ti{constructor(e){super(e)}parseInformation(){let e=new Ie;return this.getGeneralDecoder().decodeAllCodes(e,Hr.HEADER_SIZE)}}Hr.HEADER_SIZE=2+1+2;class Wr extends Bt{constructor(e){super(e)}encodeCompressedWeight(e,t,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);let i=this.checkWeight(r),s=1e5;for(let a=0;a<5;++a)i/s===0&&e.append("0"),s/=10;e.append(i)}}class ln extends Wr{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=ln.HEADER_SIZE+Wr.GTIN_SIZE+ln.WEIGHT_SIZE)throw new F;let e=new Ie;return this.encodeCompressedGtin(e,ln.HEADER_SIZE),this.encodeCompressedWeight(e,ln.HEADER_SIZE+Wr.GTIN_SIZE,ln.WEIGHT_SIZE),e.toString()}}ln.HEADER_SIZE=4+1,ln.WEIGHT_SIZE=15;class ka extends ln{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class Ua extends ln{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class cn extends Bt{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<cn.HEADER_SIZE+Bt.GTIN_SIZE)throw new F;let e=new Ie;this.encodeCompressedGtin(e,cn.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(cn.HEADER_SIZE+Bt.GTIN_SIZE,cn.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let n=this.getGeneralDecoder().decodeGeneralPurposeField(cn.HEADER_SIZE+Bt.GTIN_SIZE+cn.LAST_DIGIT_SIZE,null);return e.append(n.getNewString()),e.toString()}}cn.HEADER_SIZE=5+1+2,cn.LAST_DIGIT_SIZE=2;class Ot extends Bt{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Ot.HEADER_SIZE+Bt.GTIN_SIZE)throw new F;let e=new Ie;this.encodeCompressedGtin(e,Ot.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(Ot.HEADER_SIZE+Bt.GTIN_SIZE,Ot.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let n=this.getGeneralDecoder().extractNumericValueFromBitArray(Ot.HEADER_SIZE+Bt.GTIN_SIZE+Ot.LAST_DIGIT_SIZE,Ot.FIRST_THREE_DIGITS_SIZE);n/100==0&&e.append("0"),n/10==0&&e.append("0"),e.append(n);let r=this.getGeneralDecoder().decodeGeneralPurposeField(Ot.HEADER_SIZE+Bt.GTIN_SIZE+Ot.LAST_DIGIT_SIZE+Ot.FIRST_THREE_DIGITS_SIZE,null);return e.append(r.getNewString()),e.toString()}}Ot.HEADER_SIZE=5+1+2,Ot.LAST_DIGIT_SIZE=2,Ot.FIRST_THREE_DIGITS_SIZE=10;class nt extends Wr{constructor(e,t,n){super(e),this.dateCode=n,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=nt.HEADER_SIZE+nt.GTIN_SIZE+nt.WEIGHT_SIZE+nt.DATE_SIZE)throw new F;let e=new Ie;return this.encodeCompressedGtin(e,nt.HEADER_SIZE),this.encodeCompressedWeight(e,nt.HEADER_SIZE+nt.GTIN_SIZE,nt.WEIGHT_SIZE),this.encodeCompressedDate(e,nt.HEADER_SIZE+nt.GTIN_SIZE+nt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,nt.DATE_SIZE);if(n==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let r=n%32;n/=32;let i=n%12+1;n/=12;let s=n;s/10==0&&e.append("0"),e.append(s),i/10==0&&e.append("0"),e.append(i),r/10==0&&e.append("0"),e.append(r)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}nt.HEADER_SIZE=7+1,nt.WEIGHT_SIZE=20,nt.DATE_SIZE=16;function Ls(w){try{if(w.get(1))return new $n(w);if(!w.get(2))return new Hr(w);switch(Jn.extractNumericValueFromBitArray(w,1,4)){case 4:return new ka(w);case 5:return new Ua(w)}switch(Jn.extractNumericValueFromBitArray(w,1,5)){case 12:return new cn(w);case 13:return new Ot(w)}switch(Jn.extractNumericValueFromBitArray(w,1,7)){case 56:return new nt(w,"310","11");case 57:return new nt(w,"320","11");case 58:return new nt(w,"310","13");case 59:return new nt(w,"320","13");case 60:return new nt(w,"310","15");case 61:return new nt(w,"320","15");case 62:return new nt(w,"310","17");case 63:return new nt(w,"320","17")}}catch(e){throw console.log(e),new U("unknown decoder: "+w)}}class In{constructor(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof In?In.equalsOrNull(e.leftchar,t.leftchar)&&In.equalsOrNull(e.rightchar,t.rightchar)&&In.equalsOrNull(e.finderpattern,t.finderpattern):!1}static equalsOrNull(e,t){return e===null?t===null:In.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Si{constructor(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof Si?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1}checkEqualitity(e,t){if(!e||!t)return;let n;return e.forEach((r,i)=>{t.forEach(s=>{r.getLeftChar().getValue()===s.getLeftChar().getValue()&&r.getRightChar().getValue()===s.getRightChar().getValue()&&r.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(n=!0)})}),n}}class H extends yt{constructor(e){super(...arguments),this.pairs=new Array(H.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,t,n){this.pairs.length=0,this.startFromEven=!1;try{return H.constructResult(this.decodeRow2pairs(e,t))}catch(r){this.verbose&&console.log(r)}return this.pairs.length=0,this.startFromEven=!0,H.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let n=!1;for(;!n;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(i){if(i instanceof F){if(!this.pairs.length)throw new F;n=!0}}if(this.checkChecksum())return this.pairs;let r;if(this.rows.length?r=!0:r=!1,this.storeRow(e,!1),r){let i=this.checkRowsBoolean(!1);if(i!=null||(i=this.checkRowsBoolean(!0),i!=null))return i}throw new F}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let n=t;n<this.rows.length;n++){let r=this.rows[n];this.pairs.length=0;for(let s of e)this.pairs.push(s.getPairs());if(this.pairs.push(r.getPairs()),!H.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let i=new Array(e);i.push(r);try{return this.checkRows(i,n+1)}catch(s){this.verbose&&console.log(s)}}throw new F}static isValidSequence(e){for(let t of H.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let n=!0;for(let r=0;r<e.length;r++)if(e[r].getFinderPattern().getValue()!=t[r]){n=!1;break}if(n)return!0}return!1}storeRow(e,t){let n=0,r=!1,i=!1;for(;n<this.rows.length;){let s=this.rows[n];if(s.getRowNumber()>e){i=s.isEquivalent(this.pairs);break}r=s.isEquivalent(this.pairs),n++}i||r||H.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new Si(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let n of t)if(n.getPairs().length!==e.length){for(let r of n.getPairs())for(let i of e)if(In.equals(r,i))break}}static isPartialRow(e,t){for(let n of t){let r=!0;for(let i of e){let s=!1;for(let a of n.getPairs())if(i.equals(a)){s=!0;break}if(!s){r=!1;break}}if(r)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=Fa.buildBitArray(e),r=Ls(t).parseInformation(),i=e[0].getFinderPattern().getResultPoints(),s=e[e.length-1].getFinderPattern().getResultPoints(),a=[i[0],i[1],s[0],s[1]];return new Ct(r,null,null,a,ae.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(n==null)return!1;let r=n.getChecksumPortion(),i=2;for(let a=1;a<this.pairs.size();++a){let f=this.pairs.get(a);r+=f.getLeftChar().getChecksumPortion(),i++;let u=f.getRightChar();u!=null&&(r+=u.getChecksumPortion(),i++)}return r%=211,211*(i-4)+r==t.getValue()}static getNextSecondBar(e,t){let n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n}retrieveNextPair(e,t,n){let r=t.length%2==0;this.startFromEven&&(r=!r);let i,s=!0,a=-1;do this.findNextPair(e,t,a),i=this.parseFoundFinderPattern(e,n,r),i==null?a=H.getNextSecondBar(e,this.startEnd[0]):s=!1;while(s);let f=this.decodeDataCharacter(e,i,r,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new F;let u;try{u=this.decodeDataCharacter(e,i,r,!1)}catch(x){u=null,this.verbose&&console.log(x)}return new In(f,u,i,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,t,n){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),s;n>=0?s=n:this.isEmptyPair(t)?s=0:s=t[t.length-1].getFinderPattern().getStartEnd()[1];let a=t.length%2!=0;this.startFromEven&&(a=!a);let f=!1;for(;s<i&&(f=!e.get(s),!!f);)s++;let u=0,x=s;for(let A=s;A<i;A++)if(e.get(A)!=f)r[u]++;else{if(u==3){if(a&&H.reverseCounters(r),H.isFinderPattern(r)){this.startEnd[0]=x,this.startEnd[1]=A;return}a&&H.reverseCounters(r),x+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,u--}else u++;r[u]=1,f=!f}throw new F}static reverseCounters(e){let t=e.length;for(let n=0;n<t/2;++n){let r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}}parseFoundFinderPattern(e,t,n){let r,i,s;if(n){let u=this.startEnd[0]-1;for(;u>=0&&!e.get(u);)u--;u++,r=this.startEnd[0]-u,i=u,s=this.startEnd[1]}else i=this.startEnd[0],s=e.getNextUnset(this.startEnd[1]+1),r=s-this.startEnd[1];let a=this.getDecodeFinderCounters();J.arraycopy(a,0,a,1,a.length-1),a[0]=r;let f;try{f=this.parseFinderValue(a,H.FINDER_PATTERNS)}catch{return null}return new Vr(f,[i,s],i,s,t)}decodeDataCharacter(e,t,n,r){let i=this.getDataCharacterCounters();for(let je=0;je<i.length;je++)i[je]=0;if(r)H.recordPatternInReverse(e,t.getStartEnd()[0],i);else{H.recordPattern(e,t.getStartEnd()[1],i);for(let je=0,bt=i.length-1;je<bt;je++,bt--){let Vt=i[je];i[je]=i[bt],i[bt]=Vt}}let s=17,a=k.sum(new Int32Array(i))/s,f=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(a-f)/f>.3)throw new F;let u=this.getOddCounts(),x=this.getEvenCounts(),A=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let je=0;je<i.length;je++){let bt=1*i[je]/a,Vt=bt+.5;if(Vt<1){if(bt<.3)throw new F;Vt=1}else if(Vt>8){if(bt>8.7)throw new F;Vt=8}let ir=je/2;je&1?(x[ir]=Vt,E[ir]=bt-Vt):(u[ir]=Vt,A[ir]=bt-Vt)}this.adjustOddEvenCounts(s);let I=4*t.getValue()+(n?0:2)+(r?0:1)-1,T=0,O=0;for(let je=u.length-1;je>=0;je--){if(H.isNotA1left(t,n,r)){let bt=H.WEIGHTS[I][2*je];O+=u[je]*bt}T+=u[je]}let D=0;for(let je=x.length-1;je>=0;je--)if(H.isNotA1left(t,n,r)){let bt=H.WEIGHTS[I][2*je+1];D+=x[je]*bt}let P=O+D;if(T&1||T>13||T<4)throw new F;let Z=(13-T)/2,K=H.SYMBOL_WIDEST[Z],X=9-K,Ne=an.getRSSvalue(u,K,!0),pe=an.getRSSvalue(x,X,!1),Pt=H.EVEN_TOTAL_SUBSET[Z],Jt=H.GSUM[Z],Lt=Ne*Pt+pe+Jt;return new Qn(Lt,P)}static isNotA1left(e,t,n){return!(e.getValue()==0&&t&&n)}adjustOddEvenCounts(e){let t=k.sum(new Int32Array(this.getOddCounts())),n=k.sum(new Int32Array(this.getEvenCounts())),r=!1,i=!1;t>13?i=!0:t<4&&(r=!0);let s=!1,a=!1;n>13?a=!0:n<4&&(s=!0);let f=t+n-e,u=(t&1)==1,x=(n&1)==0;if(f==1)if(u){if(x)throw new F;i=!0}else{if(!x)throw new F;a=!0}else if(f==-1)if(u){if(x)throw new F;r=!0}else{if(!x)throw new F;s=!0}else if(f==0){if(u){if(!x)throw new F;t<n?(r=!0,a=!0):(i=!0,s=!0)}else if(x)throw new F}else throw new F;if(r){if(i)throw new F;H.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&H.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(a)throw new F;H.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&H.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}H.SYMBOL_WIDEST=[7,5,4,3,1],H.EVEN_TOTAL_SUBSET=[4,20,52,104,204],H.GSUM=[0,348,1388,2948,3988],H.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],H.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],H.FINDER_PAT_A=0,H.FINDER_PAT_B=1,H.FINDER_PAT_C=2,H.FINDER_PAT_D=3,H.FINDER_PAT_E=4,H.FINDER_PAT_F=5,H.FINDER_PATTERN_SEQUENCES=[[H.FINDER_PAT_A,H.FINDER_PAT_A],[H.FINDER_PAT_A,H.FINDER_PAT_B,H.FINDER_PAT_B],[H.FINDER_PAT_A,H.FINDER_PAT_C,H.FINDER_PAT_B,H.FINDER_PAT_D],[H.FINDER_PAT_A,H.FINDER_PAT_E,H.FINDER_PAT_B,H.FINDER_PAT_D,H.FINDER_PAT_C],[H.FINDER_PAT_A,H.FINDER_PAT_E,H.FINDER_PAT_B,H.FINDER_PAT_D,H.FINDER_PAT_D,H.FINDER_PAT_F],[H.FINDER_PAT_A,H.FINDER_PAT_E,H.FINDER_PAT_B,H.FINDER_PAT_D,H.FINDER_PAT_E,H.FINDER_PAT_F,H.FINDER_PAT_F],[H.FINDER_PAT_A,H.FINDER_PAT_A,H.FINDER_PAT_B,H.FINDER_PAT_B,H.FINDER_PAT_C,H.FINDER_PAT_C,H.FINDER_PAT_D,H.FINDER_PAT_D],[H.FINDER_PAT_A,H.FINDER_PAT_A,H.FINDER_PAT_B,H.FINDER_PAT_B,H.FINDER_PAT_C,H.FINDER_PAT_C,H.FINDER_PAT_D,H.FINDER_PAT_E,H.FINDER_PAT_E],[H.FINDER_PAT_A,H.FINDER_PAT_A,H.FINDER_PAT_B,H.FINDER_PAT_B,H.FINDER_PAT_C,H.FINDER_PAT_C,H.FINDER_PAT_D,H.FINDER_PAT_E,H.FINDER_PAT_F,H.FINDER_PAT_F],[H.FINDER_PAT_A,H.FINDER_PAT_A,H.FINDER_PAT_B,H.FINDER_PAT_B,H.FINDER_PAT_C,H.FINDER_PAT_D,H.FINDER_PAT_D,H.FINDER_PAT_E,H.FINDER_PAT_E,H.FINDER_PAT_F,H.FINDER_PAT_F]],H.MAX_PAIRS=11;class Va extends Qn{constructor(e,t,n){super(e,t),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class st extends yt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,n){const r=this.decodePair(t,!1,e,n);st.addOrTally(this.possibleLeftPairs,r),t.reverse();let i=this.decodePair(t,!0,e,n);st.addOrTally(this.possibleRightPairs,i),t.reverse();for(let s of this.possibleLeftPairs)if(s.getCount()>1){for(let a of this.possibleRightPairs)if(a.getCount()>1&&st.checkChecksum(s,a))return st.constructResult(s,a)}throw new F}static addOrTally(e,t){if(t==null)return;let n=!1;for(let r of e)if(r.getValue()===t.getValue()){r.incrementCount(),n=!0;break}n||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),i=new Ie;for(let u=13-r.length;u>0;u--)i.append("0");i.append(r);let s=0;for(let u=0;u<13;u++){let x=i.charAt(u).charCodeAt(0)-"0".charCodeAt(0);s+=u&1?x:3*x}s=10-s%10,s===10&&(s=0),i.append(s.toString());let a=e.getFinderPattern().getResultPoints(),f=t.getFinderPattern().getResultPoints();return new Ct(i.toString(),null,0,[a[0],a[1],f[0],f[1]],ae.RSS_14,new Date().getTime())}static checkChecksum(e,t){let n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r}decodePair(e,t,n,r){try{let i=this.findFinderPattern(e,t),s=this.parseFoundFinderPattern(e,n,t,i),a=r==null?null:r.get(Re.NEED_RESULT_POINT_CALLBACK);if(a!=null){let x=(i[0]+i[1])/2;t&&(x=e.getSize()-1-x),a.foundPossibleResultPoint(new B(x,n))}let f=this.decodeDataCharacter(e,s,!0),u=this.decodeDataCharacter(e,s,!1);return new Va(1597*f.getValue()+u.getValue(),f.getChecksumPortion()+4*u.getChecksumPortion(),s)}catch{return null}}decodeDataCharacter(e,t,n){let r=this.getDataCharacterCounters();for(let D=0;D<r.length;D++)r[D]=0;if(n)qe.recordPatternInReverse(e,t.getStartEnd()[0],r);else{qe.recordPattern(e,t.getStartEnd()[1]+1,r);for(let D=0,P=r.length-1;D<P;D++,P--){let Z=r[D];r[D]=r[P],r[P]=Z}}let i=n?16:15,s=k.sum(new Int32Array(r))/i,a=this.getOddCounts(),f=this.getEvenCounts(),u=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors();for(let D=0;D<r.length;D++){let P=r[D]/s,Z=Math.floor(P+.5);Z<1?Z=1:Z>8&&(Z=8);let K=Math.floor(D/2);D&1?(f[K]=Z,x[K]=P-Z):(a[K]=Z,u[K]=P-Z)}this.adjustOddEvenCounts(n,i);let A=0,E=0;for(let D=a.length-1;D>=0;D--)E*=9,E+=a[D],A+=a[D];let I=0,T=0;for(let D=f.length-1;D>=0;D--)I*=9,I+=f[D],T+=f[D];let O=E+3*I;if(n){if(A&1||A>12||A<4)throw new F;let D=(12-A)/2,P=st.OUTSIDE_ODD_WIDEST[D],Z=9-P,K=an.getRSSvalue(a,P,!1),X=an.getRSSvalue(f,Z,!0),Ne=st.OUTSIDE_EVEN_TOTAL_SUBSET[D],pe=st.OUTSIDE_GSUM[D];return new Qn(K*Ne+X+pe,O)}else{if(T&1||T>10||T<4)throw new F;let D=(10-T)/2,P=st.INSIDE_ODD_WIDEST[D],Z=9-P,K=an.getRSSvalue(a,P,!0),X=an.getRSSvalue(f,Z,!1),Ne=st.INSIDE_ODD_TOTAL_SUBSET[D],pe=st.INSIDE_GSUM[D];return new Qn(X*Ne+K+pe,O)}}findFinderPattern(e,t){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let r=e.getSize(),i=!1,s=0;for(;s<r&&(i=!e.get(s),t!==i);)s++;let a=0,f=s;for(let u=s;u<r;u++)if(e.get(u)!==i)n[a]++;else{if(a===3){if(yt.isFinderPattern(n))return[f,u];f+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,a--}else a++;n[a]=1,i=!i}throw new F}parseFoundFinderPattern(e,t,n,r){let i=e.get(r[0]),s=r[0]-1;for(;s>=0&&i!==e.get(s);)s--;s++;const a=r[0]-s,f=this.getDecodeFinderCounters(),u=new Int32Array(f.length);J.arraycopy(f,0,u,1,f.length-1),u[0]=a;const x=this.parseFinderValue(u,st.FINDER_PATTERNS);let A=s,E=r[1];return n&&(A=e.getSize()-1-A,E=e.getSize()-1-E),new Vr(x,[s,r[1]],A,E,t)}adjustOddEvenCounts(e,t){let n=k.sum(new Int32Array(this.getOddCounts())),r=k.sum(new Int32Array(this.getEvenCounts())),i=!1,s=!1,a=!1,f=!1;e?(n>12?s=!0:n<4&&(i=!0),r>12?f=!0:r<4&&(a=!0)):(n>11?s=!0:n<5&&(i=!0),r>10?f=!0:r<4&&(a=!0));let u=n+r-t,x=(n&1)===(e?1:0),A=(r&1)===1;if(u===1)if(x){if(A)throw new F;s=!0}else{if(!A)throw new F;f=!0}else if(u===-1)if(x){if(A)throw new F;i=!0}else{if(!A)throw new F;a=!0}else if(u===0){if(x){if(!A)throw new F;n<r?(i=!0,f=!0):(s=!0,a=!0)}else if(A)throw new F}else throw new F;if(i){if(s)throw new F;yt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&yt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(f)throw new F;yt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&yt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}st.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],st.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],st.OUTSIDE_GSUM=[0,161,961,2015,2715],st.INSIDE_GSUM=[0,336,1036,1516],st.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],st.INSIDE_ODD_WIDEST=[2,4,6,8],st.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class er extends qe{constructor(e,t){super(),this.readers=[],this.verbose=t===!0;const n=e?e.get(Re.POSSIBLE_FORMATS):null,r=e&&e.get(Re.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;n?((n.includes(ae.EAN_13)||n.includes(ae.UPC_A)||n.includes(ae.EAN_8)||n.includes(ae.UPC_E))&&this.readers.push(new yi(e)),n.includes(ae.CODE_39)&&this.readers.push(new Be(r)),n.includes(ae.CODE_128)&&this.readers.push(new Q),n.includes(ae.ITF)&&this.readers.push(new ye),n.includes(ae.RSS_14)&&this.readers.push(new st),n.includes(ae.RSS_EXPANDED)&&this.readers.push(new H(this.verbose))):(this.readers.push(new yi(e)),this.readers.push(new Be),this.readers.push(new yi(e)),this.readers.push(new Q),this.readers.push(new ye),this.readers.push(new st),this.readers.push(new H(this.verbose)))}decodeRow(e,t,n){for(let r=0;r<this.readers.length;r++)try{return this.readers[r].decodeRow(e,t,n)}catch{}throw new F}reset(){this.readers.forEach(e=>e.reset())}}class Ha extends on{constructor(e=500,t){super(new er(t),e,t)}}class He{constructor(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ve{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class De{constructor(e,t,n,r,i,s){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=i,this.ecBlocks=s;let a=0;const f=s.getECCodewords(),u=s.getECBlocks();for(let x of u)a+=x.getCount()*(x.getDataCodewords()+f);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if(e&1||t&1)throw new j;for(let n of De.VERSIONS)if(n.symbolSizeRows===e&&n.symbolSizeColumns===t)return n;throw new j}toString(){return""+this.versionNumber}static buildVersions(){return[new De(1,10,10,8,8,new He(5,new Ve(1,3))),new De(2,12,12,10,10,new He(7,new Ve(1,5))),new De(3,14,14,12,12,new He(10,new Ve(1,8))),new De(4,16,16,14,14,new He(12,new Ve(1,12))),new De(5,18,18,16,16,new He(14,new Ve(1,18))),new De(6,20,20,18,18,new He(18,new Ve(1,22))),new De(7,22,22,20,20,new He(20,new Ve(1,30))),new De(8,24,24,22,22,new He(24,new Ve(1,36))),new De(9,26,26,24,24,new He(28,new Ve(1,44))),new De(10,32,32,14,14,new He(36,new Ve(1,62))),new De(11,36,36,16,16,new He(42,new Ve(1,86))),new De(12,40,40,18,18,new He(48,new Ve(1,114))),new De(13,44,44,20,20,new He(56,new Ve(1,144))),new De(14,48,48,22,22,new He(68,new Ve(1,174))),new De(15,52,52,24,24,new He(42,new Ve(2,102))),new De(16,64,64,14,14,new He(56,new Ve(2,140))),new De(17,72,72,16,16,new He(36,new Ve(4,92))),new De(18,80,80,18,18,new He(48,new Ve(4,114))),new De(19,88,88,20,20,new He(56,new Ve(4,144))),new De(20,96,96,22,22,new He(68,new Ve(4,174))),new De(21,104,104,24,24,new He(56,new Ve(6,136))),new De(22,120,120,18,18,new He(68,new Ve(6,175))),new De(23,132,132,20,20,new He(62,new Ve(8,163))),new De(24,144,144,22,22,new He(62,new Ve(8,156),new Ve(2,155))),new De(25,8,18,6,16,new He(7,new Ve(1,5))),new De(26,8,32,6,14,new He(11,new Ve(1,10))),new De(27,12,26,10,24,new He(14,new Ve(1,16))),new De(28,12,36,10,16,new He(18,new Ve(1,22))),new De(29,16,36,14,16,new He(24,new Ve(1,32))),new De(30,16,48,14,22,new He(28,new Ve(1,49)))]}}De.VERSIONS=De.buildVersions();class Ni{constructor(e){const t=e.getHeight();if(t<8||t>144||t&1)throw new j;this.version=Ni.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new tt(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),n=e.getWidth();return De.getVersionForDimensions(t,n)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,n=4,r=0;const i=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth();let a=!1,f=!1,u=!1,x=!1;do if(n===i&&r===0&&!a)e[t++]=this.readCorner1(i,s)&255,n-=2,r+=2,a=!0;else if(n===i-2&&r===0&&s&3&&!f)e[t++]=this.readCorner2(i,s)&255,n-=2,r+=2,f=!0;else if(n===i+4&&r===2&&!(s&7)&&!u)e[t++]=this.readCorner3(i,s)&255,n-=2,r+=2,u=!0;else if(n===i-2&&r===0&&(s&7)===4&&!x)e[t++]=this.readCorner4(i,s)&255,n-=2,r+=2,x=!0;else{do n<i&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=this.readUtah(n,r,i,s)&255),n-=2,r+=2;while(n>=0&&r<s);n+=1,r+=3;do n>=0&&r<s&&!this.readMappingMatrix.get(r,n)&&(e[t++]=this.readUtah(n,r,i,s)&255),n+=2,r-=2;while(n<i&&r>=0);n+=3,r+=1}while(n<i||r<s);if(t!==this.version.getTotalCodewords())throw new j;return e}readModule(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,n,r){let i=0;return this.readModule(e-2,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-2,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t,n,r)&&(i|=1),i<<=1,this.readModule(e,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e,t,n,r)&&(i|=1),i}readCorner1(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}readCorner2(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner3(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner4(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new R("Dimension of bitMatrix must match the version size");const r=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),s=t/r|0,a=n/i|0,f=s*r,u=a*i,x=new tt(u,f);for(let A=0;A<s;++A){const E=A*r;for(let I=0;I<a;++I){const T=I*i;for(let O=0;O<r;++O){const D=A*(r+2)+1+O,P=E+O;for(let Z=0;Z<i;++Z){const K=I*(i+2)+1+Z;if(e.get(K,D)){const X=T+Z;x.set(X,P)}}}}}return x}}class Oi{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const n=t.getECBlocks();let r=0;const i=n.getECBlocks();for(let O of i)r+=O.getCount();const s=new Array(r);let a=0;for(let O of i)for(let D=0;D<O.getCount();D++){const P=O.getDataCodewords(),Z=n.getECCodewords()+P;s[a++]=new Oi(P,new Uint8Array(Z))}const u=s[0].codewords.length-n.getECCodewords(),x=u-1;let A=0;for(let O=0;O<x;O++)for(let D=0;D<a;D++)s[D].codewords[O]=e[A++];const E=t.getVersionNumber()===24,I=E?8:a;for(let O=0;O<I;O++)s[O].codewords[u-1]=e[A++];const T=s[0].codewords.length;for(let O=u;O<T;O++)for(let D=0;D<a;D++){const P=E?(D+8)%a:D,Z=E&&P>7?O-1:O;s[P].codewords[Z]=e[A++]}if(A!==e.length)throw new R;return s}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ri{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new R(""+e);let t=0,n=this.bitOffset,r=this.byteOffset;const i=this.bytes;if(n>0){const s=8-n,a=e<s?e:s,f=s-a,u=255>>8-a<<f;t=(i[r]&u)>>f,e-=a,n+=a,n===8&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|i[r]&255,r++,e-=8;if(e>0){const s=8-e,a=255>>s<<s;t=t<<e|(i[r]&a)>>s,n+=e}}return this.bitOffset=n,this.byteOffset=r,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var ht;(function(w){w[w.PAD_ENCODE=0]="PAD_ENCODE",w[w.ASCII_ENCODE=1]="ASCII_ENCODE",w[w.C40_ENCODE=2]="C40_ENCODE",w[w.TEXT_ENCODE=3]="TEXT_ENCODE",w[w.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",w[w.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",w[w.BASE256_ENCODE=6]="BASE256_ENCODE"})(ht||(ht={}));class yn{static decode(e){const t=new Ri(e),n=new Ie,r=new Ie,i=new Array;let s=ht.ASCII_ENCODE;do if(s===ht.ASCII_ENCODE)s=this.decodeAsciiSegment(t,n,r);else{switch(s){case ht.C40_ENCODE:this.decodeC40Segment(t,n);break;case ht.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case ht.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case ht.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case ht.BASE256_ENCODE:this.decodeBase256Segment(t,n,i);break;default:throw new j}s=ht.ASCII_ENCODE}while(s!==ht.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new Wt(e,n.toString(),i.length===0?null:i,null)}static decodeAsciiSegment(e,t,n){let r=!1;do{let i=e.readBits(8);if(i===0)throw new j;if(i<=128)return r&&(i+=128),t.append(String.fromCharCode(i-1)),ht.ASCII_ENCODE;if(i===129)return ht.PAD_ENCODE;if(i<=229){const s=i-130;s<10&&t.append("0"),t.append(""+s)}else switch(i){case 230:return ht.C40_ENCODE;case 231:return ht.BASE256_ENCODE;case 232:t.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:r=!0;break;case 236:t.append("[)>05"),n.insert(0,"");break;case 237:t.append("[)>06"),n.insert(0,"");break;case 238:return ht.ANSIX12_ENCODE;case 239:return ht.TEXT_ENCODE;case 240:return ht.EDIFACT_ENCODE;case 241:break;default:if(i!==254||e.available()!==0)throw new j;break}}while(e.available()>0);return ht.ASCII_ENCODE}static decodeC40Segment(e,t){let n=!1;const r=[];let i=0;do{if(e.available()===8)return;const s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),r);for(let a=0;a<3;a++){const f=r[a];switch(i){case 0:if(f<3)i=f+1;else if(f<this.C40_BASIC_SET_CHARS.length){const u=this.C40_BASIC_SET_CHARS[f];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}else throw new j;break;case 1:n?(t.append(String.fromCharCode(f+128)),n=!1):t.append(String.fromCharCode(f)),i=0;break;case 2:if(f<this.C40_SHIFT2_SET_CHARS.length){const u=this.C40_SHIFT2_SET_CHARS[f];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}else switch(f){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new j}i=0;break;case 3:n?(t.append(String.fromCharCode(f+224)),n=!1):t.append(String.fromCharCode(f+96)),i=0;break;default:throw new j}}}while(e.available()>0)}static decodeTextSegment(e,t){let n=!1,r=[],i=0;do{if(e.available()===8)return;const s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),r);for(let a=0;a<3;a++){const f=r[a];switch(i){case 0:if(f<3)i=f+1;else if(f<this.TEXT_BASIC_SET_CHARS.length){const u=this.TEXT_BASIC_SET_CHARS[f];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}else throw new j;break;case 1:n?(t.append(String.fromCharCode(f+128)),n=!1):t.append(String.fromCharCode(f)),i=0;break;case 2:if(f<this.TEXT_SHIFT2_SET_CHARS.length){const u=this.TEXT_SHIFT2_SET_CHARS[f];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u)}else switch(f){case 27:t.append(String.fromCharCode(29));break;case 30:n=!0;break;default:throw new j}i=0;break;case 3:if(f<this.TEXT_SHIFT3_SET_CHARS.length){const u=this.TEXT_SHIFT3_SET_CHARS[f];n?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),n=!1):t.append(u),i=0}else throw new j;break;default:throw new j}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const n=[];do{if(e.available()===8)return;const r=e.readBits(8);if(r===254)return;this.parseTwoBytes(r,e.readBits(8),n);for(let i=0;i<3;i++){const s=n[i];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new j;break}}}while(e.available()>0)}static parseTwoBytes(e,t,n){let r=(e<<8)+t-1,i=Math.floor(r/1600);n[0]=i,r-=i*1600,i=Math.floor(r/40),n[1]=i,n[2]=r-i*40}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let n=0;n<4;n++){let r=e.readBits(6);if(r===31){const i=8-e.getBitOffset();i!==8&&e.readBits(i);return}r&32||(r|=64),t.append(String.fromCharCode(r))}}while(e.available()>0)}static decodeBase256Segment(e,t,n){let r=1+e.getByteOffset();const i=this.unrandomize255State(e.readBits(8),r++);let s;if(i===0?s=e.available()/8|0:i<250?s=i:s=250*(i-249)+this.unrandomize255State(e.readBits(8),r++),s<0)throw new j;const a=new Uint8Array(s);for(let f=0;f<s;f++){if(e.available()<8)throw new j;a[f]=this.unrandomize255State(e.readBits(8),r++)}n.push(a);try{t.append(Xe.decode(a,ce.ISO88591))}catch(f){throw new U("Platform does not support required encoding: "+f.message)}}static unrandomize255State(e,t){const n=149*t%255+1,r=e-n;return r>=0?r:r+256}}yn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],yn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],yn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],yn.TEXT_SHIFT2_SET_CHARS=yn.C40_SHIFT2_SET_CHARS,yn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class Wa{constructor(){this.rsDecoder=new V(S.DATA_MATRIX_FIELD_256)}decode(e){const t=new Ni(e),n=t.getVersion(),r=t.readCodewords(),i=Oi.getDataBlocks(r,n);let s=0;for(let u of i)s+=u.getNumDataCodewords();const a=new Uint8Array(s),f=i.length;for(let u=0;u<f;u++){const x=i[u],A=x.getCodewords(),E=x.getNumDataCodewords();this.correctErrors(A,E);for(let I=0;I<E;I++)a[I*f+u]=A[I]}return yn.decode(a)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new ee}for(let r=0;r<t;r++)e[r]=n[r]}}class ft{constructor(e){this.image=e,this.rectangleDetector=new oe(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new F;t=this.shiftToModuleCenter(t);const n=t[0],r=t[1],i=t[2],s=t[3];let a=this.transitionsBetween(n,s)+1,f=this.transitionsBetween(i,s)+1;(a&1)===1&&(a+=1),(f&1)===1&&(f+=1),4*a<7*f&&4*f<7*a&&(a=f=Math.max(a,f));let u=ft.sampleGrid(this.image,n,r,i,s,a,f);return new le(u,[n,r,i,s])}static shiftPoint(e,t,n){let r=(t.getX()-e.getX())/(n+1),i=(t.getY()-e.getY())/(n+1);return new B(e.getX()+r,e.getY()+i)}static moveAway(e,t,n){let r=e.getX(),i=e.getY();return r<t?r-=1:r+=1,i<n?i-=1:i+=1,new B(r,i)}detectSolid1(e){let t=e[0],n=e[1],r=e[3],i=e[2],s=this.transitionsBetween(t,n),a=this.transitionsBetween(n,r),f=this.transitionsBetween(r,i),u=this.transitionsBetween(i,t),x=s,A=[i,t,n,r];return x>a&&(x=a,A[0]=t,A[1]=n,A[2]=r,A[3]=i),x>f&&(x=f,A[0]=n,A[1]=r,A[2]=i,A[3]=t),x>u&&(A[0]=r,A[1]=i,A[2]=t,A[3]=n),A}detectSolid2(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=this.transitionsBetween(t,i),a=ft.shiftPoint(n,r,(s+1)*4),f=ft.shiftPoint(r,n,(s+1)*4),u=this.transitionsBetween(a,t),x=this.transitionsBetween(f,i);return u<x?(e[0]=t,e[1]=n,e[2]=r,e[3]=i):(e[0]=n,e[1]=r,e[2]=i,e[3]=t),e}correctTopRight(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=this.transitionsBetween(t,i),a=this.transitionsBetween(n,i),f=ft.shiftPoint(t,n,(a+1)*4),u=ft.shiftPoint(r,n,(s+1)*4);s=this.transitionsBetween(f,i),a=this.transitionsBetween(u,i);let x=new B(i.getX()+(r.getX()-n.getX())/(s+1),i.getY()+(r.getY()-n.getY())/(s+1)),A=new B(i.getX()+(t.getX()-n.getX())/(a+1),i.getY()+(t.getY()-n.getY())/(a+1));if(!this.isValid(x))return this.isValid(A)?A:null;if(!this.isValid(A))return x;let E=this.transitionsBetween(f,x)+this.transitionsBetween(u,x),I=this.transitionsBetween(f,A)+this.transitionsBetween(u,A);return E>I?x:A}shiftToModuleCenter(e){let t=e[0],n=e[1],r=e[2],i=e[3],s=this.transitionsBetween(t,i)+1,a=this.transitionsBetween(r,i)+1,f=ft.shiftPoint(t,n,a*4),u=ft.shiftPoint(r,n,s*4);s=this.transitionsBetween(f,i)+1,a=this.transitionsBetween(u,i)+1,(s&1)===1&&(s+=1),(a&1)===1&&(a+=1);let x=(t.getX()+n.getX()+r.getX()+i.getX())/4,A=(t.getY()+n.getY()+r.getY()+i.getY())/4;t=ft.moveAway(t,x,A),n=ft.moveAway(n,x,A),r=ft.moveAway(r,x,A),i=ft.moveAway(i,x,A);let E,I;return f=ft.shiftPoint(t,n,a*4),f=ft.shiftPoint(f,i,s*4),E=ft.shiftPoint(n,t,a*4),E=ft.shiftPoint(E,r,s*4),u=ft.shiftPoint(r,i,a*4),u=ft.shiftPoint(u,n,s*4),I=ft.shiftPoint(i,r,a*4),I=ft.shiftPoint(I,t,s*4),[f,E,u,I]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,n,r,i,s,a){return Te.getInstance().sampleGrid(e,s,a,.5,.5,s-.5,.5,s-.5,a-.5,.5,a-.5,t.getX(),t.getY(),i.getX(),i.getY(),r.getX(),r.getY(),n.getX(),n.getY())}transitionsBetween(e,t){let n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),i=Math.trunc(t.getX()),s=Math.trunc(t.getY()),a=Math.abs(s-r)>Math.abs(i-n);if(a){let O=n;n=r,r=O,O=i,i=s,s=O}let f=Math.abs(i-n),u=Math.abs(s-r),x=-f/2,A=r<s?1:-1,E=n<i?1:-1,I=0,T=this.image.get(a?r:n,a?n:r);for(let O=n,D=r;O!==i;O+=E){let P=this.image.get(a?D:O,a?O:D);if(P!==T&&(I++,T=P),x+=u,x>0){if(D===s)break;D+=A,x-=f}}return I}}class _n{constructor(){this.decoder=new Wa}decode(e,t=null){let n,r;if(t!=null&&t.has(Re.PURE_BARCODE)){const u=_n.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(u),r=_n.NO_POINTS}else{const u=new ft(e.getBlackMatrix()).detect();n=this.decoder.decode(u.getBits()),r=u.getPoints()}const i=n.getRawBytes(),s=new Ct(n.getText(),i,8*i.length,r,ae.DATA_MATRIX,J.currentTimeMillis()),a=n.getByteSegments();a!=null&&s.putMetadata(ct.BYTE_SEGMENTS,a);const f=n.getECLevel();return f!=null&&s.putMetadata(ct.ERROR_CORRECTION_LEVEL,f),s}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t==null||n==null)throw new F;const r=this.moduleSize(t,e);let i=t[1];const s=n[1];let a=t[0];const u=(n[0]-a+1)/r,x=(s-i+1)/r;if(u<=0||x<=0)throw new F;const A=r/2;i+=A,a+=A;const E=new tt(u,x);for(let I=0;I<x;I++){const T=i+I*r;for(let O=0;O<u;O++)e.get(a+O*r,T)&&E.set(O,I)}return E}static moduleSize(e,t){const n=t.getWidth();let r=e[0];const i=e[1];for(;r<n&&t.get(r,i);)r++;if(r===n)throw new F;const s=r-e[0];if(s===0)throw new F;return s}}_n.NO_POINTS=[];class Ga extends on{constructor(e=500){super(new _n,e)}}var tr;(function(w){w[w.L=0]="L",w[w.M=1]="M",w[w.Q=2]="Q",w[w.H=3]="H"})(tr||(tr={}));class Qe{constructor(e,t,n){this.value=e,this.stringValue=t,this.bits=n,Qe.FOR_BITS.set(n,this),Qe.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Qe.L;case"M":return Qe.M;case"Q":return Qe.Q;case"H":return Qe.H;default:throw new N(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Qe))return!1;const t=e;return this.value===t.value}static forBits(e){if(e<0||e>=Qe.FOR_BITS.size)throw new R;return Qe.FOR_BITS.get(e)}}Qe.FOR_BITS=new Map,Qe.FOR_VALUE=new Map,Qe.L=new Qe(tr.L,"L",1),Qe.M=new Qe(tr.M,"M",0),Qe.Q=new Qe(tr.Q,"Q",3),Qe.H=new Qe(tr.H,"H",2);class _t{constructor(e){this.errorCorrectionLevel=Qe.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,t){return q.bitCount(e^t)}static decodeFormatInformation(e,t){const n=_t.doDecodeFormatInformation(e,t);return n!==null?n:_t.doDecodeFormatInformation(e^_t.FORMAT_INFO_MASK_QR,t^_t.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let n=Number.MAX_SAFE_INTEGER,r=0;for(const i of _t.FORMAT_INFO_DECODE_LOOKUP){const s=i[0];if(s===e||s===t)return new _t(i[1]);let a=_t.numBitsDiffering(e,s);a<n&&(r=i[1],n=a),e!==t&&(a=_t.numBitsDiffering(t,s),a<n&&(r=i[1],n=a))}return n<=3?new _t(r):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof _t))return!1;const t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}_t.FORMAT_INFO_MASK_QR=21522,_t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class M{constructor(e,...t){this.ecCodewordsPerBlock=e,this.ecBlocks=t}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const n of t)e+=n.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class b{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class fe{constructor(e,t,...n){this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=n;let r=0;const i=n[0].getECCodewordsPerBlock(),s=n[0].getECBlocks();for(const a of s)r+=a.getCount()*(a.getDataCodewords()+i);this.totalCodewords=r}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new j;try{return this.getVersionForNumber((e-17)/4)}catch{throw new j}}static getVersionForNumber(e){if(e<1||e>40)throw new R;return fe.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,n=0;for(let r=0;r<fe.VERSION_DECODE_INFO.length;r++){const i=fe.VERSION_DECODE_INFO[r];if(i===e)return fe.getVersionForNumber(r+7);const s=_t.numBitsDiffering(e,i);s<t&&(n=r+7,t=s)}return t<=3?fe.getVersionForNumber(n):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new tt(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const n=this.alignmentPatternCenters.length;for(let r=0;r<n;r++){const i=this.alignmentPatternCenters[r]-2;for(let s=0;s<n;s++)r===0&&(s===0||s===n-1)||r===n-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,i,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}fe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),fe.VERSIONS=[new fe(1,new Int32Array(0),new M(7,new b(1,19)),new M(10,new b(1,16)),new M(13,new b(1,13)),new M(17,new b(1,9))),new fe(2,Int32Array.from([6,18]),new M(10,new b(1,34)),new M(16,new b(1,28)),new M(22,new b(1,22)),new M(28,new b(1,16))),new fe(3,Int32Array.from([6,22]),new M(15,new b(1,55)),new M(26,new b(1,44)),new M(18,new b(2,17)),new M(22,new b(2,13))),new fe(4,Int32Array.from([6,26]),new M(20,new b(1,80)),new M(18,new b(2,32)),new M(26,new b(2,24)),new M(16,new b(4,9))),new fe(5,Int32Array.from([6,30]),new M(26,new b(1,108)),new M(24,new b(2,43)),new M(18,new b(2,15),new b(2,16)),new M(22,new b(2,11),new b(2,12))),new fe(6,Int32Array.from([6,34]),new M(18,new b(2,68)),new M(16,new b(4,27)),new M(24,new b(4,19)),new M(28,new b(4,15))),new fe(7,Int32Array.from([6,22,38]),new M(20,new b(2,78)),new M(18,new b(4,31)),new M(18,new b(2,14),new b(4,15)),new M(26,new b(4,13),new b(1,14))),new fe(8,Int32Array.from([6,24,42]),new M(24,new b(2,97)),new M(22,new b(2,38),new b(2,39)),new M(22,new b(4,18),new b(2,19)),new M(26,new b(4,14),new b(2,15))),new fe(9,Int32Array.from([6,26,46]),new M(30,new b(2,116)),new M(22,new b(3,36),new b(2,37)),new M(20,new b(4,16),new b(4,17)),new M(24,new b(4,12),new b(4,13))),new fe(10,Int32Array.from([6,28,50]),new M(18,new b(2,68),new b(2,69)),new M(26,new b(4,43),new b(1,44)),new M(24,new b(6,19),new b(2,20)),new M(28,new b(6,15),new b(2,16))),new fe(11,Int32Array.from([6,30,54]),new M(20,new b(4,81)),new M(30,new b(1,50),new b(4,51)),new M(28,new b(4,22),new b(4,23)),new M(24,new b(3,12),new b(8,13))),new fe(12,Int32Array.from([6,32,58]),new M(24,new b(2,92),new b(2,93)),new M(22,new b(6,36),new b(2,37)),new M(26,new b(4,20),new b(6,21)),new M(28,new b(7,14),new b(4,15))),new fe(13,Int32Array.from([6,34,62]),new M(26,new b(4,107)),new M(22,new b(8,37),new b(1,38)),new M(24,new b(8,20),new b(4,21)),new M(22,new b(12,11),new b(4,12))),new fe(14,Int32Array.from([6,26,46,66]),new M(30,new b(3,115),new b(1,116)),new M(24,new b(4,40),new b(5,41)),new M(20,new b(11,16),new b(5,17)),new M(24,new b(11,12),new b(5,13))),new fe(15,Int32Array.from([6,26,48,70]),new M(22,new b(5,87),new b(1,88)),new M(24,new b(5,41),new b(5,42)),new M(30,new b(5,24),new b(7,25)),new M(24,new b(11,12),new b(7,13))),new fe(16,Int32Array.from([6,26,50,74]),new M(24,new b(5,98),new b(1,99)),new M(28,new b(7,45),new b(3,46)),new M(24,new b(15,19),new b(2,20)),new M(30,new b(3,15),new b(13,16))),new fe(17,Int32Array.from([6,30,54,78]),new M(28,new b(1,107),new b(5,108)),new M(28,new b(10,46),new b(1,47)),new M(28,new b(1,22),new b(15,23)),new M(28,new b(2,14),new b(17,15))),new fe(18,Int32Array.from([6,30,56,82]),new M(30,new b(5,120),new b(1,121)),new M(26,new b(9,43),new b(4,44)),new M(28,new b(17,22),new b(1,23)),new M(28,new b(2,14),new b(19,15))),new fe(19,Int32Array.from([6,30,58,86]),new M(28,new b(3,113),new b(4,114)),new M(26,new b(3,44),new b(11,45)),new M(26,new b(17,21),new b(4,22)),new M(26,new b(9,13),new b(16,14))),new fe(20,Int32Array.from([6,34,62,90]),new M(28,new b(3,107),new b(5,108)),new M(26,new b(3,41),new b(13,42)),new M(30,new b(15,24),new b(5,25)),new M(28,new b(15,15),new b(10,16))),new fe(21,Int32Array.from([6,28,50,72,94]),new M(28,new b(4,116),new b(4,117)),new M(26,new b(17,42)),new M(28,new b(17,22),new b(6,23)),new M(30,new b(19,16),new b(6,17))),new fe(22,Int32Array.from([6,26,50,74,98]),new M(28,new b(2,111),new b(7,112)),new M(28,new b(17,46)),new M(30,new b(7,24),new b(16,25)),new M(24,new b(34,13))),new fe(23,Int32Array.from([6,30,54,78,102]),new M(30,new b(4,121),new b(5,122)),new M(28,new b(4,47),new b(14,48)),new M(30,new b(11,24),new b(14,25)),new M(30,new b(16,15),new b(14,16))),new fe(24,Int32Array.from([6,28,54,80,106]),new M(30,new b(6,117),new b(4,118)),new M(28,new b(6,45),new b(14,46)),new M(30,new b(11,24),new b(16,25)),new M(30,new b(30,16),new b(2,17))),new fe(25,Int32Array.from([6,32,58,84,110]),new M(26,new b(8,106),new b(4,107)),new M(28,new b(8,47),new b(13,48)),new M(30,new b(7,24),new b(22,25)),new M(30,new b(22,15),new b(13,16))),new fe(26,Int32Array.from([6,30,58,86,114]),new M(28,new b(10,114),new b(2,115)),new M(28,new b(19,46),new b(4,47)),new M(28,new b(28,22),new b(6,23)),new M(30,new b(33,16),new b(4,17))),new fe(27,Int32Array.from([6,34,62,90,118]),new M(30,new b(8,122),new b(4,123)),new M(28,new b(22,45),new b(3,46)),new M(30,new b(8,23),new b(26,24)),new M(30,new b(12,15),new b(28,16))),new fe(28,Int32Array.from([6,26,50,74,98,122]),new M(30,new b(3,117),new b(10,118)),new M(28,new b(3,45),new b(23,46)),new M(30,new b(4,24),new b(31,25)),new M(30,new b(11,15),new b(31,16))),new fe(29,Int32Array.from([6,30,54,78,102,126]),new M(30,new b(7,116),new b(7,117)),new M(28,new b(21,45),new b(7,46)),new M(30,new b(1,23),new b(37,24)),new M(30,new b(19,15),new b(26,16))),new fe(30,Int32Array.from([6,26,52,78,104,130]),new M(30,new b(5,115),new b(10,116)),new M(28,new b(19,47),new b(10,48)),new M(30,new b(15,24),new b(25,25)),new M(30,new b(23,15),new b(25,16))),new fe(31,Int32Array.from([6,30,56,82,108,134]),new M(30,new b(13,115),new b(3,116)),new M(28,new b(2,46),new b(29,47)),new M(30,new b(42,24),new b(1,25)),new M(30,new b(23,15),new b(28,16))),new fe(32,Int32Array.from([6,34,60,86,112,138]),new M(30,new b(17,115)),new M(28,new b(10,46),new b(23,47)),new M(30,new b(10,24),new b(35,25)),new M(30,new b(19,15),new b(35,16))),new fe(33,Int32Array.from([6,30,58,86,114,142]),new M(30,new b(17,115),new b(1,116)),new M(28,new b(14,46),new b(21,47)),new M(30,new b(29,24),new b(19,25)),new M(30,new b(11,15),new b(46,16))),new fe(34,Int32Array.from([6,34,62,90,118,146]),new M(30,new b(13,115),new b(6,116)),new M(28,new b(14,46),new b(23,47)),new M(30,new b(44,24),new b(7,25)),new M(30,new b(59,16),new b(1,17))),new fe(35,Int32Array.from([6,30,54,78,102,126,150]),new M(30,new b(12,121),new b(7,122)),new M(28,new b(12,47),new b(26,48)),new M(30,new b(39,24),new b(14,25)),new M(30,new b(22,15),new b(41,16))),new fe(36,Int32Array.from([6,24,50,76,102,128,154]),new M(30,new b(6,121),new b(14,122)),new M(28,new b(6,47),new b(34,48)),new M(30,new b(46,24),new b(10,25)),new M(30,new b(2,15),new b(64,16))),new fe(37,Int32Array.from([6,28,54,80,106,132,158]),new M(30,new b(17,122),new b(4,123)),new M(28,new b(29,46),new b(14,47)),new M(30,new b(49,24),new b(10,25)),new M(30,new b(24,15),new b(46,16))),new fe(38,Int32Array.from([6,32,58,84,110,136,162]),new M(30,new b(4,122),new b(18,123)),new M(28,new b(13,46),new b(32,47)),new M(30,new b(48,24),new b(14,25)),new M(30,new b(42,15),new b(32,16))),new fe(39,Int32Array.from([6,26,54,82,110,138,166]),new M(30,new b(20,117),new b(4,118)),new M(28,new b(40,47),new b(7,48)),new M(30,new b(43,24),new b(22,25)),new M(30,new b(10,15),new b(67,16))),new fe(40,Int32Array.from([6,30,58,86,114,142,170]),new M(30,new b(19,118),new b(6,119)),new M(28,new b(18,47),new b(31,48)),new M(30,new b(34,24),new b(34,25)),new M(30,new b(20,15),new b(61,16)))];var wt;(function(w){w[w.DATA_MASK_000=0]="DATA_MASK_000",w[w.DATA_MASK_001=1]="DATA_MASK_001",w[w.DATA_MASK_010=2]="DATA_MASK_010",w[w.DATA_MASK_011=3]="DATA_MASK_011",w[w.DATA_MASK_100=4]="DATA_MASK_100",w[w.DATA_MASK_101=5]="DATA_MASK_101",w[w.DATA_MASK_110=6]="DATA_MASK_110",w[w.DATA_MASK_111=7]="DATA_MASK_111"})(wt||(wt={}));class Xt{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let n=0;n<t;n++)for(let r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)}}Xt.values=new Map([[wt.DATA_MASK_000,new Xt(wt.DATA_MASK_000,(w,e)=>(w+e&1)===0)],[wt.DATA_MASK_001,new Xt(wt.DATA_MASK_001,(w,e)=>(w&1)===0)],[wt.DATA_MASK_010,new Xt(wt.DATA_MASK_010,(w,e)=>e%3===0)],[wt.DATA_MASK_011,new Xt(wt.DATA_MASK_011,(w,e)=>(w+e)%3===0)],[wt.DATA_MASK_100,new Xt(wt.DATA_MASK_100,(w,e)=>(Math.floor(w/2)+Math.floor(e/3)&1)===0)],[wt.DATA_MASK_101,new Xt(wt.DATA_MASK_101,(w,e)=>w*e%6===0)],[wt.DATA_MASK_110,new Xt(wt.DATA_MASK_110,(w,e)=>w*e%6<3)],[wt.DATA_MASK_111,new Xt(wt.DATA_MASK_111,(w,e)=>(w+e+w*e%3&1)===0)]]);class Xa{constructor(e){const t=e.getHeight();if(t<21||(t&3)!==1)throw new j;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let i=0;i<6;i++)e=this.copyBit(i,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let i=5;i>=0;i--)e=this.copyBit(8,i,e);const t=this.bitMatrix.getHeight();let n=0;const r=t-7;for(let i=t-1;i>=r;i--)n=this.copyBit(8,i,n);for(let i=t-8;i<t;i++)n=this.copyBit(i,8,n);if(this.parsedFormatInfo=_t.decodeFormatInformation(e,n),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new j}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return fe.getVersionForNumber(t);let n=0;const r=e-11;for(let s=5;s>=0;s--)for(let a=e-9;a>=r;a--)n=this.copyBit(a,s,n);let i=fe.decodeVersionInformation(n);if(i!==null&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;n=0;for(let s=5;s>=0;s--)for(let a=e-9;a>=r;a--)n=this.copyBit(s,a,n);if(i=fe.decodeVersionInformation(n),i!==null&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;throw new j}copyBit(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),n=Xt.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);const i=t.buildFunctionPattern();let s=!0;const a=new Uint8Array(t.getTotalCodewords());let f=0,u=0,x=0;for(let A=r-1;A>0;A-=2){A===6&&A--;for(let E=0;E<r;E++){const I=s?r-1-E:E;for(let T=0;T<2;T++)i.get(A-T,I)||(x++,u<<=1,this.bitMatrix.get(A-T,I)&&(u|=1),x===8&&(a[f++]=u,x=0,u=0))}s=!s}if(f!==t.getTotalCodewords())throw new j;return a}remask(){if(this.parsedFormatInfo===null)return;const e=Xt.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,n=e.getWidth();t<n;t++)for(let r=t+1,i=e.getHeight();r<i;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))}}class Di{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,n){if(e.length!==t.getTotalCodewords())throw new R;const r=t.getECBlocksForLevel(n);let i=0;const s=r.getECBlocks();for(const T of s)i+=T.getCount();const a=new Array(i);let f=0;for(const T of s)for(let O=0;O<T.getCount();O++){const D=T.getDataCodewords(),P=r.getECCodewordsPerBlock()+D;a[f++]=new Di(D,new Uint8Array(P))}const u=a[0].codewords.length;let x=a.length-1;for(;x>=0&&a[x].codewords.length!==u;)x--;x++;const A=u-r.getECCodewordsPerBlock();let E=0;for(let T=0;T<A;T++)for(let O=0;O<f;O++)a[O].codewords[T]=e[E++];for(let T=x;T<f;T++)a[T].codewords[A]=e[E++];const I=a[0].codewords.length;for(let T=A;T<I;T++)for(let O=0;O<f;O++){const D=O<x?T:T+1;a[O].codewords[D]=e[E++]}return a}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Yt;(function(w){w[w.TERMINATOR=0]="TERMINATOR",w[w.NUMERIC=1]="NUMERIC",w[w.ALPHANUMERIC=2]="ALPHANUMERIC",w[w.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",w[w.BYTE=4]="BYTE",w[w.ECI=5]="ECI",w[w.KANJI=6]="KANJI",w[w.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",w[w.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",w[w.HANZI=9]="HANZI"})(Yt||(Yt={}));class he{constructor(e,t,n,r){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=r,he.FOR_BITS.set(r,this),he.FOR_VALUE.set(e,this)}static forBits(e){const t=he.FOR_BITS.get(e);if(t===void 0)throw new R;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let n;return t<=9?n=0:t<=26?n=1:n=2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof he))return!1;const t=e;return this.value===t.value}toString(){return this.stringValue}}he.FOR_BITS=new Map,he.FOR_VALUE=new Map,he.TERMINATOR=new he(Yt.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),he.NUMERIC=new he(Yt.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),he.ALPHANUMERIC=new he(Yt.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),he.STRUCTURED_APPEND=new he(Yt.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),he.BYTE=new he(Yt.BYTE,"BYTE",Int32Array.from([8,16,16]),4),he.ECI=new he(Yt.ECI,"ECI",Int32Array.from([0,0,0]),7),he.KANJI=new he(Yt.KANJI,"KANJI",Int32Array.from([8,10,12]),8),he.FNC1_FIRST_POSITION=new he(Yt.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),he.FNC1_SECOND_POSITION=new he(Yt.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),he.HANZI=new he(Yt.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class it{static decode(e,t,n,r){const i=new Ri(e);let s=new Ie;const a=new Array;let f=-1,u=-1;try{let x=null,A=!1,E;do{if(i.available()<4)E=he.TERMINATOR;else{const I=i.readBits(4);E=he.forBits(I)}switch(E){case he.TERMINATOR:break;case he.FNC1_FIRST_POSITION:case he.FNC1_SECOND_POSITION:A=!0;break;case he.STRUCTURED_APPEND:if(i.available()<16)throw new j;f=i.readBits(8),u=i.readBits(8);break;case he.ECI:const I=it.parseECIValue(i);if(x=W.getCharacterSetECIByValue(I),x===null)throw new j;break;case he.HANZI:const T=i.readBits(4),O=i.readBits(E.getCharacterCountBits(t));T===it.GB2312_SUBSET&&it.decodeHanziSegment(i,s,O);break;default:const D=i.readBits(E.getCharacterCountBits(t));switch(E){case he.NUMERIC:it.decodeNumericSegment(i,s,D);break;case he.ALPHANUMERIC:it.decodeAlphanumericSegment(i,s,D,A);break;case he.BYTE:it.decodeByteSegment(i,s,D,x,a,r);break;case he.KANJI:it.decodeKanjiSegment(i,s,D);break;default:throw new j}break}}while(E!==he.TERMINATOR)}catch{throw new j}return new Wt(e,s.toString(),a.length===0?null:a,n===null?null:n.toString(),f,u)}static decodeHanziSegment(e,t,n){if(n*13>e.available())throw new j;const r=new Uint8Array(2*n);let i=0;for(;n>0;){const s=e.readBits(13);let a=s/96<<8&4294967295|s%96;a<959?a+=41377:a+=42657,r[i]=a>>8&255,r[i+1]=a&255,i+=2,n--}try{t.append(Xe.decode(r,ce.GB2312))}catch(s){throw new j(s)}}static decodeKanjiSegment(e,t,n){if(n*13>e.available())throw new j;const r=new Uint8Array(2*n);let i=0;for(;n>0;){const s=e.readBits(13);let a=s/192<<8&4294967295|s%192;a<7936?a+=33088:a+=49472,r[i]=a>>8,r[i+1]=a,i+=2,n--}try{t.append(Xe.decode(r,ce.SHIFT_JIS))}catch(s){throw new j(s)}}static decodeByteSegment(e,t,n,r,i,s){if(8*n>e.available())throw new j;const a=new Uint8Array(n);for(let u=0;u<n;u++)a[u]=e.readBits(8);let f;r===null?f=ce.guessEncoding(a,s):f=r.getName();try{t.append(Xe.decode(a,f))}catch(u){throw new j(u)}i.push(a)}static toAlphaNumericChar(e){if(e>=it.ALPHANUMERIC_CHARS.length)throw new j;return it.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,n,r){const i=t.length();for(;n>1;){if(e.available()<11)throw new j;const s=e.readBits(11);t.append(it.toAlphaNumericChar(Math.floor(s/45))),t.append(it.toAlphaNumericChar(s%45)),n-=2}if(n===1){if(e.available()<6)throw new j;t.append(it.toAlphaNumericChar(e.readBits(6)))}if(r)for(let s=i;s<t.length();s++)t.charAt(s)==="%"&&(s<t.length()-1&&t.charAt(s+1)==="%"?t.deleteCharAt(s+1):t.setCharAt(s,String.fromCharCode(29)))}static decodeNumericSegment(e,t,n){for(;n>=3;){if(e.available()<10)throw new j;const r=e.readBits(10);if(r>=1e3)throw new j;t.append(it.toAlphaNumericChar(Math.floor(r/100))),t.append(it.toAlphaNumericChar(Math.floor(r/10)%10)),t.append(it.toAlphaNumericChar(r%10)),n-=3}if(n===2){if(e.available()<7)throw new j;const r=e.readBits(7);if(r>=100)throw new j;t.append(it.toAlphaNumericChar(Math.floor(r/10))),t.append(it.toAlphaNumericChar(r%10))}else if(n===1){if(e.available()<4)throw new j;const r=e.readBits(4);if(r>=10)throw new j;t.append(it.toAlphaNumericChar(r))}}static parseECIValue(e){const t=e.readBits(8);if(!(t&128))return t&127;if((t&192)===128){const n=e.readBits(8);return(t&63)<<8&4294967295|n}if((t&224)===192){const n=e.readBits(16);return(t&31)<<16&4294967295|n}throw new j}}it.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",it.GB2312_SUBSET=1;class Fs{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class Ya{constructor(){this.rsDecoder=new V(S.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(tt.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const n=new Xa(e);let r=null;try{return this.decodeBitMatrixParser(n,t)}catch(i){r=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();const i=this.decodeBitMatrixParser(n,t);return i.setOther(new Fs(!0)),i}catch(i){throw r!==null?r:i}}decodeBitMatrixParser(e,t){const n=e.readVersion(),r=e.readFormatInformation().getErrorCorrectionLevel(),i=e.readCodewords(),s=Di.getDataBlocks(i,n,r);let a=0;for(const x of s)a+=x.getNumDataCodewords();const f=new Uint8Array(a);let u=0;for(const x of s){const A=x.getCodewords(),E=x.getNumDataCodewords();this.correctErrors(A,E);for(let I=0;I<E;I++)f[u++]=A[I]}return it.decode(f,n,r,t)}correctErrors(e,t){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new ee}for(let r=0;r<t;r++)e[r]=n[r]}}class Mi extends B{constructor(e,t,n){super(e,t),this.estimatedModuleSize=n}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=(this.getX()+t)/2,i=(this.getY()+e)/2,s=(this.estimatedModuleSize+n)/2;return new Mi(r,i,s)}}class Gr{constructor(e,t,n,r,i,s,a){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=i,this.moduleSize=s,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,n=this.width,r=e+n,i=this.startY+t/2,s=new Int32Array(3),a=this.image;for(let f=0;f<t;f++){const u=i+(f&1?-Math.floor((f+1)/2):Math.floor((f+1)/2));s[0]=0,s[1]=0,s[2]=0;let x=e;for(;x<r&&!a.get(x,u);)x++;let A=0;for(;x<r;){if(a.get(x,u))if(A===1)s[1]++;else if(A===2){if(this.foundPatternCross(s)){const E=this.handlePossibleCenter(s,u,x);if(E!==null)return E}s[0]=s[2],s[1]=1,s[2]=0,A=1}else s[++A]++;else A===1&&A++,s[A]++;x++}if(this.foundPatternCross(s)){const E=this.handlePossibleCenter(s,u,r);if(E!==null)return E}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new F}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,n=t/2;for(let r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0}crossCheckVertical(e,t,n,r){const i=this.image,s=i.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;let f=e;for(;f>=0&&i.get(t,f)&&a[1]<=n;)a[1]++,f--;if(f<0||a[1]>n)return NaN;for(;f>=0&&!i.get(t,f)&&a[0]<=n;)a[0]++,f--;if(a[0]>n)return NaN;for(f=e+1;f<s&&i.get(t,f)&&a[1]<=n;)a[1]++,f++;if(f===s||a[1]>n)return NaN;for(;f<s&&!i.get(t,f)&&a[2]<=n;)a[2]++,f++;if(a[2]>n)return NaN;const u=a[0]+a[1]+a[2];return 5*Math.abs(u-r)>=2*r?NaN:this.foundPatternCross(a)?Gr.centerFromEnd(a,f):NaN}handlePossibleCenter(e,t,n){const r=e[0]+e[1]+e[2],i=Gr.centerFromEnd(e,n),s=this.crossCheckVertical(t,i,2*e[1],r);if(!isNaN(s)){const a=(e[0]+e[1]+e[2])/3;for(const u of this.possibleCenters)if(u.aboutEquals(a,s,i))return u.combineEstimate(s,i,a);const f=new Mi(i,s,a);this.possibleCenters.push(f),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(f)}return null}}class Bi extends B{constructor(e,t,n,r){super(e,t),this.estimatedModuleSize=n,this.count=r,r===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){const r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){const r=this.count+1,i=(this.count*this.getX()+t)/r,s=(this.count*this.getY()+e)/r,a=(this.count*this.estimatedModuleSize+n)/r;return new Bi(i,s,a,r)}}class za{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class At{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const t=e!=null&&e.get(Re.TRY_HARDER)!==void 0,n=e!=null&&e.get(Re.PURE_BARCODE)!==void 0,r=this.image,i=r.getHeight(),s=r.getWidth();let a=Math.floor(3*i/(4*At.MAX_MODULES));(a<At.MIN_SKIP||t)&&(a=At.MIN_SKIP);let f=!1;const u=new Int32Array(5);for(let A=a-1;A<i&&!f;A+=a){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;let E=0;for(let I=0;I<s;I++)if(r.get(I,A))(E&1)===1&&E++,u[E]++;else if(E&1)u[E]++;else if(E===4)if(At.foundPatternCross(u)){if(this.handlePossibleCenter(u,A,I,n)===!0)if(a=2,this.hasSkipped===!0)f=this.haveMultiplyConfirmedCenters();else{const O=this.findRowSkip();O>u[2]&&(A+=O-u[2]-a,I=s-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,E=3;continue}E=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,E=3;else u[++E]++;At.foundPatternCross(u)&&this.handlePossibleCenter(u,A,s,n)===!0&&(a=u[0],this.hasSkipped&&(f=this.haveMultiplyConfirmedCenters()))}const x=this.selectBestPatterns();return B.orderBestPatterns(x),new za(x)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let i=0;i<5;i++){const s=e[i];if(s===0)return!1;t+=s}if(t<7)return!1;const n=t/7,r=n/2;return Math.abs(n-e[0])<r&&Math.abs(n-e[1])<r&&Math.abs(3*n-e[2])<3*r&&Math.abs(n-e[3])<r&&Math.abs(n-e[4])<r}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,n,r){const i=this.getCrossCheckStateCount();let s=0;const a=this.image;for(;e>=s&&t>=s&&a.get(t-s,e-s);)i[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!a.get(t-s,e-s)&&i[1]<=n;)i[1]++,s++;if(e<s||t<s||i[1]>n)return!1;for(;e>=s&&t>=s&&a.get(t-s,e-s)&&i[0]<=n;)i[0]++,s++;if(i[0]>n)return!1;const f=a.getHeight(),u=a.getWidth();for(s=1;e+s<f&&t+s<u&&a.get(t+s,e+s);)i[2]++,s++;if(e+s>=f||t+s>=u)return!1;for(;e+s<f&&t+s<u&&!a.get(t+s,e+s)&&i[3]<n;)i[3]++,s++;if(e+s>=f||t+s>=u||i[3]>=n)return!1;for(;e+s<f&&t+s<u&&a.get(t+s,e+s)&&i[4]<n;)i[4]++,s++;if(i[4]>=n)return!1;const x=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(x-r)<2*r&&At.foundPatternCross(i)}crossCheckVertical(e,t,n,r){const i=this.image,s=i.getHeight(),a=this.getCrossCheckStateCount();let f=e;for(;f>=0&&i.get(t,f);)a[2]++,f--;if(f<0)return NaN;for(;f>=0&&!i.get(t,f)&&a[1]<=n;)a[1]++,f--;if(f<0||a[1]>n)return NaN;for(;f>=0&&i.get(t,f)&&a[0]<=n;)a[0]++,f--;if(a[0]>n)return NaN;for(f=e+1;f<s&&i.get(t,f);)a[2]++,f++;if(f===s)return NaN;for(;f<s&&!i.get(t,f)&&a[3]<n;)a[3]++,f++;if(f===s||a[3]>=n)return NaN;for(;f<s&&i.get(t,f)&&a[4]<n;)a[4]++,f++;if(a[4]>=n)return NaN;const u=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(u-r)>=2*r?NaN:At.foundPatternCross(a)?At.centerFromEnd(a,f):NaN}crossCheckHorizontal(e,t,n,r){const i=this.image,s=i.getWidth(),a=this.getCrossCheckStateCount();let f=e;for(;f>=0&&i.get(f,t);)a[2]++,f--;if(f<0)return NaN;for(;f>=0&&!i.get(f,t)&&a[1]<=n;)a[1]++,f--;if(f<0||a[1]>n)return NaN;for(;f>=0&&i.get(f,t)&&a[0]<=n;)a[0]++,f--;if(a[0]>n)return NaN;for(f=e+1;f<s&&i.get(f,t);)a[2]++,f++;if(f===s)return NaN;for(;f<s&&!i.get(f,t)&&a[3]<n;)a[3]++,f++;if(f===s||a[3]>=n)return NaN;for(;f<s&&i.get(f,t)&&a[4]<n;)a[4]++,f++;if(a[4]>=n)return NaN;const u=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(u-r)>=r?NaN:At.foundPatternCross(a)?At.centerFromEnd(a,f):NaN}handlePossibleCenter(e,t,n,r){const i=e[0]+e[1]+e[2]+e[3]+e[4];let s=At.centerFromEnd(e,n),a=this.crossCheckVertical(t,Math.floor(s),e[2],i);if(!isNaN(a)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(a),e[2],i),!isNaN(s)&&(!r||this.crossCheckDiagonal(Math.floor(a),Math.floor(s),e[2],i)))){const f=i/7;let u=!1;const x=this.possibleCenters;for(let A=0,E=x.length;A<E;A++){const I=x[A];if(I.aboutEquals(f,a,s)){x[A]=I.combineEstimate(a,s,f),u=!0;break}}if(!u){const A=new Bi(s,a,f);x.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let t=null;for(const n of this.possibleCenters)if(n.getCount()>=At.CENTER_QUORUM)if(t==null)t=n;else return this.hasSkipped=!0,Math.floor((Math.abs(t.getX()-n.getX())-Math.abs(t.getY()-n.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,t=0;const n=this.possibleCenters.length;for(const s of this.possibleCenters)s.getCount()>=At.CENTER_QUORUM&&(e++,t+=s.getEstimatedModuleSize());if(e<3)return!1;const r=t/n;let i=0;for(const s of this.possibleCenters)i+=Math.abs(s.getEstimatedModuleSize()-r);return i<=.05*t}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new F;const t=this.possibleCenters;let n;if(e>3){let r=0,i=0;for(const f of this.possibleCenters){const u=f.getEstimatedModuleSize();r+=u,i+=u*u}n=r/e;let s=Math.sqrt(i/e-n*n);t.sort((f,u)=>{const x=Math.abs(u.getEstimatedModuleSize()-n),A=Math.abs(f.getEstimatedModuleSize()-n);return x<A?-1:x>A?1:0});const a=Math.max(.2*n,s);for(let f=0;f<t.length&&t.length>3;f++){const u=t[f];Math.abs(u.getEstimatedModuleSize()-n)>a&&(t.splice(f,1),f--)}}if(t.length>3){let r=0;for(const i of t)r+=i.getEstimatedModuleSize();n=r/t.length,t.sort((i,s)=>{if(s.getCount()===i.getCount()){const a=Math.abs(s.getEstimatedModuleSize()-n),f=Math.abs(i.getEstimatedModuleSize()-n);return a<f?1:a>f?-1:0}else return s.getCount()-i.getCount()}),t.splice(3)}return[t[0],t[1],t[2]]}}At.CENTER_QUORUM=2,At.MIN_SKIP=3,At.MAX_MODULES=57;class Cr{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(Re.NEED_RESULT_POINT_CALLBACK);const n=new At(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(n)}processFinderPatternInfo(e){const t=e.getTopLeft(),n=e.getTopRight(),r=e.getBottomLeft(),i=this.calculateModuleSize(t,n,r);if(i<1)throw new F("No pattern found in proccess finder.");const s=Cr.computeDimension(t,n,r,i),a=fe.getProvisionalVersionForDimension(s),f=a.getDimensionForVersion()-7;let u=null;if(a.getAlignmentPatternCenters().length>0){const I=n.getX()-t.getX()+r.getX(),T=n.getY()-t.getY()+r.getY(),O=1-3/f,D=Math.floor(t.getX()+O*(I-t.getX())),P=Math.floor(t.getY()+O*(T-t.getY()));for(let Z=4;Z<=16;Z<<=1)try{u=this.findAlignmentInRegion(i,D,P,Z);break}catch(K){if(!(K instanceof F))throw K}}const x=Cr.createTransform(t,n,r,u,s),A=Cr.sampleGrid(this.image,x,s);let E;return u===null?E=[r,t,n]:E=[r,t,n,u],new le(A,E)}static createTransform(e,t,n,r,i){const s=i-3.5;let a,f,u,x;return r!==null?(a=r.getX(),f=r.getY(),u=s-3,x=u):(a=t.getX()-e.getX()+n.getX(),f=t.getY()-e.getY()+n.getY(),u=s,x=s),we.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,u,x,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),a,f,n.getX(),n.getY())}static sampleGrid(e,t,n){return Te.getInstance().sampleGridWithTransform(e,n,n,t)}static computeDimension(e,t,n,r){const i=k.round(B.distance(e,t)/r),s=k.round(B.distance(e,n)/r);let a=Math.floor((i+s)/2)+7;switch(a&3){case 0:a++;break;case 2:a--;break;case 3:throw new F("Dimensions could be not found.")}return a}calculateModuleSize(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2}calculateModuleSizeOneWay(e,t){const n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,n,r){let i=this.sizeOfBlackWhiteBlackRun(e,t,n,r),s=1,a=e-(n-e);a<0?(s=e/(e-a),a=0):a>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);let f=Math.floor(t-(r-t)*s);return s=1,f<0?(s=t/(t-f),f=0):f>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(f-t),f=this.image.getHeight()-1),a=Math.floor(e+(a-e)*s),i+=this.sizeOfBlackWhiteBlackRun(e,t,a,f),i-1}sizeOfBlackWhiteBlackRun(e,t,n,r){const i=Math.abs(r-t)>Math.abs(n-e);if(i){let I=e;e=t,t=I,I=n,n=r,r=I}const s=Math.abs(n-e),a=Math.abs(r-t);let f=-s/2;const u=e<n?1:-1,x=t<r?1:-1;let A=0;const E=n+u;for(let I=e,T=t;I!==E;I+=u){const O=i?T:I,D=i?I:T;if(A===1===this.image.get(O,D)){if(A===2)return k.distance(I,T,e,t);A++}if(f+=a,f>0){if(T===r)break;T+=x,f-=s}}return A===2?k.distance(n+u,r,e,t):NaN}findAlignmentInRegion(e,t,n,r){const i=Math.floor(r*e),s=Math.max(0,t-i),a=Math.min(this.image.getWidth()-1,t+i);if(a-s<e*3)throw new F("Alignment top exceeds estimated module size.");const f=Math.max(0,n-i),u=Math.min(this.image.getHeight()-1,n+i);if(u-f<e*3)throw new F("Alignment bottom exceeds estimated module size.");return new Gr(this.image,s,f,a-s,u-f,e,this.resultPointCallback).find()}}class Tn{constructor(){this.decoder=new Ya}getDecoder(){return this.decoder}decode(e,t){let n,r;if(t!=null&&t.get(Re.PURE_BARCODE)!==void 0){const f=Tn.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(f,t),r=Tn.NO_POINTS}else{const f=new Cr(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(f.getBits(),t),r=f.getPoints()}n.getOther()instanceof Fs&&n.getOther().applyMirroredCorrection(r);const i=new Ct(n.getText(),n.getRawBytes(),void 0,r,ae.QR_CODE,void 0),s=n.getByteSegments();s!==null&&i.putMetadata(ct.BYTE_SEGMENTS,s);const a=n.getECLevel();return a!==null&&i.putMetadata(ct.ERROR_CORRECTION_LEVEL,a),n.hasStructuredAppend()&&(i.putMetadata(ct.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),i.putMetadata(ct.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),i}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t===null||n===null)throw new F;const r=this.moduleSize(t,e);let i=t[1],s=n[1],a=t[0],f=n[0];if(a>=f||i>=s)throw new F;if(s-i!==f-a&&(f=a+(s-i),f>=e.getWidth()))throw new F;const u=Math.round((f-a+1)/r),x=Math.round((s-i+1)/r);if(u<=0||x<=0)throw new F;if(x!==u)throw new F;const A=Math.floor(r/2);i+=A,a+=A;const E=a+Math.floor((u-1)*r)-f;if(E>0){if(E>A)throw new F;a-=E}const I=i+Math.floor((x-1)*r)-s;if(I>0){if(I>A)throw new F;i-=I}const T=new tt(u,x);for(let O=0;O<x;O++){const D=i+Math.floor(O*r);for(let P=0;P<u;P++)e.get(a+Math.floor(P*r),D)&&T.set(P,O)}return T}static moduleSize(e,t){const n=t.getHeight(),r=t.getWidth();let i=e[0],s=e[1],a=!0,f=0;for(;i<r&&s<n;){if(a!==t.get(i,s)){if(++f===5)break;a=!a}i++,s++}if(i===r||s===n)throw new F;return(i-e[0])/7}}Tn.NO_POINTS=new Array;class ge{PDF417Common(){}static getBitCountSum(e){return k.sum(e)}static toIntArray(e){if(e==null||!e.length)return ge.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let n=0;for(const r of e)t[n++]=r;return t}static getCodeword(e){const t=me.binarySearch(ge.SYMBOL_TABLE,e&262143);return t<0?-1:(ge.CODEWORD_TABLE[t]-1)%ge.NUMBER_OF_CODEWORDS}}ge.NUMBER_OF_CODEWORDS=929,ge.MAX_CODEWORDS_IN_BARCODE=ge.NUMBER_OF_CODEWORDS-1,ge.MIN_ROWS_IN_BARCODE=3,ge.MAX_ROWS_IN_BARCODE=90,ge.MODULES_IN_CODEWORD=17,ge.MODULES_IN_STOP_PATTERN=18,ge.BARS_IN_MODULE=8,ge.EMPTY_INT_ARRAY=new Int32Array([]),ge.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ge.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Za{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class Ee{static detectMultiple(e,t,n){let r=e.getBlackMatrix(),i=Ee.detect(n,r);return i.length||(r=r.clone(),r.rotate180(),i=Ee.detect(n,r)),new Za(r,i)}static detect(e,t){const n=new Array;let r=0,i=0,s=!1;for(;r<t.getHeight();){const a=Ee.findVertices(t,r,i);if(a[0]==null&&a[3]==null){if(!s)break;s=!1,i=0;for(const f of n)f[1]!=null&&(r=Math.trunc(Math.max(r,f[1].getY()))),f[3]!=null&&(r=Math.max(r,Math.trunc(f[3].getY())));r+=Ee.ROW_STEP;continue}if(s=!0,n.push(a),!e)break;a[2]!=null?(i=Math.trunc(a[2].getX()),r=Math.trunc(a[2].getY())):(i=Math.trunc(a[4].getX()),r=Math.trunc(a[4].getY()))}return n}static findVertices(e,t,n){const r=e.getHeight(),i=e.getWidth(),s=new Array(8);return Ee.copyToResult(s,Ee.findRowsWithPattern(e,r,i,t,n,Ee.START_PATTERN),Ee.INDEXES_START_PATTERN),s[4]!=null&&(n=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),Ee.copyToResult(s,Ee.findRowsWithPattern(e,r,i,t,n,Ee.STOP_PATTERN),Ee.INDEXES_STOP_PATTERN),s}static copyToResult(e,t,n){for(let r=0;r<n.length;r++)e[n[r]]=t[r]}static findRowsWithPattern(e,t,n,r,i,s){const a=new Array(4);let f=!1;const u=new Int32Array(s.length);for(;r<t;r+=Ee.ROW_STEP){let A=Ee.findGuardPattern(e,i,r,n,!1,s,u);if(A!=null){for(;r>0;){const E=Ee.findGuardPattern(e,i,--r,n,!1,s,u);if(E!=null)A=E;else{r++;break}}a[0]=new B(A[0],r),a[1]=new B(A[1],r),f=!0;break}}let x=r+1;if(f){let A=0,E=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);for(;x<t;x++){const I=Ee.findGuardPattern(e,E[0],x,n,!1,s,u);if(I!=null&&Math.abs(E[0]-I[0])<Ee.MAX_PATTERN_DRIFT&&Math.abs(E[1]-I[1])<Ee.MAX_PATTERN_DRIFT)E=I,A=0;else{if(A>Ee.SKIPPED_ROW_COUNT_MAX)break;A++}}x-=A+1,a[2]=new B(E[0],x),a[3]=new B(E[1],x)}return x-r<Ee.BARCODE_MIN_HEIGHT&&me.fill(a,null),a}static findGuardPattern(e,t,n,r,i,s,a){me.fillWithin(a,0,a.length,0);let f=t,u=0;for(;e.get(f,n)&&f>0&&u++<Ee.MAX_PIXEL_DRIFT;)f--;let x=f,A=0,E=s.length;for(let I=i;x<r;x++)if(e.get(x,n)!==I)a[A]++;else{if(A===E-1){if(Ee.patternMatchVariance(a,s,Ee.MAX_INDIVIDUAL_VARIANCE)<Ee.MAX_AVG_VARIANCE)return new Int32Array([f,x]);f+=a[0]+a[1],J.arraycopy(a,2,a,0,A-1),a[A-1]=0,a[A]=0,A--}else A++;a[A]=1,I=!I}return A===E-1&&Ee.patternMatchVariance(a,s,Ee.MAX_INDIVIDUAL_VARIANCE)<Ee.MAX_AVG_VARIANCE?new Int32Array([f,x-1]):null}static patternMatchVariance(e,t,n){let r=e.length,i=0,s=0;for(let u=0;u<r;u++)i+=e[u],s+=t[u];if(i<s)return 1/0;let a=i/s;n*=a;let f=0;for(let u=0;u<r;u++){let x=e[u],A=t[u]*a,E=x>A?x-A:A-x;if(E>n)return 1/0;f+=E}return f/i}}Ee.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ee.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ee.MAX_AVG_VARIANCE=.42,Ee.MAX_INDIVIDUAL_VARIANCE=.8,Ee.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ee.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ee.MAX_PIXEL_DRIFT=3,Ee.MAX_PATTERN_DRIFT=5,Ee.SKIPPED_ROW_COUNT_MAX=25,Ee.ROW_STEP=5,Ee.BARCODE_MIN_HEIGHT=10;class Et{constructor(e,t){if(t.length===0)throw new R;this.field=e;let n=t.length;if(n>1&&t[0]===0){let r=1;for(;r<n&&t[r]===0;)r++;r===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-r),J.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let r=0;for(let i of this.coefficients)r=this.field.add(r,i);return r}let t=this.coefficients[0],n=this.coefficients.length;for(let r=1;r<n;r++)t=this.field.add(this.field.multiply(e,t),this.coefficients[r]);return t}add(e){if(!this.field.equals(e.field))throw new R("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let s=t;t=n,n=s}let r=new Int32Array(n.length),i=n.length-t.length;J.arraycopy(n,0,r,0,i);for(let s=i;s<n.length;s++)r[s]=this.field.add(t[s-i],n[s]);return new Et(this.field,r)}subtract(e){if(!this.field.equals(e.field))throw new R("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof Et?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new R("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new Et(this.field,new Int32Array([0]));let t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,s=new Int32Array(n+i-1);for(let a=0;a<n;a++){let f=t[a];for(let u=0;u<i;u++)s[a+u]=this.field.add(s[a+u],this.field.multiply(f,r[u]))}return new Et(this.field,s)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new Et(this.field,t)}multiplyScalar(e){if(e===0)return new Et(this.field,new Int32Array([0]));if(e===1)return this;let t=this.coefficients.length,n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=this.field.multiply(this.coefficients[r],e);return new Et(this.field,n)}multiplyByMonomial(e,t){if(e<0)throw new R;if(t===0)return new Et(this.field,new Int32Array([0]));let n=this.coefficients.length,r=new Int32Array(n+e);for(let i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new Et(this.field,r)}toString(){let e=new Ie;for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(t===0||n!==1)&&e.append(n),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class ja{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new R;return this.logTable[e]}inverse(e){if(e===0)throw new _;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class vi extends ja{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let n=1;for(let r=0;r<e;r++)this.expTable[r]=n,n=n*t%e;for(let r=0;r<e-1;r++)this.logTable[this.expTable[r]]=r;this.zero=new Et(this,new Int32Array([0])),this.one=new Et(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new R;if(t===0)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new Et(this,n)}}vi.PDF417_GF=new vi(ge.NUMBER_OF_CODEWORDS,3);class ks{constructor(){this.field=vi.PDF417_GF}decode(e,t,n){let r=new Et(this.field,e),i=new Int32Array(t),s=!1;for(let T=t;T>0;T--){let O=r.evaluateAt(this.field.exp(T));i[t-T]=O,O!==0&&(s=!0)}if(!s)return 0;let a=this.field.getOne();if(n!=null)for(const T of n){let O=this.field.exp(e.length-1-T),D=new Et(this.field,new Int32Array([this.field.subtract(0,O),1]));a=a.multiply(D)}let f=new Et(this.field,i),u=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),f,t),x=u[0],A=u[1],E=this.findErrorLocations(x),I=this.findErrorMagnitudes(A,x,E);for(let T=0;T<E.length;T++){let O=e.length-1-this.field.log(E[T]);if(O<0)throw ee.getChecksumInstance();e[O]=this.field.subtract(e[O],I[T])}return E.length}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let E=e;e=t,t=E}let r=e,i=t,s=this.field.getZero(),a=this.field.getOne();for(;i.getDegree()>=Math.round(n/2);){let E=r,I=s;if(r=i,s=a,r.isZero())throw ee.getChecksumInstance();i=E;let T=this.field.getZero(),O=r.getCoefficient(r.getDegree()),D=this.field.inverse(O);for(;i.getDegree()>=r.getDegree()&&!i.isZero();){let P=i.getDegree()-r.getDegree(),Z=this.field.multiply(i.getCoefficient(i.getDegree()),D);T=T.add(this.field.buildMonomial(P,Z)),i=i.subtract(r.multiplyByMonomial(P,Z))}a=T.multiply(s).subtract(I).negative()}let f=a.getCoefficient(0);if(f===0)throw ee.getChecksumInstance();let u=this.field.inverse(f),x=a.multiply(u),A=i.multiply(u);return[x,A]}findErrorLocations(e){let t=e.getDegree(),n=new Int32Array(t),r=0;for(let i=1;i<this.field.getSize()&&r<t;i++)e.evaluateAt(i)===0&&(n[r]=this.field.inverse(i),r++);if(r!==t)throw ee.getChecksumInstance();return n}findErrorMagnitudes(e,t,n){let r=t.getDegree(),i=new Int32Array(r);for(let u=1;u<=r;u++)i[r-u]=this.field.multiply(u,t.getCoefficient(u));let s=new Et(this.field,i),a=n.length,f=new Int32Array(a);for(let u=0;u<a;u++){let x=this.field.inverse(n[u]),A=this.field.subtract(0,e.evaluateAt(x)),E=this.field.inverse(s.evaluateAt(x));f[u]=this.field.multiply(A,E)}return f}}class Un{constructor(e,t,n,r,i){e instanceof Un?this.constructor_2(e):this.constructor_1(e,t,n,r,i)}constructor_1(e,t,n,r,i){const s=t==null||n==null,a=r==null||i==null;if(s&&a)throw new F;s?(t=new B(0,r.getY()),n=new B(0,i.getY())):a&&(r=new B(e.getWidth()-1,t.getY()),i=new B(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return e==null?t:t==null?e:new Un(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,n){let r=this.topLeft,i=this.bottomLeft,s=this.topRight,a=this.bottomRight;if(e>0){let f=n?this.topLeft:this.topRight,u=Math.trunc(f.getY()-e);u<0&&(u=0);let x=new B(f.getX(),u);n?r=x:s=x}if(t>0){let f=n?this.bottomLeft:this.bottomRight,u=Math.trunc(f.getY()+t);u>=this.image.getHeight()&&(u=this.image.getHeight()-1);let x=new B(f.getX(),u);n?i=x:a=x}return new Un(this.image,r,i,s,a)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ka{constructor(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Er{constructor(){this.buffer=""}static form(e,t){let n=-1;function r(s,a,f,u,x,A){if(s==="%%")return"%";if(t[++n]===void 0)return;s=u?parseInt(u.substr(1)):void 0;let E=x?parseInt(x.substr(1)):void 0,I;switch(A){case"s":I=t[n];break;case"c":I=t[n][0];break;case"f":I=parseFloat(t[n]).toFixed(s);break;case"p":I=parseFloat(t[n]).toPrecision(s);break;case"e":I=parseFloat(t[n]).toExponential(s);break;case"x":I=parseInt(t[n]).toString(E||16);break;case"d":I=parseFloat(parseInt(t[n],E||10).toPrecision(s)).toFixed(0);break}I=typeof I=="object"?JSON.stringify(I):(+I).toString(E);let T=parseInt(f),O=f&&f[0]+""=="0"?"0":" ";for(;I.length<T;)I=a!==void 0?I+O:O+I;return I}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,r)}format(e,...t){this.buffer+=Er.form(e,t)}toString(){return this.buffer}}class mr{constructor(e){this.boundingBox=new Un(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(t!=null)return t;for(let n=1;n<mr.MAX_NEARBY_DISTANCE;n++){let r=this.imageRowToCodewordIndex(e)-n;if(r>=0&&(t=this.codewords[r],t!=null)||(r=this.imageRowToCodewordIndex(e)+n,r<this.codewords.length&&(t=this.codewords[r],t!=null)))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new Er;let t=0;for(const n of this.codewords){if(n==null){e.format("%3d:    |   %n",t++);continue}e.format("%3d: %3d|%3d%n",t++,n.getRowNumber(),n.getValue())}return e.toString()}}mr.MAX_NEARBY_DISTANCE=5;class br{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[n,r]of this.values.entries()){const i={getKey:()=>n,getValue:()=>r};i.getValue()>e?(e=i.getValue(),t=[],t.push(i.getKey())):i.getValue()===e&&t.push(i.getKey())}return ge.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class Us extends mr{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())e!=null&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(r.getY())),a=this.imageRowToCodewordIndex(Math.trunc(i.getY())),f=-1,u=1,x=0;for(let A=s;A<a;A++){if(t[A]==null)continue;let E=t[A],I=E.getRowNumber()-f;if(I===0)x++;else if(I===1)u=Math.max(u,x),x=1,f=E.getRowNumber();else if(I<0||E.getRowNumber()>=e.getRowCount()||I>A)t[A]=null;else{let T;u>2?T=(u-2)*I:T=I;let O=T>=A;for(let D=1;D<=T&&!O;D++)O=t[A-D]!=null;O?t[A]=null:(f=E.getRowNumber(),x=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let n of this.getCodewords())if(n!=null){let r=n.getRowNumber();if(r>=t.length)continue;t[r]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),s=this.imageRowToCodewordIndex(Math.trunc(r.getY())),a=this.getCodewords(),f=-1;for(let u=i;u<s;u++){if(a[u]==null)continue;let x=a[u];x.setRowNumberAsRowIndicatorColumn();let A=x.getRowNumber()-f;A===0||(A===1?f=x.getRowNumber():x.getRowNumber()>=e.getRowCount()?a[u]=null:f=x.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new br,n=new br,r=new br,i=new br;for(let a of e){if(a==null)continue;a.setRowNumberAsRowIndicatorColumn();let f=a.getValue()%30,u=a.getRowNumber();switch(this._isLeft||(u+=2),u%3){case 0:n.setValue(f*3+1);break;case 1:i.setValue(f/3),r.setValue(f%3);break;case 2:t.setValue(f+1);break}}if(t.getValue().length===0||n.getValue().length===0||r.getValue().length===0||i.getValue().length===0||t.getValue()[0]<1||n.getValue()[0]+r.getValue()[0]<ge.MIN_ROWS_IN_BARCODE||n.getValue()[0]+r.getValue()[0]>ge.MAX_ROWS_IN_BARCODE)return null;let s=new Ka(t.getValue()[0],n.getValue()[0],r.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(e,s),s}removeIncorrectCodewords(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(e[n]==null)continue;let i=r.getValue()%30,s=r.getRowNumber();if(s>t.getRowCount()){e[n]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:i*3+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:(Math.trunc(i/3)!==t.getErrorCorrectionLevel()||i%3!==t.getRowCountLowerPart())&&(e[n]=null);break;case 2:i+1!==t.getColumnCount()&&(e[n]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ir{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=ge.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let n=this.detectionResultColumns[t].getCodewords();for(let r=0;r<n.length;r++)n[r]!=null&&(n[r].hasValidRowNumber()||this.adjustRowNumbers(t,r,n))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++)if(e[n]!=null&&t[n]!=null&&e[n].getRowNumber()===t[n].getRowNumber())for(let r=1;r<=this.barcodeColumnCount;r++){let i=this.detectionResultColumns[r].getCodewords()[n];i!=null&&(i.setRowNumber(e[n].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[r].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++){if(t[n]==null)continue;let r=t[n].getRowNumber(),i=0;for(let s=this.barcodeColumnCount+1;s>0&&i<this.ADJUST_ROW_NUMBER_SKIP;s--){let a=this.detectionResultColumns[s].getCodewords()[n];a!=null&&(i=Ir.adjustRowNumberIfValid(r,i,a),a.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let n=0;n<t.length;n++){if(t[n]==null)continue;let r=t[n].getRowNumber(),i=0;for(let s=1;s<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;s++){let a=this.detectionResultColumns[s].getCodewords()[n];a!=null&&(i=Ir.adjustRowNumberIfValid(r,i,a),a.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,n){if(!this.detectionResultColumns[e-1])return;let r=n[t],i=this.detectionResultColumns[e-1].getCodewords(),s=i;this.detectionResultColumns[e+1]!=null&&(s=this.detectionResultColumns[e+1].getCodewords());let a=new Array(14);a[2]=i[t],a[3]=s[t],t>0&&(a[0]=n[t-1],a[4]=i[t-1],a[5]=s[t-1]),t>1&&(a[8]=n[t-2],a[10]=i[t-2],a[11]=s[t-2]),t<n.length-1&&(a[1]=n[t+1],a[6]=i[t+1],a[7]=s[t+1]),t<n.length-2&&(a[9]=n[t+2],a[12]=i[t+2],a[13]=s[t+2]);for(let f of a)if(Ir.adjustRowNumber(r,f))return}static adjustRowNumber(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new Er;for(let n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(let r=0;r<this.barcodeColumnCount+2;r++){if(this.detectionResultColumns[r]==null){t.format("    |   ");continue}let i=this.detectionResultColumns[r].getCodewords()[n];if(i==null){t.format("    |   ");continue}t.format(" %3d|%3d",i.getRowNumber(),i.getValue())}t.format("%n")}return t.toString()}}class yr{constructor(e,t,n,r){this.rowNumber=yr.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(n),this.value=Math.trunc(r)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==yr.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}yr.BARCODE_ROW_UNKNOWN=-1;class vt{static initialize(){for(let e=0;e<ge.SYMBOL_TABLE.length;e++){let t=ge.SYMBOL_TABLE[e],n=t&1;for(let r=0;r<ge.BARS_IN_MODULE;r++){let i=0;for(;(t&1)===n;)i+=1,t>>=1;n=t&1,vt.RATIOS_TABLE[e]||(vt.RATIOS_TABLE[e]=new Array(ge.BARS_IN_MODULE)),vt.RATIOS_TABLE[e][ge.BARS_IN_MODULE-r-1]=Math.fround(i/ge.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=vt.getDecodedCodewordValue(vt.sampleBitCounts(e));return t!==-1?t:vt.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=k.sum(e),n=new Int32Array(ge.BARS_IN_MODULE),r=0,i=0;for(let s=0;s<ge.MODULES_IN_CODEWORD;s++){let a=t/(2*ge.MODULES_IN_CODEWORD)+s*t/ge.MODULES_IN_CODEWORD;i+e[r]<=a&&(i+=e[r],r++),n[r]++}return n}static getDecodedCodewordValue(e){let t=vt.getBitValue(e);return ge.getCodeword(t)===-1?-1:t}static getBitValue(e){let t=0;for(let n=0;n<e.length;n++)for(let r=0;r<e[n];r++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=k.sum(e),n=new Array(ge.BARS_IN_MODULE);if(t>1)for(let s=0;s<n.length;s++)n[s]=Math.fround(e[s]/t);let r=$.MAX_VALUE,i=-1;this.bSymbolTableReady||vt.initialize();for(let s=0;s<vt.RATIOS_TABLE.length;s++){let a=0,f=vt.RATIOS_TABLE[s];for(let u=0;u<ge.BARS_IN_MODULE;u++){let x=Math.fround(f[u]-n[u]);if(a+=Math.fround(x*x),a>=r)break}a<r&&(r=a,i=ge.SYMBOL_TABLE[s])}return i}}vt.bSymbolTableReady=!1,vt.RATIOS_TABLE=new Array(ge.SYMBOL_TABLE.length).map(w=>new Array(ge.BARS_IN_MODULE));class Vs{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class Hs{static parseLong(e,t=void 0){return parseInt(e,t)}}class Ws extends p{}Ws.kind="NullPointerException";class qa{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,n){if(e==null)throw new Ws;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new ke;if(n===0)return;for(let r=0;r<n;r++)this.write(e[t+r])}flush(){}close(){}}class Qa extends p{}class Ja extends qa{constructor(e=32){if(super(),this.count=0,e<0)throw new R("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let n=this.buf.length<<1;if(n-e<0&&(n=e),n<0){if(e<0)throw new Qa;n=q.MAX_VALUE}this.buf=me.copyOfUint8Array(this.buf,n)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new ke;this.ensureCapacity(this.count+n),J.arraycopy(e,t,this.buf,this.count,n),this.count+=n}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return me.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var Ye;(function(w){w[w.ALPHA=0]="ALPHA",w[w.LOWER=1]="LOWER",w[w.MIXED=2]="MIXED",w[w.PUNCT=3]="PUNCT",w[w.ALPHA_SHIFT=4]="ALPHA_SHIFT",w[w.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ye||(Ye={}));function Gs(){if(typeof window<"u")return window.BigInt||null;if(typeof Sr<"u")return Sr.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Xr;function Sn(w){if(typeof Xr>"u"&&(Xr=Gs()),Xr===null)throw new Error("BigInt is not supported!");return Xr(w)}function $a(){let w=[];w[0]=Sn(1);let e=Sn(900);w[1]=e;for(let t=2;t<16;t++)w[t]=w[t-1]*e;return w}class v{static decode(e,t){let n=new Ie(""),r=W.ISO8859_1;n.enableDecoding(r);let i=1,s=e[i++],a=new Vs;for(;i<e[0];){switch(s){case v.TEXT_COMPACTION_MODE_LATCH:i=v.textCompaction(e,i,n);break;case v.BYTE_COMPACTION_MODE_LATCH:case v.BYTE_COMPACTION_MODE_LATCH_6:i=v.byteCompaction(s,e,r,i,n);break;case v.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case v.NUMERIC_COMPACTION_MODE_LATCH:i=v.numericCompaction(e,i,n);break;case v.ECI_CHARSET:W.getCharacterSetECIByValue(e[i++]);break;case v.ECI_GENERAL_PURPOSE:i+=2;break;case v.ECI_USER_DEFINED:i++;break;case v.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=v.decodeMacroBlock(e,i,a);break;case v.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case v.MACRO_PDF417_TERMINATOR:throw new j;default:i--,i=v.textCompaction(e,i,n);break}if(i<e.length)s=e[i++];else throw j.getFormatInstance()}if(n.length()===0)throw j.getFormatInstance();let f=new Wt(null,n.toString(),null,t);return f.setOther(a),f}static decodeMacroBlock(e,t,n){if(t+v.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw j.getFormatInstance();let r=new Int32Array(v.NUMBER_OF_SEQUENCE_CODEWORDS);for(let a=0;a<v.NUMBER_OF_SEQUENCE_CODEWORDS;a++,t++)r[a]=e[t];n.setSegmentIndex(q.parseInt(v.decodeBase900toBase10(r,v.NUMBER_OF_SEQUENCE_CODEWORDS)));let i=new Ie;t=v.textCompaction(e,t,i),n.setFileId(i.toString());let s=-1;for(e[t]===v.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=t+1);t<e[0];)switch(e[t]){case v.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case v.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let a=new Ie;t=v.textCompaction(e,t+1,a),n.setFileName(a.toString());break;case v.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let f=new Ie;t=v.textCompaction(e,t+1,f),n.setSender(f.toString());break;case v.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let u=new Ie;t=v.textCompaction(e,t+1,u),n.setAddressee(u.toString());break;case v.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let x=new Ie;t=v.numericCompaction(e,t+1,x),n.setSegmentCount(q.parseInt(x.toString()));break;case v.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let A=new Ie;t=v.numericCompaction(e,t+1,A),n.setTimestamp(Hs.parseLong(A.toString()));break;case v.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let E=new Ie;t=v.numericCompaction(e,t+1,E),n.setChecksum(q.parseInt(E.toString()));break;case v.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let I=new Ie;t=v.numericCompaction(e,t+1,I),n.setFileSize(Hs.parseLong(I.toString()));break;default:throw j.getFormatInstance()}break;case v.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw j.getFormatInstance()}if(s!==-1){let a=t-s;n.isLastSegment()&&a--,n.setOptionalData(me.copyOfRange(e,s,s+a))}return t}static textCompaction(e,t,n){let r=new Int32Array((e[0]-t)*2),i=new Int32Array((e[0]-t)*2),s=0,a=!1;for(;t<e[0]&&!a;){let f=e[t++];if(f<v.TEXT_COMPACTION_MODE_LATCH)r[s]=f/30,r[s+1]=f%30,s+=2;else switch(f){case v.TEXT_COMPACTION_MODE_LATCH:r[s++]=v.TEXT_COMPACTION_MODE_LATCH;break;case v.BYTE_COMPACTION_MODE_LATCH:case v.BYTE_COMPACTION_MODE_LATCH_6:case v.NUMERIC_COMPACTION_MODE_LATCH:case v.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case v.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case v.MACRO_PDF417_TERMINATOR:t--,a=!0;break;case v.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r[s]=v.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,f=e[t++],i[s]=f,s++;break}}return v.decodeTextCompaction(r,i,s,n),t}static decodeTextCompaction(e,t,n,r){let i=Ye.ALPHA,s=Ye.ALPHA,a=0;for(;a<n;){let f=e[a],u="";switch(i){case Ye.ALPHA:if(f<26)u=String.fromCharCode(65+f);else switch(f){case 26:u=" ";break;case v.LL:i=Ye.LOWER;break;case v.ML:i=Ye.MIXED;break;case v.PS:s=i,i=Ye.PUNCT_SHIFT;break;case v.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a]);break;case v.TEXT_COMPACTION_MODE_LATCH:i=Ye.ALPHA;break}break;case Ye.LOWER:if(f<26)u=String.fromCharCode(97+f);else switch(f){case 26:u=" ";break;case v.AS:s=i,i=Ye.ALPHA_SHIFT;break;case v.ML:i=Ye.MIXED;break;case v.PS:s=i,i=Ye.PUNCT_SHIFT;break;case v.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a]);break;case v.TEXT_COMPACTION_MODE_LATCH:i=Ye.ALPHA;break}break;case Ye.MIXED:if(f<v.PL)u=v.MIXED_CHARS[f];else switch(f){case v.PL:i=Ye.PUNCT;break;case 26:u=" ";break;case v.LL:i=Ye.LOWER;break;case v.AL:i=Ye.ALPHA;break;case v.PS:s=i,i=Ye.PUNCT_SHIFT;break;case v.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a]);break;case v.TEXT_COMPACTION_MODE_LATCH:i=Ye.ALPHA;break}break;case Ye.PUNCT:if(f<v.PAL)u=v.PUNCT_CHARS[f];else switch(f){case v.PAL:i=Ye.ALPHA;break;case v.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a]);break;case v.TEXT_COMPACTION_MODE_LATCH:i=Ye.ALPHA;break}break;case Ye.ALPHA_SHIFT:if(i=s,f<26)u=String.fromCharCode(65+f);else switch(f){case 26:u=" ";break;case v.TEXT_COMPACTION_MODE_LATCH:i=Ye.ALPHA;break}break;case Ye.PUNCT_SHIFT:if(i=s,f<v.PAL)u=v.PUNCT_CHARS[f];else switch(f){case v.PAL:i=Ye.ALPHA;break;case v.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[a]);break;case v.TEXT_COMPACTION_MODE_LATCH:i=Ye.ALPHA;break}break}u!==""&&r.append(u),a++}}static byteCompaction(e,t,n,r,i){let s=new Ja,a=0,f=0,u=!1;switch(e){case v.BYTE_COMPACTION_MODE_LATCH:let x=new Int32Array(6),A=t[r++];for(;r<t[0]&&!u;)switch(x[a++]=A,f=900*f+A,A=t[r++],A){case v.TEXT_COMPACTION_MODE_LATCH:case v.BYTE_COMPACTION_MODE_LATCH:case v.NUMERIC_COMPACTION_MODE_LATCH:case v.BYTE_COMPACTION_MODE_LATCH_6:case v.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case v.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case v.MACRO_PDF417_TERMINATOR:r--,u=!0;break;default:if(a%5===0&&a>0){for(let E=0;E<6;++E)s.write(Number(Sn(f)>>Sn(8*(5-E))));f=0,a=0}break}r===t[0]&&A<v.TEXT_COMPACTION_MODE_LATCH&&(x[a++]=A);for(let E=0;E<a;E++)s.write(x[E]);break;case v.BYTE_COMPACTION_MODE_LATCH_6:for(;r<t[0]&&!u;){let E=t[r++];if(E<v.TEXT_COMPACTION_MODE_LATCH)a++,f=900*f+E;else switch(E){case v.TEXT_COMPACTION_MODE_LATCH:case v.BYTE_COMPACTION_MODE_LATCH:case v.NUMERIC_COMPACTION_MODE_LATCH:case v.BYTE_COMPACTION_MODE_LATCH_6:case v.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case v.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case v.MACRO_PDF417_TERMINATOR:r--,u=!0;break}if(a%5===0&&a>0){for(let I=0;I<6;++I)s.write(Number(Sn(f)>>Sn(8*(5-I))));f=0,a=0}}break}return i.append(Xe.decode(s.toByteArray(),n)),r}static numericCompaction(e,t,n){let r=0,i=!1,s=new Int32Array(v.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!i;){let a=e[t++];if(t===e[0]&&(i=!0),a<v.TEXT_COMPACTION_MODE_LATCH)s[r]=a,r++;else switch(a){case v.TEXT_COMPACTION_MODE_LATCH:case v.BYTE_COMPACTION_MODE_LATCH:case v.BYTE_COMPACTION_MODE_LATCH_6:case v.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case v.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case v.MACRO_PDF417_TERMINATOR:t--,i=!0;break}(r%v.MAX_NUMERIC_CODEWORDS===0||a===v.NUMERIC_COMPACTION_MODE_LATCH||i)&&r>0&&(n.append(v.decodeBase900toBase10(s,r)),r=0)}return t}static decodeBase900toBase10(e,t){let n=Sn(0);for(let i=0;i<t;i++)n+=v.EXP900[t-i-1]*Sn(e[i]);let r=n.toString();if(r.charAt(0)!=="1")throw new j;return r.substring(1)}}v.TEXT_COMPACTION_MODE_LATCH=900,v.BYTE_COMPACTION_MODE_LATCH=901,v.NUMERIC_COMPACTION_MODE_LATCH=902,v.BYTE_COMPACTION_MODE_LATCH_6=924,v.ECI_USER_DEFINED=925,v.ECI_GENERAL_PURPOSE=926,v.ECI_CHARSET=927,v.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,v.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,v.MACRO_PDF417_TERMINATOR=922,v.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,v.MAX_NUMERIC_CODEWORDS=15,v.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,v.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,v.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,v.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,v.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,v.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,v.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,v.PL=25,v.LL=27,v.AS=27,v.ML=28,v.AL=28,v.PS=29,v.PAL=29,v.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,v.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",v.EXP900=Gs()?$a():[],v.NUMBER_OF_SEQUENCE_CODEWORDS=2;class be{constructor(){}static decode(e,t,n,r,i,s,a){let f=new Un(e,t,n,r,i),u=null,x=null,A;for(let T=!0;;T=!1){if(t!=null&&(u=be.getRowIndicatorColumn(e,f,t,!0,s,a)),r!=null&&(x=be.getRowIndicatorColumn(e,f,r,!1,s,a)),A=be.merge(u,x),A==null)throw F.getNotFoundInstance();let O=A.getBoundingBox();if(T&&O!=null&&(O.getMinY()<f.getMinY()||O.getMaxY()>f.getMaxY()))f=O;else break}A.setBoundingBox(f);let E=A.getBarcodeColumnCount()+1;A.setDetectionResultColumn(0,u),A.setDetectionResultColumn(E,x);let I=u!=null;for(let T=1;T<=E;T++){let O=I?T:E-T;if(A.getDetectionResultColumn(O)!==void 0)continue;let D;O===0||O===E?D=new Us(f,O===0):D=new mr(f),A.setDetectionResultColumn(O,D);let P=-1,Z=P;for(let K=f.getMinY();K<=f.getMaxY();K++){if(P=be.getStartColumn(A,O,K,I),P<0||P>f.getMaxX()){if(Z===-1)continue;P=Z}let X=be.detectCodeword(e,f.getMinX(),f.getMaxX(),I,P,K,s,a);X!=null&&(D.setCodeword(K,X),Z=P,s=Math.min(s,X.getWidth()),a=Math.max(a,X.getWidth()))}}return be.createDecoderResult(A)}static merge(e,t){if(e==null&&t==null)return null;let n=be.getBarcodeMetadata(e,t);if(n==null)return null;let r=Un.merge(be.adjustBoundingBox(e),be.adjustBoundingBox(t));return new Ir(n,r)}static adjustBoundingBox(e){if(e==null)return null;let t=e.getRowHeights();if(t==null)return null;let n=be.getMax(t),r=0;for(let a of t)if(r+=n-a,a>0)break;let i=e.getCodewords();for(let a=0;r>0&&i[a]==null;a++)r--;let s=0;for(let a=t.length-1;a>=0&&(s+=n-t[a],!(t[a]>0));a--);for(let a=i.length-1;s>0&&i[a]==null;a--)s--;return e.getBoundingBox().addMissingRows(r,s,e.isLeft())}static getMax(e){let t=-1;for(let n of e)t=Math.max(t,n);return t}static getBarcodeMetadata(e,t){let n;if(e==null||(n=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();let r;return t==null||(r=t.getBarcodeMetadata())==null?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n}static getRowIndicatorColumn(e,t,n,r,i,s){let a=new Us(t,r);for(let f=0;f<2;f++){let u=f===0?1:-1,x=Math.trunc(Math.trunc(n.getX()));for(let A=Math.trunc(Math.trunc(n.getY()));A<=t.getMaxY()&&A>=t.getMinY();A+=u){let E=be.detectCodeword(e,0,e.getWidth(),r,x,A,i,s);E!=null&&(a.setCodeword(A,E),r?x=E.getStartX():x=E.getEndX())}}return a}static adjustCodewordCount(e,t){let n=t[0][1],r=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-be.getNumberOfECCodeWords(e.getBarcodeECLevel());if(r.length===0){if(i<1||i>ge.MAX_CODEWORDS_IN_BARCODE)throw F.getNotFoundInstance();n.setValue(i)}else r[0]!==i&&n.setValue(i)}static createDecoderResult(e){let t=be.createBarcodeMatrix(e);be.adjustCodewordCount(e,t);let n=new Array,r=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],s=new Array;for(let f=0;f<e.getBarcodeRowCount();f++)for(let u=0;u<e.getBarcodeColumnCount();u++){let x=t[f][u+1].getValue(),A=f*e.getBarcodeColumnCount()+u;x.length===0?n.push(A):x.length===1?r[A]=x[0]:(s.push(A),i.push(x))}let a=new Array(i.length);for(let f=0;f<a.length;f++)a[f]=i[f];return be.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),r,ge.toIntArray(n),ge.toIntArray(s),a)}static createDecoderResultFromAmbiguousValues(e,t,n,r,i){let s=new Int32Array(r.length),a=100;for(;a-- >0;){for(let f=0;f<s.length;f++)t[r[f]]=i[f][s[f]];try{return be.decodeCodewords(t,e,n)}catch(f){if(!(f instanceof ee))throw f}if(s.length===0)throw ee.getChecksumInstance();for(let f=0;f<s.length;f++)if(s[f]<i[f].length-1){s[f]++;break}else if(s[f]=0,f===s.length-1)throw ee.getChecksumInstance()}throw ee.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let r=0;r<t.length;r++)for(let i=0;i<t[r].length;i++)t[r][i]=new br;let n=0;for(let r of e.getDetectionResultColumns()){if(r!=null){for(let i of r.getCodewords())if(i!=null){let s=i.getRowNumber();if(s>=0){if(s>=t.length)continue;t[s][n].setValue(i.getValue())}}}n++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,n,r){let i=r?1:-1,s=null;if(be.isValidBarcodeColumn(e,t-i)&&(s=e.getDetectionResultColumn(t-i).getCodeword(n)),s!=null)return r?s.getEndX():s.getStartX();if(s=e.getDetectionResultColumn(t).getCodewordNearby(n),s!=null)return r?s.getStartX():s.getEndX();if(be.isValidBarcodeColumn(e,t-i)&&(s=e.getDetectionResultColumn(t-i).getCodewordNearby(n)),s!=null)return r?s.getEndX():s.getStartX();let a=0;for(;be.isValidBarcodeColumn(e,t-i);){t-=i;for(let f of e.getDetectionResultColumn(t).getCodewords())if(f!=null)return(r?f.getEndX():f.getStartX())+i*a*(f.getEndX()-f.getStartX());a++}return r?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,n,r,i,s,a,f){i=be.adjustCodewordStartColumn(e,t,n,r,i,s);let u=be.getModuleBitCount(e,t,n,r,i,s);if(u==null)return null;let x,A=k.sum(u);if(r)x=i+A;else{for(let T=0;T<u.length/2;T++){let O=u[T];u[T]=u[u.length-1-T],u[u.length-1-T]=O}x=i,i=x-A}if(!be.checkCodewordSkew(A,a,f))return null;let E=vt.getDecodedValue(u),I=ge.getCodeword(E);return I===-1?null:new yr(i,x,be.getCodewordBucketNumber(E),I)}static getModuleBitCount(e,t,n,r,i,s){let a=i,f=new Int32Array(8),u=0,x=r?1:-1,A=r;for(;(r?a<n:a>=t)&&u<f.length;)e.get(a,s)===A?(f[u]++,a+=x):(u++,A=!A);return u===f.length||a===(r?n:t)&&u===f.length-1?f:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,n,r,i,s){let a=i,f=r?-1:1;for(let u=0;u<2;u++){for(;(r?a>=t:a<n)&&r===e.get(a,s);){if(Math.abs(i-a)>be.CODEWORD_SKEW_SIZE)return i;a+=f}f=-f,r=!r}return a}static checkCodewordSkew(e,t,n){return t-be.CODEWORD_SKEW_SIZE<=e&&e<=n+be.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,n){if(e.length===0)throw j.getFormatInstance();let r=1<<t+1,i=be.correctErrors(e,n,r);be.verifyCodewordCount(e,r);let s=v.decode(e,""+t);return s.setErrorsCorrected(i),s.setErasures(n.length),s}static correctErrors(e,t,n){if(t!=null&&t.length>n/2+be.MAX_ERRORS||n<0||n>be.MAX_EC_CODEWORDS)throw ee.getChecksumInstance();return be.errorCorrection.decode(e,n,t)}static verifyCodewordCount(e,t){if(e.length<4)throw j.getFormatInstance();let n=e[0];if(n>e.length)throw j.getFormatInstance();if(n===0)if(t<e.length)e[0]=e.length-t;else throw j.getFormatInstance()}static getBitCountForCodeword(e){let t=new Int32Array(8),n=0,r=t.length-1;for(;!((e&1)!==n&&(n=e&1,r--,r<0));)t[r]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return be.getCodewordBucketNumber(be.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new Er;for(let n=0;n<e.length;n++){t.format("Row %2d: ",n);for(let r=0;r<e[n].length;r++){let i=e[n][r];i.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()}}be.CODEWORD_SKEW_SIZE=2,be.MAX_ERRORS=3,be.MAX_EC_CODEWORDS=512,be.errorCorrection=new ks;class mt{decode(e,t=null){let n=mt.decode(e,t,!1);if(n==null||n.length===0||n[0]==null)throw F.getNotFoundInstance();return n[0]}decodeMultiple(e,t=null){try{return mt.decode(e,t,!0)}catch(n){throw n instanceof j||n instanceof ee?F.getNotFoundInstance():n}}static decode(e,t,n){const r=new Array,i=Ee.detectMultiple(e,t,n);for(const s of i.getPoints()){const a=be.decode(i.getBits(),s[4],s[5],s[6],s[7],mt.getMinCodewordWidth(s),mt.getMaxCodewordWidth(s)),f=new Ct(a.getText(),a.getRawBytes(),void 0,s,ae.PDF_417);f.putMetadata(ct.ERROR_CORRECTION_LEVEL,a.getECLevel());const u=a.getOther();u!=null&&f.putMetadata(ct.PDF417_EXTRA_METADATA,u),r.push(f)}return r.map(s=>s)}static getMaxWidth(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return e==null||t==null?q.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(mt.getMaxWidth(e[0],e[4]),mt.getMaxWidth(e[6],e[2])*ge.MODULES_IN_CODEWORD/ge.MODULES_IN_STOP_PATTERN),Math.max(mt.getMaxWidth(e[1],e[5]),mt.getMaxWidth(e[7],e[3])*ge.MODULES_IN_CODEWORD/ge.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(mt.getMinWidth(e[0],e[4]),mt.getMinWidth(e[6],e[2])*ge.MODULES_IN_CODEWORD/ge.MODULES_IN_STOP_PATTERN),Math.min(mt.getMinWidth(e[1],e[5]),mt.getMinWidth(e[7],e[3])*ge.MODULES_IN_CODEWORD/ge.MODULES_IN_STOP_PATTERN)))}reset(){}}class Yr extends p{}Yr.kind="ReaderException";class Xs{constructor(e,t){this.verbose=e===!0,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const t=!d(e)&&e.get(Re.TRY_HARDER)===!0,n=d(e)?null:e.get(Re.POSSIBLE_FORMATS),r=new Array;if(!d(n)){const i=n.some(s=>s===ae.UPC_A||s===ae.UPC_E||s===ae.EAN_13||s===ae.EAN_8||s===ae.CODABAR||s===ae.CODE_39||s===ae.CODE_93||s===ae.CODE_128||s===ae.ITF||s===ae.RSS_14||s===ae.RSS_EXPANDED);i&&!t&&r.push(new er(e,this.verbose)),n.includes(ae.QR_CODE)&&r.push(new Tn),n.includes(ae.DATA_MATRIX)&&r.push(new _n),n.includes(ae.AZTEC)&&r.push(new qt),n.includes(ae.PDF_417)&&r.push(new mt),i&&t&&r.push(new er(e,this.verbose))}r.length===0&&(t||r.push(new er(e,this.verbose)),r.push(new Tn),r.push(new _n),r.push(new qt),r.push(new mt),t&&r.push(new er(e,this.verbose))),this.readers=r}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new Yr("No readers where selected, nothing can be read.");for(const t of this.readers)try{return t.decode(e,this.hints)}catch(n){if(n instanceof Yr)continue}throw new F("No MultiFormat Readers were able to detect the code.")}}class e1 extends on{constructor(e=null,t=500){const n=new Xs;n.setHints(e),super(n,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class t1 extends on{constructor(e=500){super(new mt,e)}}class n1 extends on{constructor(e=500){super(new Tn,e)}}var Pi;(function(w){w[w.ERROR_CORRECTION=0]="ERROR_CORRECTION",w[w.CHARACTER_SET=1]="CHARACTER_SET",w[w.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",w[w.MIN_SIZE=3]="MIN_SIZE",w[w.MAX_SIZE=4]="MAX_SIZE",w[w.MARGIN=5]="MARGIN",w[w.PDF417_COMPACT=6]="PDF417_COMPACT",w[w.PDF417_COMPACTION=7]="PDF417_COMPACTION",w[w.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",w[w.AZTEC_LAYERS=9]="AZTEC_LAYERS",w[w.QR_VERSION=10]="QR_VERSION"})(Pi||(Pi={}));var dt=Pi;class Li{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new xt(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let n=t[t.length-1];const r=this.field;for(let i=t.length;i<=e;i++){const s=n.multiply(new xt(r,Int32Array.from([1,r.exp(i-1+r.getGeneratorBase())])));t.push(s),n=s}}return t[e]}encode(e,t){if(t===0)throw new R("No error correction bytes");const n=e.length-t;if(n<=0)throw new R("No data bytes provided");const r=this.buildGenerator(t),i=new Int32Array(n);J.arraycopy(e,0,i,0,n);let s=new xt(this.field,i);s=s.multiplyByMonomial(t,1);const f=s.divide(r)[1].getCoefficients(),u=t-f.length;for(let x=0;x<u;x++)e[n+x]=0;J.arraycopy(f,0,e,n+u,f.length)}}class ot{constructor(){}static applyMaskPenaltyRule1(e){return ot.applyMaskPenaltyRule1Internal(e,!0)+ot.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let s=0;s<i-1;s++){const a=n[s];for(let f=0;f<r-1;f++){const u=a[f];u===a[f+1]&&u===n[s+1][f]&&u===n[s+1][f+1]&&t++}}return ot.N2*t}static applyMaskPenaltyRule3(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let s=0;s<i;s++)for(let a=0;a<r;a++){const f=n[s];a+6<r&&f[a]===1&&f[a+1]===0&&f[a+2]===1&&f[a+3]===1&&f[a+4]===1&&f[a+5]===0&&f[a+6]===1&&(ot.isWhiteHorizontal(f,a-4,a)||ot.isWhiteHorizontal(f,a+7,a+11))&&t++,s+6<i&&n[s][a]===1&&n[s+1][a]===0&&n[s+2][a]===1&&n[s+3][a]===1&&n[s+4][a]===1&&n[s+5][a]===0&&n[s+6][a]===1&&(ot.isWhiteVertical(n,a,s-4,s)||ot.isWhiteVertical(n,a,s+7,s+11))&&t++}return t*ot.N3}static isWhiteHorizontal(e,t,n){t=Math.max(t,0),n=Math.min(n,e.length);for(let r=t;r<n;r++)if(e[r]===1)return!1;return!0}static isWhiteVertical(e,t,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(let i=n;i<r;i++)if(e[i][t]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let t=0;const n=e.getArray(),r=e.getWidth(),i=e.getHeight();for(let f=0;f<i;f++){const u=n[f];for(let x=0;x<r;x++)u[x]===1&&t++}const s=e.getHeight()*e.getWidth();return Math.floor(Math.abs(t*2-s)*10/s)*ot.N4}static getDataMaskBit(e,t,n){let r,i;switch(e){case 0:r=n+t&1;break;case 1:r=n&1;break;case 2:r=t%3;break;case 3:r=(n+t)%3;break;case 4:r=Math.floor(n/2)+Math.floor(t/3)&1;break;case 5:i=n*t,r=(i&1)+i%3;break;case 6:i=n*t,r=(i&1)+i%3&1;break;case 7:i=n*t,r=i%3+(n+t&1)&1;break;default:throw new R("Invalid mask pattern: "+e)}return r===0}static applyMaskPenaltyRule1Internal(e,t){let n=0;const r=t?e.getHeight():e.getWidth(),i=t?e.getWidth():e.getHeight(),s=e.getArray();for(let a=0;a<r;a++){let f=0,u=-1;for(let x=0;x<i;x++){const A=t?s[a][x]:s[x][a];A===u?f++:(f>=5&&(n+=ot.N1+(f-5)),f=1,u=A)}f>=5&&(n+=ot.N1+(f-5))}return n}}ot.N1=3,ot.N2=3,ot.N3=40,ot.N4=10;class zr{constructor(e,t){this.width=e,this.height=t;const n=new Array(t);for(let r=0;r!==t;r++)n[r]=new Uint8Array(e);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,n){this.bytes[t][e]=n}setBoolean(e,t,n){this.bytes[t][e]=n?1:0}clear(e){for(const t of this.bytes)me.fill(t,e)}equals(e){if(!(e instanceof zr))return!1;const t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(let n=0,r=this.height;n<r;++n){const i=this.bytes[n],s=t.bytes[n];for(let a=0,f=this.width;a<f;++a)if(i[a]!==s[a])return!1}return!0}toString(){const e=new Ie;for(let t=0,n=this.height;t<n;++t){const r=this.bytes[t];for(let i=0,s=this.width;i<s;++i)switch(r[i]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class Vn{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new Ie;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Vn.NUM_MASK_PATTERNS}}Vn.NUM_MASK_PATTERNS=8;class Ze extends p{}Ze.kind="WriterException";class de{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,n,r,i){de.clearMatrix(i),de.embedBasicPatterns(n,i),de.embedTypeInfo(t,r,i),de.maybeEmbedVersionInfo(n,i),de.embedDataBits(e,r,i)}static embedBasicPatterns(e,t){de.embedPositionDetectionPatternsAndSeparators(t),de.embedDarkDotAtLeftBottomCorner(t),de.maybeEmbedPositionAdjustmentPatterns(e,t),de.embedTimingPatterns(t)}static embedTypeInfo(e,t,n){const r=new ue;de.makeTypeInfoBits(e,t,r);for(let i=0,s=r.getSize();i<s;++i){const a=r.get(r.getSize()-1-i),f=de.TYPE_INFO_COORDINATES[i],u=f[0],x=f[1];if(n.setBoolean(u,x,a),i<8){const A=n.getWidth()-i-1,E=8;n.setBoolean(A,E,a)}else{const E=n.getHeight()-7+(i-8);n.setBoolean(8,E,a)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const n=new ue;de.makeVersionInfoBits(e,n);let r=6*3-1;for(let i=0;i<6;++i)for(let s=0;s<3;++s){const a=n.get(r);r--,t.setBoolean(i,t.getHeight()-11+s,a),t.setBoolean(t.getHeight()-11+s,i,a)}}static embedDataBits(e,t,n){let r=0,i=-1,s=n.getWidth()-1,a=n.getHeight()-1;for(;s>0;){for(s===6&&(s-=1);a>=0&&a<n.getHeight();){for(let f=0;f<2;++f){const u=s-f;if(!de.isEmpty(n.get(u,a)))continue;let x;r<e.getSize()?(x=e.get(r),++r):x=!1,t!==255&&ot.getDataMaskBit(t,u,a)&&(x=!x),n.setBoolean(u,a,x)}a+=i}i=-i,a+=i,s-=2}if(r!==e.getSize())throw new Ze("Not all bits consumed: "+r+"/"+e.getSize())}static findMSBSet(e){return 32-q.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(t===0)throw new R("0 polynomial");const n=de.findMSBSet(t);for(e<<=n-1;de.findMSBSet(e)>=n;)e^=t<<de.findMSBSet(e)-n;return e}static makeTypeInfoBits(e,t,n){if(!Vn.isValidMaskPattern(t))throw new Ze("Invalid mask pattern");const r=e.getBits()<<3|t;n.appendBits(r,5);const i=de.calculateBCHCode(r,de.TYPE_INFO_POLY);n.appendBits(i,10);const s=new ue;if(s.appendBits(de.TYPE_INFO_MASK_PATTERN,15),n.xor(s),n.getSize()!==15)throw new Ze("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const n=de.calculateBCHCode(e.getVersionNumber(),de.VERSION_INFO_POLY);if(t.appendBits(n,12),t.getSize()!==18)throw new Ze("should not happen but we got: "+t.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const n=(t+1)%2;de.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),de.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new Ze;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,n){for(let r=0;r<8;++r){if(!de.isEmpty(n.get(e+r,t)))throw new Ze;n.setNumber(e+r,t,0)}}static embedVerticalSeparationPattern(e,t,n){for(let r=0;r<7;++r){if(!de.isEmpty(n.get(e,t+r)))throw new Ze;n.setNumber(e,t+r,0)}}static embedPositionAdjustmentPattern(e,t,n){for(let r=0;r<5;++r){const i=de.POSITION_ADJUSTMENT_PATTERN[r];for(let s=0;s<5;++s)n.setNumber(e+s,t+r,i[s])}}static embedPositionDetectionPattern(e,t,n){for(let r=0;r<7;++r){const i=de.POSITION_DETECTION_PATTERN[r];for(let s=0;s<7;++s)n.setNumber(e+s,t+r,i[s])}}static embedPositionDetectionPatternsAndSeparators(e){const t=de.POSITION_DETECTION_PATTERN[0].length;de.embedPositionDetectionPattern(0,0,e),de.embedPositionDetectionPattern(e.getWidth()-t,0,e),de.embedPositionDetectionPattern(0,e.getWidth()-t,e);const n=8;de.embedHorizontalSeparationPattern(0,n-1,e),de.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),de.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);const r=7;de.embedVerticalSeparationPattern(r,0,e),de.embedVerticalSeparationPattern(e.getHeight()-r-1,0,e),de.embedVerticalSeparationPattern(r,e.getHeight()-r,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const n=e.getVersionNumber()-1,r=de.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let i=0,s=r.length;i!==s;i++){const a=r[i];if(a>=0)for(let f=0;f!==s;f++){const u=r[f];u>=0&&de.isEmpty(t.get(u,a))&&de.embedPositionAdjustmentPattern(u-2,a-2,t)}}}}de.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),de.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),de.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),de.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),de.VERSION_INFO_POLY=7973,de.TYPE_INFO_POLY=1335,de.TYPE_INFO_MASK_PATTERN=21522;class r1{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class et{constructor(){}static calculateMaskPenalty(e){return ot.applyMaskPenaltyRule1(e)+ot.applyMaskPenaltyRule2(e)+ot.applyMaskPenaltyRule3(e)+ot.applyMaskPenaltyRule4(e)}static encode(e,t,n=null){let r=et.DEFAULT_BYTE_MODE_ENCODING;const i=n!==null&&n.get(dt.CHARACTER_SET)!==void 0;i&&(r=n.get(dt.CHARACTER_SET).toString());const s=this.chooseMode(e,r),a=new ue;if(s===he.BYTE&&(i||et.DEFAULT_BYTE_MODE_ENCODING!==r)){const K=W.getCharacterSetECIByName(r);K!==void 0&&this.appendECI(K,a)}this.appendModeInfo(s,a);const f=new ue;this.appendBytes(e,s,f,r);let u;if(n!==null&&n.get(dt.QR_VERSION)!==void 0){const K=Number.parseInt(n.get(dt.QR_VERSION).toString(),10);u=fe.getVersionForNumber(K);const X=this.calculateBitsNeeded(s,a,f,u);if(!this.willFit(X,u,t))throw new Ze("Data too big for requested version")}else u=this.recommendVersion(t,s,a,f);const x=new ue;x.appendBitArray(a);const A=s===he.BYTE?f.getSizeInBytes():e.length;this.appendLengthInfo(A,u,s,x),x.appendBitArray(f);const E=u.getECBlocksForLevel(t),I=u.getTotalCodewords()-E.getTotalECCodewords();this.terminateBits(I,x);const T=this.interleaveWithECBytes(x,u.getTotalCodewords(),I,E.getNumBlocks()),O=new Vn;O.setECLevel(t),O.setMode(s),O.setVersion(u);const D=u.getDimensionForVersion(),P=new zr(D,D),Z=this.chooseMaskPattern(T,t,u,P);return O.setMaskPattern(Z),de.buildMatrix(T,t,u,Z,P),O.setMatrix(P),O}static recommendVersion(e,t,n,r){const i=this.calculateBitsNeeded(t,n,r,fe.getVersionForNumber(1)),s=this.chooseVersion(i,e),a=this.calculateBitsNeeded(t,n,r,s);return this.chooseVersion(a,e)}static calculateBitsNeeded(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()}static getAlphanumericCode(e){return e<et.ALPHANUMERIC_TABLE.length?et.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,t=null){if(W.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return he.KANJI;let n=!1,r=!1;for(let i=0,s=e.length;i<s;++i){const a=e.charAt(i);if(et.isDigit(a))n=!0;else if(this.getAlphanumericCode(a.charCodeAt(0))!==-1)r=!0;else return he.BYTE}return r?he.ALPHANUMERIC:n?he.NUMERIC:he.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=Xe.encode(e,W.SJIS)}catch{return!1}const n=t.length;if(n%2!==0)return!1;for(let r=0;r<n;r+=2){const i=t[r]&255;if((i<129||i>159)&&(i<224||i>235))return!1}return!0}static chooseMaskPattern(e,t,n,r){let i=Number.MAX_SAFE_INTEGER,s=-1;for(let a=0;a<Vn.NUM_MASK_PATTERNS;a++){de.buildMatrix(e,t,n,a,r);let f=this.calculateMaskPenalty(r);f<i&&(i=f,s=a)}return s}static chooseVersion(e,t){for(let n=1;n<=40;n++){const r=fe.getVersionForNumber(n);if(et.willFit(e,r,t))return r}throw new Ze("Data too big")}static willFit(e,t,n){const r=t.getTotalCodewords(),s=t.getECBlocksForLevel(n).getTotalECCodewords(),a=r-s,f=(e+7)/8;return a>=f}static terminateBits(e,t){const n=e*8;if(t.getSize()>n)throw new Ze("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(let s=0;s<4&&t.getSize()<n;++s)t.appendBit(!1);const r=t.getSize()&7;if(r>0)for(let s=r;s<8;s++)t.appendBit(!1);const i=e-t.getSizeInBytes();for(let s=0;s<i;++s)t.appendBits(s&1?17:236,8);if(t.getSize()!==n)throw new Ze("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,n,r,i,s){if(r>=n)throw new Ze("Block ID too large");const a=e%n,f=n-a,u=Math.floor(e/n),x=u+1,A=Math.floor(t/n),E=A+1,I=u-A,T=x-E;if(I!==T)throw new Ze("EC bytes mismatch");if(n!==f+a)throw new Ze("RS blocks mismatch");if(e!==(A+I)*f+(E+T)*a)throw new Ze("Total bytes mismatch");r<f?(i[0]=A,s[0]=I):(i[0]=E,s[0]=T)}static interleaveWithECBytes(e,t,n,r){if(e.getSizeInBytes()!==n)throw new Ze("Number of bits and data bytes does not match");let i=0,s=0,a=0;const f=new Array;for(let x=0;x<r;++x){const A=new Int32Array(1),E=new Int32Array(1);et.getNumDataBytesAndNumECBytesForBlockID(t,n,r,x,A,E);const I=A[0],T=new Uint8Array(I);e.toBytes(8*i,T,0,I);const O=et.generateECBytes(T,E[0]);f.push(new r1(T,O)),s=Math.max(s,I),a=Math.max(a,O.length),i+=A[0]}if(n!==i)throw new Ze("Data bytes does not match offset");const u=new ue;for(let x=0;x<s;++x)for(const A of f){const E=A.getDataBytes();x<E.length&&u.appendBits(E[x],8)}for(let x=0;x<a;++x)for(const A of f){const E=A.getErrorCorrectionBytes();x<E.length&&u.appendBits(E[x],8)}if(t!==u.getSizeInBytes())throw new Ze("Interleaving error: "+t+" and "+u.getSizeInBytes()+" differ.");return u}static generateECBytes(e,t){const n=e.length,r=new Int32Array(n+t);for(let s=0;s<n;s++)r[s]=e[s]&255;new Li(S.QR_CODE_FIELD_256).encode(r,t);const i=new Uint8Array(t);for(let s=0;s<t;s++)i[s]=r[n+s];return i}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,n,r){const i=n.getCharacterCountBits(t);if(e>=1<<i)throw new Ze(e+" is bigger than "+((1<<i)-1));r.appendBits(e,i)}static appendBytes(e,t,n,r){switch(t){case he.NUMERIC:et.appendNumericBytes(e,n);break;case he.ALPHANUMERIC:et.appendAlphanumericBytes(e,n);break;case he.BYTE:et.append8BitBytes(e,n,r);break;case he.KANJI:et.appendKanjiBytes(e,n);break;default:throw new Ze("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=et.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=et.getDigit(e.charAt(r));if(r+2<n){const s=et.getDigit(e.charAt(r+1)),a=et.getDigit(e.charAt(r+2));t.appendBits(i*100+s*10+a,10),r+=3}else if(r+1<n){const s=et.getDigit(e.charAt(r+1));t.appendBits(i*10+s,7),r+=2}else t.appendBits(i,4),r++}}static appendAlphanumericBytes(e,t){const n=e.length;let r=0;for(;r<n;){const i=et.getAlphanumericCode(e.charCodeAt(r));if(i===-1)throw new Ze;if(r+1<n){const s=et.getAlphanumericCode(e.charCodeAt(r+1));if(s===-1)throw new Ze;t.appendBits(i*45+s,11),r+=2}else t.appendBits(i,6),r++}}static append8BitBytes(e,t,n){let r;try{r=Xe.encode(e,n)}catch(i){throw new Ze(i)}for(let i=0,s=r.length;i!==s;i++){const a=r[i];t.appendBits(a,8)}}static appendKanjiBytes(e,t){let n;try{n=Xe.encode(e,W.SJIS)}catch(i){throw new Ze(i)}const r=n.length;for(let i=0;i<r;i+=2){const s=n[i]&255,a=n[i+1]&255,f=s<<8&4294967295|a;let u=-1;if(f>=33088&&f<=40956?u=f-33088:f>=57408&&f<=60351&&(u=f-49472),u===-1)throw new Ze("Invalid byte sequence");const x=(u>>8)*192+(u&255);t.appendBits(x,13)}}static appendECI(e,t){t.appendBits(he.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}et.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),et.DEFAULT_BYTE_MODE_ENCODING=W.UTF8.getName();class Hn{write(e,t,n,r=null){if(e.length===0)throw new R("Found empty contents");if(t<0||n<0)throw new R("Requested dimensions are too small: "+t+"x"+n);let i=Qe.L,s=Hn.QUIET_ZONE_SIZE;r!==null&&(r.get(dt.ERROR_CORRECTION)!==void 0&&(i=Qe.fromString(r.get(dt.ERROR_CORRECTION).toString())),r.get(dt.MARGIN)!==void 0&&(s=Number.parseInt(r.get(dt.MARGIN).toString(),10)));const a=et.encode(e,i,r);return this.renderResult(a,t,n,s)}writeToDom(e,t,n,r,i=null){typeof e=="string"&&(e=document.querySelector(e));const s=this.write(t,n,r,i);e&&e.appendChild(s)}renderResult(e,t,n,r){const i=e.getMatrix();if(i===null)throw new U;const s=i.getWidth(),a=i.getHeight(),f=s+r*2,u=a+r*2,x=Math.max(t,f),A=Math.max(n,u),E=Math.min(Math.floor(x/f),Math.floor(A/u)),I=Math.floor((x-s*E)/2),T=Math.floor((A-a*E)/2),O=this.createSVGElement(x,A);for(let D=0,P=T;D<a;D++,P+=E)for(let Z=0,K=I;Z<s;Z++,K+=E)if(i.get(Z,D)===1){const X=this.createSvgRectElement(K,P,E,E);O.appendChild(X)}return O}createSVGElement(e,t){const n=document.createElementNS(Hn.SVG_NS,"svg");return n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width",t.toString()),n}createSvgRectElement(e,t,n,r){const i=document.createElementNS(Hn.SVG_NS,"rect");return i.setAttributeNS(null,"x",e.toString()),i.setAttributeNS(null,"y",t.toString()),i.setAttributeNS(null,"height",n.toString()),i.setAttributeNS(null,"width",r.toString()),i.setAttributeNS(null,"fill","#000000"),i}}Hn.QUIET_ZONE_SIZE=4,Hn.SVG_NS="http://www.w3.org/2000/svg";class nr{encode(e,t,n,r,i){if(e.length===0)throw new R("Found empty contents");if(t!==ae.QR_CODE)throw new R("Can only encode QR_CODE, but got "+t);if(n<0||r<0)throw new R(`Requested dimensions are too small: ${n}x${r}`);let s=Qe.L,a=nr.QUIET_ZONE_SIZE;i!==null&&(i.get(dt.ERROR_CORRECTION)!==void 0&&(s=Qe.fromString(i.get(dt.ERROR_CORRECTION).toString())),i.get(dt.MARGIN)!==void 0&&(a=Number.parseInt(i.get(dt.MARGIN).toString(),10)));const f=et.encode(e,s,i);return nr.renderResult(f,n,r,a)}static renderResult(e,t,n,r){const i=e.getMatrix();if(i===null)throw new U;const s=i.getWidth(),a=i.getHeight(),f=s+r*2,u=a+r*2,x=Math.max(t,f),A=Math.max(n,u),E=Math.min(Math.floor(x/f),Math.floor(A/u)),I=Math.floor((x-s*E)/2),T=Math.floor((A-a*E)/2),O=new tt(x,A);for(let D=0,P=T;D<a;D++,P+=E)for(let Z=0,K=I;Z<s;Z++,K+=E)i.get(Z,D)===1&&O.setRegion(K,P,E,E);return O}}nr.QUIET_ZONE_SIZE=4;class i1{encode(e,t,n,r,i){let s;switch(t){case ae.QR_CODE:s=new nr;break;default:throw new R("No encoder available for format "+t)}return s.encode(e,t,n,r,i)}}class fn extends Le{constructor(e,t,n,r,i,s,a,f){if(super(s,a),this.yuvData=e,this.dataWidth=t,this.dataHeight=n,this.left=r,this.top=i,r+s>t||i+a>n)throw new R("Crop rectangle does not fit within image data.");f&&this.reverseHorizontal(s,a)}getRow(e,t){if(e<0||e>=this.getHeight())throw new R("Requested row is outside the image: "+e);const n=this.getWidth();(t==null||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return J.arraycopy(this.yuvData,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return J.arraycopy(this.yuvData,i,r,0,n),r;for(let s=0;s<t;s++){const a=s*e;J.arraycopy(this.yuvData,i,r,a,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new fn(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,n,r,!1)}renderThumbnail(){const e=this.getWidth()/fn.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/fn.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(e*t),r=this.yuvData;let i=this.top*this.dataWidth+this.left;for(let s=0;s<t;s++){const a=s*e;for(let f=0;f<e;f++){const u=r[i+f*fn.THUMBNAIL_SCALE_FACTOR]&255;n[a+f]=4278190080|u*65793}i+=this.dataWidth*fn.THUMBNAIL_SCALE_FACTOR}return n}getThumbnailWidth(){return this.getWidth()/fn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/fn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){const n=this.yuvData;for(let r=0,i=this.top*this.dataWidth+this.left;r<t;r++,i+=this.dataWidth){const s=i+e/2;for(let a=i,f=i+e-1;a<s;a++,f--){const u=n[a];n[a]=n[f],n[f]=u}}}invert(){return new It(this)}}fn.THUMBNAIL_SCALE_FACTOR=2;class Fi extends Le{constructor(e,t,n,r,i,s,a){if(super(t,n),this.dataWidth=r,this.dataHeight=i,this.left=s,this.top=a,e.BYTES_PER_ELEMENT===4){const f=t*n,u=new Uint8ClampedArray(f);for(let x=0;x<f;x++){const A=e[x],E=A>>16&255,I=A>>7&510,T=A&255;u[x]=(E+I+T)/4&255}this.luminances=u}else this.luminances=e;if(r===void 0&&(this.dataWidth=t),i===void 0&&(this.dataHeight=n),s===void 0&&(this.left=0),a===void 0&&(this.top=0),this.left+t>this.dataWidth||this.top+n>this.dataHeight)throw new R("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new R("Requested row is outside the image: "+e);const n=this.getWidth();(t==null||t.length<n)&&(t=new Uint8ClampedArray(n));const r=(e+this.top)*this.dataWidth+this.left;return J.arraycopy(this.luminances,r,t,0,n),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const n=e*t,r=new Uint8ClampedArray(n);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return J.arraycopy(this.luminances,i,r,0,n),r;for(let s=0;s<t;s++){const a=s*e;J.arraycopy(this.luminances,i,r,a,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new Fi(this.luminances,n,r,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new It(this)}}class Ys extends W{static forName(e){return this.getCharacterSetECIByName(e)}}class ki{}ki.ISO_8859_1=W.ISO8859_1;class zs{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Zs{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class s1{constructor(e){this.previous=e}getPrevious(){return this.previous}}class rr extends s1{constructor(e,t,n){super(e),this.value=t,this.bitCount=n}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new rr(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new rr(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+q.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Ui extends rr{constructor(e,t,n){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=n}appendTo(e,t){for(let n=0;n<this.binaryShiftByteCount;n++)(n===0||n===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):n===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)}addBinaryShift(e,t){return new Ui(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function o1(w,e,t){return new Ui(w,e,t)}function _r(w,e,t){return new rr(w,e,t)}const a1=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Nn=0,Zr=1,zt=2,js=3,un=4,l1=new rr(null,0,0),Vi=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,(10<<16)+(29<<5)+30]),Int32Array.from([(9<<16)+(30<<4)+14,0,(5<<16)+30,(5<<16)+29,(10<<16)+(29<<5)+30]),Int32Array.from([(4<<16)+14,(9<<16)+(14<<5)+28,0,(9<<16)+(14<<5)+29,(14<<16)+(14<<10)+(29<<5)+30]),Int32Array.from([(5<<16)+29,(5<<16)+28,(10<<16)+(29<<5)+30,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,(10<<16)+(31<<5)+28,(10<<16)+(31<<5)+30,(10<<16)+(31<<5)+29,0])];function c1(w){for(let e of w)me.fill(e,-1);return w[Nn][un]=0,w[Zr][un]=0,w[Zr][Nn]=28,w[js][un]=0,w[zt][un]=0,w[zt][Nn]=15,w}const Ks=c1(me.createInt32Array(6,6));class hn{constructor(e,t,n,r){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=r}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let n=this.bitCount,r=this.token;if(e!==this.mode){let s=Vi[this.mode][e];r=_r(r,s&65535,s>>16),n+=s>>16}let i=e===zt?4:5;return r=_r(r,t,i),new hn(r,e,0,n+i)}shiftAndAppend(e,t){let n=this.token,r=this.mode===zt?4:5;return n=_r(n,Ks[this.mode][e],r),n=_r(n,t,5),new hn(n,this.mode,0,this.bitCount+r+5)}addBinaryShiftChar(e){let t=this.token,n=this.mode,r=this.bitCount;if(this.mode===un||this.mode===zt){let a=Vi[n][Nn];t=_r(t,a&65535,a>>16),r+=a>>16,n=Nn}let i=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new hn(t,n,this.binaryShiftByteCount+1,r+i);return s.binaryShiftByteCount===2047+31&&(s=s.endBinaryShift(e+1)),s}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let t=this.token;return t=o1(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new hn(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(Vi[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=hn.calculateBinaryShiftCost(e)-hn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let r=this.endBinaryShift(e.length).token;r!==null;r=r.getPrevious())t.unshift(r);let n=new ue;for(const r of t)r.appendTo(n,e);return n}toString(){return ce.format("%s bits=%d bytes=%d",a1[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}hn.INITIAL_STATE=new hn(l1,Nn,0,0);function f1(w){const e=ce.getCharCode(" "),t=ce.getCharCode("."),n=ce.getCharCode(",");w[Nn][e]=1;const r=ce.getCharCode("Z"),i=ce.getCharCode("A");for(let E=i;E<=r;E++)w[Nn][E]=E-i+2;w[Zr][e]=1;const s=ce.getCharCode("z"),a=ce.getCharCode("a");for(let E=a;E<=s;E++)w[Zr][E]=E-a+2;w[zt][e]=1;const f=ce.getCharCode("9"),u=ce.getCharCode("0");for(let E=u;E<=f;E++)w[zt][E]=E-u+2;w[zt][n]=12,w[zt][t]=13;const x=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let E=0;E<x.length;E++)w[js][ce.getCharCode(x[E])]=E;const A=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let E=0;E<A.length;E++)ce.getCharCode(A[E])>0&&(w[un][ce.getCharCode(A[E])]=E);return w}const Hi=f1(me.createInt32Array(5,256));class Tr{constructor(e){this.text=e}encode(){const e=ce.getCharCode(" "),t=ce.getCharCode(`
`);let n=Zs.singletonList(hn.INITIAL_STATE);for(let i=0;i<this.text.length;i++){let s,a=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case ce.getCharCode("\r"):s=a===t?2:0;break;case ce.getCharCode("."):s=a===e?3:0;break;case ce.getCharCode(","):s=a===e?4:0;break;case ce.getCharCode(":"):s=a===e?5:0;break;default:s=0}s>0?(n=Tr.updateStateListForPair(n,i,s),i++):n=this.updateStateListForChar(n,i)}return Zs.min(n,(i,s)=>i.getBitCount()-s.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){const n=[];for(let r of e)this.updateStateForChar(r,t,n);return Tr.simplifyStates(n)}updateStateForChar(e,t,n){let r=this.text[t]&255,i=Hi[e.getMode()][r]>0,s=null;for(let a=0;a<=un;a++){let f=Hi[a][r];if(f>0){if(s==null&&(s=e.endBinaryShift(t)),!i||a===e.getMode()||a===zt){const u=s.latchAndAppend(a,f);n.push(u)}if(!i&&Ks[e.getMode()][a]>=0){const u=s.shiftAndAppend(a,f);n.push(u)}}}if(e.getBinaryShiftByteCount()>0||Hi[e.getMode()][r]===0){let a=e.addBinaryShiftChar(t);n.push(a)}}static updateStateListForPair(e,t,n){const r=[];for(let i of e)this.updateStateForPair(i,t,n,r);return this.simplifyStates(r)}static updateStateForPair(e,t,n,r){let i=e.endBinaryShift(t);if(r.push(i.latchAndAppend(un,n)),e.getMode()!==un&&r.push(i.shiftAndAppend(un,n)),n===3||n===4){let s=i.latchAndAppend(zt,16-n).latchAndAppend(zt,1);r.push(s)}if(e.getBinaryShiftByteCount()>0){let s=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);r.push(s)}}static simplifyStates(e){let t=[];for(const n of e){let r=!0;for(const i of t){if(i.isBetterThanOrEqualTo(n)){r=!1;break}n.isBetterThanOrEqualTo(i)&&(t=t.filter(s=>s!==i))}r&&t.push(n)}return t}}class ve{constructor(){}static encodeBytes(e){return ve.encode(e,ve.DEFAULT_EC_PERCENT,ve.DEFAULT_AZTEC_LAYERS)}static encode(e,t,n){let r=new Tr(e).encode(),i=q.truncDivision(r.getSize()*t,100)+11,s=r.getSize()+i,a,f,u,x,A;if(n!==ve.DEFAULT_AZTEC_LAYERS){if(a=n<0,f=Math.abs(n),f>(a?ve.MAX_NB_BITS_COMPACT:ve.MAX_NB_BITS))throw new R(ce.format("Illegal value %s for layers",n));u=ve.totalBitsInLayer(f,a),x=ve.WORD_SIZE[f];let X=u-u%x;if(A=ve.stuffBits(r,x),A.getSize()+i>X)throw new R("Data to large for user specified layer");if(a&&A.getSize()>x*64)throw new R("Data to large for user specified layer")}else{x=0,A=null;for(let X=0;;X++){if(X>ve.MAX_NB_BITS)throw new R("Data too large for an Aztec code");if(a=X<=3,f=a?X+1:X,u=ve.totalBitsInLayer(f,a),s>u)continue;(A==null||x!==ve.WORD_SIZE[f])&&(x=ve.WORD_SIZE[f],A=ve.stuffBits(r,x));let Ne=u-u%x;if(!(a&&A.getSize()>x*64)&&A.getSize()+i<=Ne)break}}let E=ve.generateCheckWords(A,u,x),I=A.getSize()/x,T=ve.generateModeMessage(a,f,I),O=(a?11:14)+f*4,D=new Int32Array(O),P;if(a){P=O;for(let X=0;X<D.length;X++)D[X]=X}else{P=O+1+2*q.truncDivision(q.truncDivision(O,2)-1,15);let X=q.truncDivision(O,2),Ne=q.truncDivision(P,2);for(let pe=0;pe<X;pe++){let Pt=pe+q.truncDivision(pe,15);D[X-pe-1]=Ne-Pt-1,D[X+pe]=Ne+Pt+1}}let Z=new tt(P);for(let X=0,Ne=0;X<f;X++){let pe=(f-X)*4+(a?9:12);for(let Pt=0;Pt<pe;Pt++){let Jt=Pt*2;for(let Lt=0;Lt<2;Lt++)E.get(Ne+Jt+Lt)&&Z.set(D[X*2+Lt],D[X*2+Pt]),E.get(Ne+pe*2+Jt+Lt)&&Z.set(D[X*2+Pt],D[O-1-X*2-Lt]),E.get(Ne+pe*4+Jt+Lt)&&Z.set(D[O-1-X*2-Lt],D[O-1-X*2-Pt]),E.get(Ne+pe*6+Jt+Lt)&&Z.set(D[O-1-X*2-Pt],D[X*2+Lt])}Ne+=pe*8}if(ve.drawModeMessage(Z,a,P,T),a)ve.drawBullsEye(Z,q.truncDivision(P,2),5);else{ve.drawBullsEye(Z,q.truncDivision(P,2),7);for(let X=0,Ne=0;X<q.truncDivision(O,2)-1;X+=15,Ne+=16)for(let pe=q.truncDivision(P,2)&1;pe<P;pe+=2)Z.set(q.truncDivision(P,2)-Ne,pe),Z.set(q.truncDivision(P,2)+Ne,pe),Z.set(pe,q.truncDivision(P,2)-Ne),Z.set(pe,q.truncDivision(P,2)+Ne)}let K=new zs;return K.setCompact(a),K.setSize(P),K.setLayers(f),K.setCodeWords(I),K.setMatrix(Z),K}static drawBullsEye(e,t,n){for(let r=0;r<n;r+=2)for(let i=t-r;i<=t+r;i++)e.set(i,t-r),e.set(i,t+r),e.set(t-r,i),e.set(t+r,i);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)}static generateModeMessage(e,t,n){let r=new ue;return e?(r.appendBits(t-1,2),r.appendBits(n-1,6),r=ve.generateCheckWords(r,28,4)):(r.appendBits(t-1,5),r.appendBits(n-1,11),r=ve.generateCheckWords(r,40,4)),r}static drawModeMessage(e,t,n,r){let i=q.truncDivision(n,2);if(t)for(let s=0;s<7;s++){let a=i-3+s;r.get(s)&&e.set(a,i-5),r.get(s+7)&&e.set(i+5,a),r.get(20-s)&&e.set(a,i+5),r.get(27-s)&&e.set(i-5,a)}else for(let s=0;s<10;s++){let a=i-5+s+q.truncDivision(s,5);r.get(s)&&e.set(a,i-7),r.get(s+10)&&e.set(i+7,a),r.get(29-s)&&e.set(a,i+7),r.get(39-s)&&e.set(i-7,a)}}static generateCheckWords(e,t,n){let r=e.getSize()/n,i=new Li(ve.getGF(n)),s=q.truncDivision(t,n),a=ve.bitsToWords(e,n,s);i.encode(a,s-r);let f=t%n,u=new ue;u.appendBits(0,f);for(const x of Array.from(a))u.appendBits(x,n);return u}static bitsToWords(e,t,n){let r=new Int32Array(n),i,s;for(i=0,s=e.getSize()/t;i<s;i++){let a=0;for(let f=0;f<t;f++)a|=e.get(i*t+f)?1<<t-f-1:0;r[i]=a}return r}static getGF(e){switch(e){case 4:return S.AZTEC_PARAM;case 6:return S.AZTEC_DATA_6;case 8:return S.AZTEC_DATA_8;case 10:return S.AZTEC_DATA_10;case 12:return S.AZTEC_DATA_12;default:throw new R("Unsupported word size "+e)}}static stuffBits(e,t){let n=new ue,r=e.getSize(),i=(1<<t)-2;for(let s=0;s<r;s+=t){let a=0;for(let f=0;f<t;f++)(s+f>=r||e.get(s+f))&&(a|=1<<t-1-f);(a&i)===i?(n.appendBits(a&i,t),s--):a&i?n.appendBits(a,t):(n.appendBits(a|1,t),s--)}return n}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}ve.DEFAULT_EC_PERCENT=33,ve.DEFAULT_AZTEC_LAYERS=0,ve.MAX_NB_BITS=32,ve.MAX_NB_BITS_COMPACT=4,ve.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class jr{encode(e,t,n,r){return this.encodeWithHints(e,t,n,r,null)}encodeWithHints(e,t,n,r,i){let s=ki.ISO_8859_1,a=ve.DEFAULT_EC_PERCENT,f=ve.DEFAULT_AZTEC_LAYERS;return i!=null&&(i.has(dt.CHARACTER_SET)&&(s=Ys.forName(i.get(dt.CHARACTER_SET).toString())),i.has(dt.ERROR_CORRECTION)&&(a=q.parseInt(i.get(dt.ERROR_CORRECTION).toString())),i.has(dt.AZTEC_LAYERS)&&(f=q.parseInt(i.get(dt.AZTEC_LAYERS).toString()))),jr.encodeLayers(e,t,n,r,s,a,f)}static encodeLayers(e,t,n,r,i,s,a){if(t!==ae.AZTEC)throw new R("Can only encode AZTEC, but got "+t);let f=ve.encode(ce.getBytes(e,i),s,a);return jr.renderResult(f,n,r)}static renderResult(e,t,n){let r=e.getMatrix();if(r==null)throw new U;let i=r.getWidth(),s=r.getHeight(),a=Math.max(t,i),f=Math.max(n,s),u=Math.min(a/i,f/s),x=(a-i*u)/2,A=(f-s*u)/2,E=new tt(a,f);for(let I=0,T=A;I<s;I++,T+=u)for(let O=0,D=x;O<i;O++,D+=u)r.get(O,I)&&E.setRegion(D,T,u,u);return E}}c.AbstractExpandedDecoder=Ti,c.ArgumentException=N,c.ArithmeticException=_,c.AztecCode=zs,c.AztecCodeReader=qt,c.AztecCodeWriter=jr,c.AztecDecoder=z,c.AztecDetector=Dt,c.AztecDetectorResult=se,c.AztecEncoder=ve,c.AztecHighLevelEncoder=Tr,c.AztecPoint=Se,c.BarcodeFormat=ae,c.Binarizer=Ae,c.BinaryBitmap=Y,c.BitArray=ue,c.BitMatrix=tt,c.BitSource=Ri,c.BrowserAztecCodeReader=Ur,c.BrowserBarcodeReader=Ha,c.BrowserCodeReader=on,c.BrowserDatamatrixCodeReader=Ga,c.BrowserMultiFormatReader=e1,c.BrowserPDF417Reader=t1,c.BrowserQRCodeReader=n1,c.BrowserQRCodeSvgWriter=Hn,c.CharacterSetECI=W,c.ChecksumException=ee,c.Code128Reader=Q,c.Code39Reader=Be,c.DataMatrixDecodedBitStreamParser=yn,c.DataMatrixReader=_n,c.DecodeHintType=Re,c.DecoderResult=Wt,c.DefaultGridSampler=Ge,c.DetectorResult=le,c.EAN13Reader=Ln,c.EncodeHintType=dt,c.Exception=p,c.FormatException=j,c.GenericGF=S,c.GenericGFPoly=xt,c.GlobalHistogramBinarizer=Me,c.GridSampler=xe,c.GridSamplerInstance=Te,c.HTMLCanvasElementLuminanceSource=Ut,c.HybridBinarizer=ie,c.ITFReader=ye,c.IllegalArgumentException=R,c.IllegalStateException=U,c.InvertedLuminanceSource=It,c.LuminanceSource=Le,c.MathUtils=k,c.MultiFormatOneDReader=er,c.MultiFormatReader=Xs,c.MultiFormatWriter=i1,c.NotFoundException=F,c.OneDReader=qe,c.PDF417DecodedBitStreamParser=v,c.PDF417DecoderErrorCorrection=ks,c.PDF417Reader=mt,c.PDF417ResultMetadata=Vs,c.PerspectiveTransform=we,c.PlanarYUVLuminanceSource=fn,c.QRCodeByteMatrix=zr,c.QRCodeDataMask=Xt,c.QRCodeDecodedBitStreamParser=it,c.QRCodeDecoderErrorCorrectionLevel=Qe,c.QRCodeDecoderFormatInformation=_t,c.QRCodeEncoder=et,c.QRCodeEncoderQRCode=Vn,c.QRCodeMaskUtil=ot,c.QRCodeMatrixUtil=de,c.QRCodeMode=he,c.QRCodeReader=Tn,c.QRCodeVersion=fe,c.QRCodeWriter=nr,c.RGBLuminanceSource=Fi,c.RSS14Reader=st,c.RSSExpandedReader=H,c.ReaderException=Yr,c.ReedSolomonDecoder=V,c.ReedSolomonEncoder=Li,c.ReedSolomonException=L,c.Result=Ct,c.ResultMetadataType=ct,c.ResultPoint=B,c.StringUtils=ce,c.UnsupportedOperationException=We,c.VideoInputDevice=sn,c.WhiteRectangleDetector=oe,c.WriterException=Ze,c.ZXingArrays=me,c.ZXingCharset=Ys,c.ZXingInteger=q,c.ZXingStandardCharsets=ki,c.ZXingStringBuilder=Ie,c.ZXingStringEncoding=Xe,c.ZXingSystem=J,c.createAbstractExpandedDecoder=Ls,Object.defineProperty(c,"__esModule",{value:!0})})})(J0,ze);const $0=Q0(ze),ec=d1({__proto__:null,default:$0},[ze]);var No=function(){function o(l,c,d){if(this.formatMap=new Map([[ne.QR_CODE,ze.BarcodeFormat.QR_CODE],[ne.AZTEC,ze.BarcodeFormat.AZTEC],[ne.CODABAR,ze.BarcodeFormat.CODABAR],[ne.CODE_39,ze.BarcodeFormat.CODE_39],[ne.CODE_93,ze.BarcodeFormat.CODE_93],[ne.CODE_128,ze.BarcodeFormat.CODE_128],[ne.DATA_MATRIX,ze.BarcodeFormat.DATA_MATRIX],[ne.MAXICODE,ze.BarcodeFormat.MAXICODE],[ne.ITF,ze.BarcodeFormat.ITF],[ne.EAN_13,ze.BarcodeFormat.EAN_13],[ne.EAN_8,ze.BarcodeFormat.EAN_8],[ne.PDF_417,ze.BarcodeFormat.PDF_417],[ne.RSS_14,ze.BarcodeFormat.RSS_14],[ne.RSS_EXPANDED,ze.BarcodeFormat.RSS_EXPANDED],[ne.UPC_A,ze.BarcodeFormat.UPC_A],[ne.UPC_E,ze.BarcodeFormat.UPC_E],[ne.UPC_EAN_EXTENSION,ze.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!ec)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=c,this.logger=d;var g=this.createZXingFormats(l),h=new Map;h.set(ze.DecodeHintType.POSSIBLE_FORMATS,g),h.set(ze.DecodeHintType.TRY_HARDER,!1),this.hints=h}return o.prototype.decodeAsync=function(l){var c=this;return new Promise(function(d,g){try{d(c.decode(l))}catch(h){g(h)}})},o.prototype.decode=function(l){var c=new ze.MultiFormatReader(this.verbose,this.hints),d=new ze.HTMLCanvasElementLuminanceSource(l),g=new ze.BinaryBitmap(new ze.HybridBinarizer(d)),h=c.decode(g);return{text:h.text,format:Ba.create(this.toHtml5QrcodeSupportedFormats(h.format)),debugData:this.createDebugData()}},o.prototype.createReverseFormatMap=function(){var l=new Map;return this.formatMap.forEach(function(c,d,g){l.set(c,d)}),l},o.prototype.toHtml5QrcodeSupportedFormats=function(l){if(!this.reverseFormatMap.has(l))throw"reverseFormatMap doesn't have "+l;return this.reverseFormatMap.get(l)},o.prototype.createZXingFormats=function(l){for(var c=[],d=0,g=l;d<g.length;d++){var h=g[d];this.formatMap.has(h)?c.push(this.formatMap.get(h)):this.logger.logError(h+" is not supported byZXingHtml5QrcodeShim")}return c},o.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},o}(),tc=globalThis&&globalThis.__awaiter||function(o,l,c,d){function g(h){return h instanceof c?h:new c(function(C){C(h)})}return new(c||(c=Promise))(function(h,C){function m(N){try{p(d.next(N))}catch(R){C(R)}}function y(N){try{p(d.throw(N))}catch(R){C(R)}}function p(N){N.done?h(N.value):g(N.value).then(m,y)}p((d=d.apply(o,l||[])).next())})},nc=globalThis&&globalThis.__generator||function(o,l){var c={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},d,g,h,C;return C={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function m(p){return function(N){return y([p,N])}}function y(p){if(d)throw new TypeError("Generator is already executing.");for(;c;)try{if(d=1,g&&(h=p[0]&2?g.return:p[0]?g.throw||((h=g.return)&&h.call(g),0):g.next)&&!(h=h.call(g,p[1])).done)return h;switch(g=0,h&&(p=[p[0]&2,h.value]),p[0]){case 0:case 1:h=p;break;case 4:return c.label++,{value:p[1],done:!1};case 5:c.label++,g=p[1],p=[0];continue;case 7:p=c.ops.pop(),c.trys.pop();continue;default:if(h=c.trys,!(h=h.length>0&&h[h.length-1])&&(p[0]===6||p[0]===2)){c=0;continue}if(p[0]===3&&(!h||p[1]>h[0]&&p[1]<h[3])){c.label=p[1];break}if(p[0]===6&&c.label<h[1]){c.label=h[1],h=p;break}if(h&&c.label<h[2]){c.label=h[2],c.ops.push(p);break}h[2]&&c.ops.pop(),c.trys.pop();continue}p=l.call(o,c)}catch(N){p=[6,N],g=0}finally{d=h=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Oo=function(){function o(l,c,d){if(this.formatMap=new Map([[ne.QR_CODE,"qr_code"],[ne.AZTEC,"aztec"],[ne.CODABAR,"codabar"],[ne.CODE_39,"code_39"],[ne.CODE_93,"code_93"],[ne.CODE_128,"code_128"],[ne.DATA_MATRIX,"data_matrix"],[ne.ITF,"itf"],[ne.EAN_13,"ean_13"],[ne.EAN_8,"ean_8"],[ne.PDF_417,"pdf417"],[ne.UPC_A,"upc_a"],[ne.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!o.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=c,this.logger=d;var g=this.createBarcodeDetectorFormats(l);if(this.detector=new BarcodeDetector(g),!this.detector)throw"BarcodeDetector detector not supported"}return o.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var l=new BarcodeDetector({formats:["qr_code"]});return typeof l<"u"},o.prototype.decodeAsync=function(l){return tc(this,void 0,void 0,function(){var c,d;return nc(this,function(g){switch(g.label){case 0:return[4,this.detector.detect(l)];case 1:if(c=g.sent(),!c||c.length===0)throw"No barcode or QR code detected.";return d=this.selectLargestBarcode(c),[2,{text:d.rawValue,format:Ba.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}]}})})},o.prototype.selectLargestBarcode=function(l){for(var c=null,d=0,g=0,h=l;g<h.length;g++){var C=h[g],m=C.boundingBox.width*C.boundingBox.height;m>d&&(d=m,c=C)}if(!c)throw"No largest barcode found";return c},o.prototype.createBarcodeDetectorFormats=function(l){for(var c=[],d=0,g=l;d<g.length;d++){var h=g[d];this.formatMap.has(h)?c.push(this.formatMap.get(h)):this.logger.warn(h+" is not supported byBarcodeDetectorDelegate")}return{formats:c}},o.prototype.toHtml5QrcodeSupportedFormats=function(l){if(!this.reverseFormatMap.has(l))throw"reverseFormatMap doesn't have "+l;return this.reverseFormatMap.get(l)},o.prototype.createReverseFormatMap=function(){var l=new Map;return this.formatMap.forEach(function(c,d,g){l.set(c,d)}),l},o.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},o}(),Ro=globalThis&&globalThis.__awaiter||function(o,l,c,d){function g(h){return h instanceof c?h:new c(function(C){C(h)})}return new(c||(c=Promise))(function(h,C){function m(N){try{p(d.next(N))}catch(R){C(R)}}function y(N){try{p(d.throw(N))}catch(R){C(R)}}function p(N){N.done?h(N.value):g(N.value).then(m,y)}p((d=d.apply(o,l||[])).next())})},Do=globalThis&&globalThis.__generator||function(o,l){var c={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},d,g,h,C;return C={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function m(p){return function(N){return y([p,N])}}function y(p){if(d)throw new TypeError("Generator is already executing.");for(;c;)try{if(d=1,g&&(h=p[0]&2?g.return:p[0]?g.throw||((h=g.return)&&h.call(g),0):g.next)&&!(h=h.call(g,p[1])).done)return h;switch(g=0,h&&(p=[p[0]&2,h.value]),p[0]){case 0:case 1:h=p;break;case 4:return c.label++,{value:p[1],done:!1};case 5:c.label++,g=p[1],p=[0];continue;case 7:p=c.ops.pop(),c.trys.pop();continue;default:if(h=c.trys,!(h=h.length>0&&h[h.length-1])&&(p[0]===6||p[0]===2)){c=0;continue}if(p[0]===3&&(!h||p[1]>h[0]&&p[1]<h[3])){c.label=p[1];break}if(p[0]===6&&c.label<h[1]){c.label=h[1],h=p;break}if(h&&c.label<h[2]){c.label=h[2],c.ops.push(p);break}h[2]&&c.ops.pop(),c.trys.pop();continue}p=l.call(o,c)}catch(N){p=[6,N],g=0}finally{d=h=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},rc=function(){function o(l,c,d,g){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=d,c&&Oo.isSupported()?(this.primaryDecoder=new Oo(l,d,g),this.secondaryDecoder=new No(l,d,g)):this.primaryDecoder=new No(l,d,g)}return o.prototype.decodeAsync=function(l){return Ro(this,void 0,void 0,function(){var c;return Do(this,function(d){switch(d.label){case 0:c=performance.now(),d.label=1;case 1:return d.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(l)];case 2:return[2,d.sent()];case 3:return this.possiblyLogPerformance(c),[7];case 4:return[2]}})})},o.prototype.decodeRobustlyAsync=function(l){return Ro(this,void 0,void 0,function(){var c,d;return Do(this,function(g){switch(g.label){case 0:c=performance.now(),g.label=1;case 1:return g.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(l)];case 2:return[2,g.sent()];case 3:if(d=g.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(l)];throw d;case 4:return this.possiblyLogPerformance(c),[7];case 5:return[2]}})})},o.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},o.prototype.possiblyLogPerformance=function(l){if(this.verbose){var c=performance.now()-l;this.executionResults.push(c),this.executions++,this.possiblyFlushPerformanceReport()}},o.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var l=0,c=0,d=this.executionResults;c<d.length;c++){var g=d[c];l+=g}var h=l/this.executionResults.length;console.log(h+" ms for "+this.executionResults.length+" last runs."),this.executions=0,this.executionResults=[]}},o}(),Ms=globalThis&&globalThis.__extends||function(){var o=function(l,c){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,g){d.__proto__=g}||function(d,g){for(var h in g)Object.prototype.hasOwnProperty.call(g,h)&&(d[h]=g[h])},o(l,c)};return function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");o(l,c);function d(){this.constructor=l}l.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d)}}(),fi=globalThis&&globalThis.__awaiter||function(o,l,c,d){function g(h){return h instanceof c?h:new c(function(C){C(h)})}return new(c||(c=Promise))(function(h,C){function m(N){try{p(d.next(N))}catch(R){C(R)}}function y(N){try{p(d.throw(N))}catch(R){C(R)}}function p(N){N.done?h(N.value):g(N.value).then(m,y)}p((d=d.apply(o,l||[])).next())})},ui=globalThis&&globalThis.__generator||function(o,l){var c={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},d,g,h,C;return C={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function m(p){return function(N){return y([p,N])}}function y(p){if(d)throw new TypeError("Generator is already executing.");for(;c;)try{if(d=1,g&&(h=p[0]&2?g.return:p[0]?g.throw||((h=g.return)&&h.call(g),0):g.next)&&!(h=h.call(g,p[1])).done)return h;switch(g=0,h&&(p=[p[0]&2,h.value]),p[0]){case 0:case 1:h=p;break;case 4:return c.label++,{value:p[1],done:!1};case 5:c.label++,g=p[1],p=[0];continue;case 7:p=c.ops.pop(),c.trys.pop();continue;default:if(h=c.trys,!(h=h.length>0&&h[h.length-1])&&(p[0]===6||p[0]===2)){c=0;continue}if(p[0]===3&&(!h||p[1]>h[0]&&p[1]<h[3])){c.label=p[1];break}if(p[0]===6&&c.label<h[1]){c.label=h[1],h=p;break}if(h&&c.label<h[2]){c.label=h[2],c.ops.push(p);break}h[2]&&c.ops.pop(),c.trys.pop();continue}p=l.call(o,c)}catch(N){p=[6,N],g=0}finally{d=h=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Pa=function(){function o(l,c){this.name=l,this.track=c}return o.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},o.prototype.apply=function(l){var c={};c[this.name]=l;var d={advanced:[c]};return this.track.applyConstraints(d)},o.prototype.value=function(){var l=this.track.getSettings();if(this.name in l){var c=l[this.name];return c}return null},o}(),ic=function(o){Ms(l,o);function l(c,d){return o.call(this,c,d)||this}return l.prototype.min=function(){return this.getCapabilities().min},l.prototype.max=function(){return this.getCapabilities().max},l.prototype.step=function(){return this.getCapabilities().step},l.prototype.apply=function(c){var d={};d[this.name]=c;var g={advanced:[d]};return this.track.applyConstraints(g)},l.prototype.getCapabilities=function(){this.failIfNotSupported();var c=this.track.getCapabilities(),d=c[this.name];return{min:d.min,max:d.max,step:d.step}},l.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error(this.name+" capability not supported")},l}(Pa),sc=function(o){Ms(l,o);function l(c){return o.call(this,"zoom",c)||this}return l}(ic),oc=function(o){Ms(l,o);function l(c){return o.call(this,"torch",c)||this}return l}(Pa),ac=function(){function o(l){this.track=l}return o.prototype.zoomFeature=function(){return new sc(this.track)},o.prototype.torchFeature=function(){return new oc(this.track)},o}(),lc=function(){function o(l,c,d){this.isClosed=!1,this.parentElement=l,this.mediaStream=c,this.callbacks=d,this.surface=this.createVideoElement(this.parentElement.clientWidth),l.append(this.surface)}return o.prototype.createVideoElement=function(l){var c=document.createElement("video");return c.style.width=l+"px",c.style.display="block",c.muted=!0,c.setAttribute("muted","true"),c.playsInline=!0,c},o.prototype.setupSurface=function(){var l=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var c=function(){var d=l.surface.clientWidth,g=l.surface.clientHeight;l.callbacks.onRenderSurfaceReady(d,g),l.surface.removeEventListener("playing",c)};this.surface.addEventListener("playing",c),this.surface.srcObject=this.mediaStream,this.surface.play()},o.create=function(l,c,d,g){return fi(this,void 0,void 0,function(){var h,C;return ui(this,function(m){switch(m.label){case 0:return h=new o(l,c,g),d.aspectRatio?(C={aspectRatio:d.aspectRatio},[4,h.getFirstTrackOrFail().applyConstraints(C)]):[3,2];case 1:m.sent(),m.label=2;case 2:return h.setupSurface(),[2,h]}})})},o.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},o.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},o.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},o.prototype.resume=function(l){this.failIfClosed();var c=this,d=function(){setTimeout(l,200),c.surface.removeEventListener("playing",d)};this.surface.addEventListener("playing",d),this.surface.play()},o.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},o.prototype.getSurface=function(){return this.failIfClosed(),this.surface},o.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},o.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},o.prototype.applyVideoConstraints=function(l){return fi(this,void 0,void 0,function(){return ui(this,function(c){if("aspectRatio"in l)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(l)]})})},o.prototype.close=function(){if(this.isClosed)return Promise.resolve();var l=this;return new Promise(function(c,d){var g=l.mediaStream.getVideoTracks(),h=g.length,C=0;l.mediaStream.getVideoTracks().forEach(function(m){l.mediaStream.removeTrack(m),m.stop(),++C,C>=h&&(l.isClosed=!0,l.parentElement.removeChild(l.surface),c())})})},o.prototype.getCapabilities=function(){return new ac(this.getFirstTrackOrFail())},o}(),cc=function(){function o(l){this.mediaStream=l}return o.prototype.render=function(l,c,d){return fi(this,void 0,void 0,function(){return ui(this,function(g){return[2,lc.create(l,this.mediaStream,c,d)]})})},o.create=function(l){return fi(this,void 0,void 0,function(){var c,d;return ui(this,function(g){switch(g.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return c={audio:!1,video:l},[4,navigator.mediaDevices.getUserMedia(c)];case 1:return d=g.sent(),[2,new o(d)]}})})},o}(),Mo=globalThis&&globalThis.__awaiter||function(o,l,c,d){function g(h){return h instanceof c?h:new c(function(C){C(h)})}return new(c||(c=Promise))(function(h,C){function m(N){try{p(d.next(N))}catch(R){C(R)}}function y(N){try{p(d.throw(N))}catch(R){C(R)}}function p(N){N.done?h(N.value):g(N.value).then(m,y)}p((d=d.apply(o,l||[])).next())})},Bo=globalThis&&globalThis.__generator||function(o,l){var c={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},d,g,h,C;return C={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function m(p){return function(N){return y([p,N])}}function y(p){if(d)throw new TypeError("Generator is already executing.");for(;c;)try{if(d=1,g&&(h=p[0]&2?g.return:p[0]?g.throw||((h=g.return)&&h.call(g),0):g.next)&&!(h=h.call(g,p[1])).done)return h;switch(g=0,h&&(p=[p[0]&2,h.value]),p[0]){case 0:case 1:h=p;break;case 4:return c.label++,{value:p[1],done:!1};case 5:c.label++,g=p[1],p=[0];continue;case 7:p=c.ops.pop(),c.trys.pop();continue;default:if(h=c.trys,!(h=h.length>0&&h[h.length-1])&&(p[0]===6||p[0]===2)){c=0;continue}if(p[0]===3&&(!h||p[1]>h[0]&&p[1]<h[3])){c.label=p[1];break}if(p[0]===6&&c.label<h[1]){c.label=h[1],h=p;break}if(h&&c.label<h[2]){c.label=h[2],c.ops.push(p);break}h[2]&&c.ops.pop(),c.trys.pop();continue}p=l.call(o,c)}catch(N){p=[6,N],g=0}finally{d=h=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},fc=function(){function o(){}return o.failIfNotSupported=function(){return Mo(this,void 0,void 0,function(){return Bo(this,function(l){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new o]})})},o.prototype.create=function(l){return Mo(this,void 0,void 0,function(){return Bo(this,function(c){return[2,cc.create(l)]})})},o}(),uc=globalThis&&globalThis.__awaiter||function(o,l,c,d){function g(h){return h instanceof c?h:new c(function(C){C(h)})}return new(c||(c=Promise))(function(h,C){function m(N){try{p(d.next(N))}catch(R){C(R)}}function y(N){try{p(d.throw(N))}catch(R){C(R)}}function p(N){N.done?h(N.value):g(N.value).then(m,y)}p((d=d.apply(o,l||[])).next())})},hc=globalThis&&globalThis.__generator||function(o,l){var c={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},d,g,h,C;return C={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function m(p){return function(N){return y([p,N])}}function y(p){if(d)throw new TypeError("Generator is already executing.");for(;c;)try{if(d=1,g&&(h=p[0]&2?g.return:p[0]?g.throw||((h=g.return)&&h.call(g),0):g.next)&&!(h=h.call(g,p[1])).done)return h;switch(g=0,h&&(p=[p[0]&2,h.value]),p[0]){case 0:case 1:h=p;break;case 4:return c.label++,{value:p[1],done:!1};case 5:c.label++,g=p[1],p=[0];continue;case 7:p=c.ops.pop(),c.trys.pop();continue;default:if(h=c.trys,!(h=h.length>0&&h[h.length-1])&&(p[0]===6||p[0]===2)){c=0;continue}if(p[0]===3&&(!h||p[1]>h[0]&&p[1]<h[3])){c.label=p[1];break}if(p[0]===6&&c.label<h[1]){c.label=h[1],h=p;break}if(h&&c.label<h[2]){c.label=h[2],c.ops.push(p);break}h[2]&&c.ops.pop(),c.trys.pop();continue}p=l.call(o,c)}catch(N){p=[6,N],g=0}finally{d=h=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},dc=function(){function o(){}return o.retrieve=function(){if(navigator.mediaDevices)return o.getCamerasFromMediaDevices();var l=MediaStreamTrack;return MediaStreamTrack&&l.getSources?o.getCamerasFromMediaStreamTrack():o.rejectWithError()},o.rejectWithError=function(){var l=Dr.unableToQuerySupportedDevices();return o.isHttpsOrLocalhost()||(l=Dr.insecureContextCameraQueryError()),Promise.reject(l)},o.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var l=location.host.split(":")[0];return l==="127.0.0.1"||l==="localhost"},o.getCamerasFromMediaDevices=function(){return uc(this,void 0,void 0,function(){var l,c,d,g,h,C,m;return hc(this,function(y){switch(y.label){case 0:return l=function(p){for(var N=p.getVideoTracks(),R=0,Y=N;R<Y.length;R++){var ee=Y[R];ee.enabled=!1,ee.stop(),p.removeTrack(ee)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return c=y.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(d=y.sent(),g=[],h=0,C=d;h<C.length;h++)m=C[h],m.kind==="videoinput"&&g.push({id:m.deviceId,label:m.label});return l(c),[2,g]}})})},o.getCamerasFromMediaStreamTrack=function(){return new Promise(function(l,c){var d=function(h){for(var C=[],m=0,y=h;m<y.length;m++){var p=y[m];p.kind==="video"&&C.push({id:p.id,label:p.label})}l(C)},g=MediaStreamTrack;g.getSources(d)})},o}(),at;(function(o){o[o.UNKNOWN=0]="UNKNOWN",o[o.NOT_STARTED=1]="NOT_STARTED",o[o.SCANNING=2]="SCANNING",o[o.PAUSED=3]="PAUSED"})(at||(at={}));var gc=function(){function o(){this.state=at.NOT_STARTED,this.onGoingTransactionNewState=at.UNKNOWN}return o.prototype.directTransition=function(l){this.failIfTransitionOngoing(),this.validateTransition(l),this.state=l},o.prototype.startTransition=function(l){return this.failIfTransitionOngoing(),this.validateTransition(l),this.onGoingTransactionNewState=l,this},o.prototype.execute=function(){if(this.onGoingTransactionNewState===at.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var l=this.onGoingTransactionNewState;this.onGoingTransactionNewState=at.UNKNOWN,this.directTransition(l)},o.prototype.cancel=function(){if(this.onGoingTransactionNewState===at.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=at.UNKNOWN},o.prototype.getState=function(){return this.state},o.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==at.UNKNOWN)throw"Cannot transition to a new state, already under transition"},o.prototype.validateTransition=function(l){switch(this.state){case at.UNKNOWN:throw"Transition from unknown is not allowed";case at.NOT_STARTED:this.failIfNewStateIs(l,[at.PAUSED]);break;case at.SCANNING:break;case at.PAUSED:break}},o.prototype.failIfNewStateIs=function(l,c){for(var d=0,g=c;d<g.length;d++){var h=g[d];if(l===h)throw"Cannot transition from "+this.state+" to "+l}},o}(),xc=function(){function o(l){this.stateManager=l}return o.prototype.startTransition=function(l){return this.stateManager.startTransition(l)},o.prototype.directTransition=function(l){this.stateManager.directTransition(l)},o.prototype.getState=function(){return this.stateManager.getState()},o.prototype.canScanFile=function(){return this.stateManager.getState()===at.NOT_STARTED},o.prototype.isScanning=function(){return this.stateManager.getState()!==at.NOT_STARTED},o.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===at.SCANNING},o.prototype.isPaused=function(){return this.stateManager.getState()===at.PAUSED},o}(),wc=function(){function o(){}return o.create=function(){return new xc(new gc)},o}(),Ac=globalThis&&globalThis.__extends||function(){var o=function(l,c){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,g){d.__proto__=g}||function(d,g){for(var h in g)Object.prototype.hasOwnProperty.call(g,h)&&(d[h]=g[h])},o(l,c)};return function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");o(l,c);function d(){this.constructor=l}l.prototype=c===null?Object.create(c):(d.prototype=c.prototype,new d)}}(),Ht=function(o){Ac(l,o);function l(){return o!==null&&o.apply(this,arguments)||this}return l.DEFAULT_WIDTH=300,l.DEFAULT_WIDTH_OFFSET=2,l.FILE_SCAN_MIN_HEIGHT=300,l.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,l.MIN_QR_BOX_SIZE=50,l.SHADED_LEFT=1,l.SHADED_RIGHT=2,l.SHADED_TOP=3,l.SHADED_BOTTOM=4,l.SHADED_REGION_ELEMENT_ID="qr-shaded-region",l.VERBOSE=!1,l.BORDER_SHADER_DEFAULT_COLOR="#ffffff",l.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",l}(j0),pc=function(){function o(l,c){this.logger=c,this.fps=Ht.SCAN_DEFAULT_FPS,l?(l.fps&&(this.fps=l.fps),this.disableFlip=l.disableFlip===!0,this.qrbox=l.qrbox,this.aspectRatio=l.aspectRatio,this.videoConstraints=l.videoConstraints):this.disableFlip=Ht.DEFAULT_DISABLE_FLIP}return o.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?va.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},o.prototype.isShadedBoxEnabled=function(){return!An(this.qrbox)},o.create=function(l,c){return new o(l,c)},o}(),Cc=function(){function o(l,c){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(l))throw"HTML Element with id="+l+" not found";this.elementId=l,this.verbose=!1;var d;typeof c=="boolean"?this.verbose=c===!0:c&&(d=c,this.verbose=d.verbose===!0,d.experimentalFeatures),this.logger=new q0(this.verbose),this.qrcode=new rc(this.getSupportedFormats(c),this.getUseBarCodeDetectorIfSupported(d),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=wc.create()}return o.prototype.start=function(l,c,d,g){var h=this;if(!l)throw"cameraIdOrConfig is required";if(!d||typeof d!="function")throw"qrCodeSuccessCallback is required and should be a function.";var C;g?C=g:C=this.verbose?this.logger.log:function(){};var m=pc.create(c,this.logger);this.clearElement();var y=!1;m.videoConstraints&&(m.isMediaStreamConstraintsValid()?y=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var p=y,N=document.getElementById(this.elementId);N.clientWidth?N.clientWidth:Ht.DEFAULT_WIDTH,N.style.position="relative",this.shouldScan=!0,this.element=N;var R=this,Y=this.stateManagerProxy.startTransition(at.SCANNING);return new Promise(function(ee,Ae){var J=p?m.videoConstraints:R.createVideoConstraints(l);if(!J){Y.cancel(),Ae("videoConstraints should be defined");return}var ke={};(!p||m.aspectRatio)&&(ke.aspectRatio=m.aspectRatio);var Oe={onRenderSurfaceReady:function(me,q){R.setupUi(me,q,m),R.isScanning=!0,R.foreverScan(m,d,C)}};fc.failIfNotSupported().then(function(me){me.create(J).then(function(q){return q.render(h.element,ke,Oe).then(function(ue){R.renderedCamera=ue,Y.execute(),ee(null)}).catch(function(ue){Y.cancel(),Ae(ue)})}).catch(function(q){Y.cancel(),Ae(Dr.errorGettingUserMedia(q))})}).catch(function(me){Y.cancel(),Ae(Dr.cameraStreamingNotSupported())})})},o.prototype.pause=function(l){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(at.PAUSED),this.showPausedState(),(An(l)||l!==!0)&&(l=!1),l&&this.renderedCamera&&this.renderedCamera.pause()},o.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var l=this,c=function(){l.stateManagerProxy.directTransition(at.SCANNING),l.hidePausedState()};if(!this.renderedCamera.isPaused()){c();return}this.renderedCamera.resume(function(){c()})},o.prototype.getState=function(){return this.stateManagerProxy.getState()},o.prototype.stop=function(){var l=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var c=this.stateManagerProxy.startTransition(at.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var d=function(){if(l.element){var h=document.getElementById(Ht.SHADED_REGION_ELEMENT_ID);h&&l.element.removeChild(h)}},g=this;return this.renderedCamera.close().then(function(){return g.renderedCamera=null,g.element&&(g.element.removeChild(g.canvasElement),g.canvasElement=null),d(),g.qrRegion&&(g.qrRegion=null),g.context&&(g.context=null),c.execute(),g.hidePausedState(),g.isScanning=!1,Promise.resolve()})},o.prototype.scanFile=function(l,c){return this.scanFileV2(l,c).then(function(d){return d.decodedText})},o.prototype.scanFileV2=function(l,c){var d=this;if(!l||!(l instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(An(c)&&(c=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(g,h){d.possiblyCloseLastScanImageFile(),d.clearElement(),d.lastScanImageFile=URL.createObjectURL(l);var C=new Image;C.onload=function(){var m=C.width,y=C.height,p=document.getElementById(d.elementId),N=p.clientWidth?p.clientWidth:Ht.DEFAULT_WIDTH,R=Math.max(p.clientHeight?p.clientHeight:y,Ht.FILE_SCAN_MIN_HEIGHT),Y=d.computeCanvasDrawConfig(m,y,N,R);if(c){var ee=d.createCanvasElement(N,R,"qr-canvas-visible");ee.style.display="inline-block",p.appendChild(ee);var Ae=ee.getContext("2d");if(!Ae)throw"Unable to get 2d context from canvas";Ae.canvas.width=N,Ae.canvas.height=R,Ae.drawImage(C,0,0,m,y,Y.x,Y.y,Y.width,Y.height)}var J=Ht.FILE_SCAN_HIDDEN_CANVAS_PADDING,ke=Math.max(C.width,Y.width),Oe=Math.max(C.height,Y.height),me=ke+2*J,q=Oe+2*J,ue=d.createCanvasElement(me,q);p.appendChild(ue);var Je=ue.getContext("2d");if(!Je)throw"Unable to get 2d context from canvas";Je.canvas.width=me,Je.canvas.height=q,Je.drawImage(C,0,0,m,y,J,J,ke,Oe);try{d.qrcode.decodeRobustlyAsync(ue).then(function(Re){g(So.createFromQrcodeResult(Re))}).catch(h)}catch(Re){h("QR code parse error, error = "+Re)}},C.onerror=h,C.onabort=h,C.onstalled=h,C.onsuspend=h,C.src=URL.createObjectURL(l)})},o.prototype.clear=function(){this.clearElement()},o.getCameras=function(){return dc.retrieve()},o.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},o.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},o.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},o.prototype.applyVideoConstraints=function(l){if(l){if(!va.isMediaStreamConstraintsValid(l,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(l)},o.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},o.prototype.getSupportedFormats=function(l){var c=[ne.QR_CODE,ne.AZTEC,ne.CODABAR,ne.CODE_39,ne.CODE_93,ne.CODE_128,ne.DATA_MATRIX,ne.MAXICODE,ne.ITF,ne.EAN_13,ne.EAN_8,ne.PDF_417,ne.RSS_14,ne.RSS_EXPANDED,ne.UPC_A,ne.UPC_E,ne.UPC_EAN_EXTENSION];if(!l||typeof l=="boolean"||!l.formatsToSupport)return c;if(!Array.isArray(l.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(l.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var d=[],g=0,h=l.formatsToSupport;g<h.length;g++){var C=h[g];Z0(C)?d.push(C):this.logger.warn("Invalid format: "+C+" passed in config, ignoring.")}if(d.length===0)throw"None of formatsToSupport match supported values.";return d},o.prototype.getUseBarCodeDetectorIfSupported=function(l){if(An(l))return!0;if(!An(l.useBarCodeDetectorIfSupported))return l.useBarCodeDetectorIfSupported!==!1;if(An(l.experimentalFeatures))return!0;var c=l.experimentalFeatures;return An(c.useBarCodeDetectorIfSupported)?!0:c.useBarCodeDetectorIfSupported!==!1},o.prototype.validateQrboxSize=function(l,c,d){var g=this,h=d.qrbox;this.validateQrboxConfig(h);var C=this.toQrdimensions(l,c,h),m=function(p){if(p<Ht.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+(" "+Ht.MIN_QR_BOX_SIZE+"px.")},y=function(p){return p>l&&(g.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),p=l),p};m(C.width),m(C.height),C.width=y(C.width)},o.prototype.validateQrboxConfig=function(l){if(typeof l!="number"&&typeof l!="function"&&(l.width===void 0||l.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},o.prototype.toQrdimensions=function(l,c,d){if(typeof d=="number")return{width:d,height:d};if(typeof d=="function")try{return d(l,c)}catch(g){throw new Error("qrbox config was passed as a function but it failed with unknown error"+g)}return d},o.prototype.setupUi=function(l,c,d){d.isShadedBoxEnabled()&&this.validateQrboxSize(l,c,d);var g=An(d.qrbox)?{width:l,height:c}:d.qrbox;this.validateQrboxConfig(g);var h=this.toQrdimensions(l,c,g);h.height>c&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var C=d.isShadedBoxEnabled()&&h.height<=c,m={x:0,y:0,width:l,height:c},y=C?this.getShadedRegionBounds(l,c,h):m,p=this.createCanvasElement(y.width,y.height),N={willReadFrequently:!0},R=p.getContext("2d",N);R.canvas.width=y.width,R.canvas.height=y.height,this.element.append(p),C&&this.possiblyInsertShadingElement(this.element,l,c,h),this.createScannerPausedUiElement(this.element),this.qrRegion=y,this.context=R,this.canvasElement=p},o.prototype.createScannerPausedUiElement=function(l){var c=document.createElement("div");c.innerText="Scanner paused",c.style.display="none",c.style.position="absolute",c.style.top="0px",c.style.zIndex="1",c.style.background="yellow",c.style.textAlign="center",c.style.width="100%",l.appendChild(c),this.scannerPausedUiElement=c},o.prototype.scanContext=function(l,c){var d=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(g){return l(g.text,So.createFromQrcodeResult(g)),d.possiblyUpdateShaders(!0),!0}).catch(function(g){d.possiblyUpdateShaders(!1);var h=Dr.codeParseError(g);return c(h,K0.createFrom(h)),!1})},o.prototype.foreverScan=function(l,c,d){var g=this;if(this.shouldScan&&this.renderedCamera){var h=this.renderedCamera.getSurface(),C=h.videoWidth/h.clientWidth,m=h.videoHeight/h.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var y=this.qrRegion.width*C,p=this.qrRegion.height*m,N=this.qrRegion.x*C,R=this.qrRegion.y*m;this.context.drawImage(h,N,R,y,p,0,0,this.qrRegion.width,this.qrRegion.height);var Y=function(){g.foreverScanTimeout=setTimeout(function(){g.foreverScan(l,c,d)},g.getTimeoutFps(l.fps))};this.scanContext(c,d).then(function(ee){!ee&&l.disableFlip!==!0?(g.context.translate(g.context.canvas.width,0),g.context.scale(-1,1),g.scanContext(c,d).finally(function(){Y()})):Y()}).catch(function(ee){g.logger.logError("Error happend while scanning context",ee),Y()})}},o.prototype.createVideoConstraints=function(l){if(typeof l=="string")return{deviceId:{exact:l}};if(typeof l=="object"){var c="facingMode",d="deviceId",g={user:!0,environment:!0},h="exact",C=function(Ae){if(Ae in g)return!0;throw"config has invalid 'facingMode' value = "+("'"+Ae+"'")},m=Object.keys(l);if(m.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+(" if passed as an object, found "+m.length+" keys");var y=Object.keys(l)[0];if(y!==c&&y!==d)throw"Only '"+c+"' and '"+d+"'  are supported for 'cameraIdOrConfig'";if(y===c){var p=l.facingMode;if(typeof p=="string"){if(C(p))return{facingMode:p}}else if(typeof p=="object")if(h in p){if(C(p[""+h]))return{facingMode:{exact:p[""+h]}}}else throw"'facingMode' should be string or object with"+(" "+h+" as key.");else{var N=typeof p;throw"Invalid type of 'facingMode' = "+N}}else{var R=l.deviceId;if(typeof R=="string")return{deviceId:R};if(typeof R=="object"){if(h in R)return{deviceId:{exact:R[""+h]}};throw"'deviceId' should be string or object with"+(" "+h+" as key.")}else{var Y=typeof R;throw"Invalid type of 'deviceId' = "+Y}}}var ee=typeof l;throw"Invalid type of 'cameraIdOrConfig' = "+ee},o.prototype.computeCanvasDrawConfig=function(l,c,d,g){if(l<=d&&c<=g){var h=(d-l)/2,C=(g-c)/2;return{x:h,y:C,width:l,height:c}}else{var m=l,y=c;return l>d&&(c=d/l*c,l=d),c>g&&(l=g/c*l,c=g),this.logger.log("Image downsampled from "+(m+"X"+y)+(" to "+l+"X"+c+".")),this.computeCanvasDrawConfig(l,c,d,g)}},o.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var l=document.getElementById(this.elementId);l&&(l.innerHTML="")},o.prototype.possiblyUpdateShaders=function(l){this.qrMatch!==l&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(c){c.style.backgroundColor=l?Ht.BORDER_SHADER_MATCH_COLOR:Ht.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=l)},o.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},o.prototype.createCanvasElement=function(l,c,d){var g=l,h=c,C=document.createElement("canvas");return C.style.width=g+"px",C.style.height=h+"px",C.style.display="none",C.id=An(d)?"qr-canvas":d,C},o.prototype.getShadedRegionBounds=function(l,c,d){if(d.width>l||d.height>c)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(l-d.width)/2,y:(c-d.height)/2,width:d.width,height:d.height}},o.prototype.possiblyInsertShadingElement=function(l,c,d,g){if(!(c-g.width<1||d-g.height<1)){var h=document.createElement("div");h.style.position="absolute";var C=(c-g.width)/2,m=(d-g.height)/2;if(h.style.borderLeft=C+"px solid rgba(0, 0, 0, 0.48)",h.style.borderRight=C+"px solid rgba(0, 0, 0, 0.48)",h.style.borderTop=m+"px solid rgba(0, 0, 0, 0.48)",h.style.borderBottom=m+"px solid rgba(0, 0, 0, 0.48)",h.style.boxSizing="border-box",h.style.top="0px",h.style.bottom="0px",h.style.left="0px",h.style.right="0px",h.id=""+Ht.SHADED_REGION_ELEMENT_ID,c-g.width<11||d-g.height<11)this.hasBorderShaders=!1;else{var y=5,p=40;this.insertShaderBorders(h,p,y,-y,null,0,!0),this.insertShaderBorders(h,p,y,-y,null,0,!1),this.insertShaderBorders(h,p,y,null,-y,0,!0),this.insertShaderBorders(h,p,y,null,-y,0,!1),this.insertShaderBorders(h,y,p+y,-y,null,-y,!0),this.insertShaderBorders(h,y,p+y,null,-y,-y,!0),this.insertShaderBorders(h,y,p+y,-y,null,-y,!1),this.insertShaderBorders(h,y,p+y,null,-y,-y,!1),this.hasBorderShaders=!0}l.append(h)}},o.prototype.insertShaderBorders=function(l,c,d,g,h,C,m){var y=document.createElement("div");y.style.position="absolute",y.style.backgroundColor=Ht.BORDER_SHADER_DEFAULT_COLOR,y.style.width=c+"px",y.style.height=d+"px",g!==null&&(y.style.top=g+"px"),h!==null&&(y.style.bottom=h+"px"),m?y.style.left=C+"px":y.style.right=C+"px",this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(y),l.appendChild(y)},o.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},o.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},o.prototype.getTimeoutFps=function(l){return 1e3/l},o}();globalThis&&globalThis.__awaiter;globalThis&&globalThis.__generator;globalThis&&globalThis.__awaiter;globalThis&&globalThis.__generator;var vo;(function(o){o[o.STATUS_DEFAULT=0]="STATUS_DEFAULT",o[o.STATUS_SUCCESS=1]="STATUS_SUCCESS",o[o.STATUS_WARNING=2]="STATUS_WARNING",o[o.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(vo||(vo={}));const La=(o,l)=>{const c=o.__vccOpts||o;for(const[d,g]of l)c[d]=g;return c},kr=o=>(fa("data-v-f98d404f"),o=o(),ua(),o),Ec={class:"card"},mc=kr(()=>gt("p",null,[qn(" Edit "),gt("code",null,"components/HelloWorld.vue"),qn(" to test HMR ")],-1)),bc=kr(()=>gt("p",null,[qn(" Check out "),gt("a",{href:"https://vuejs.org/guide/quick-start.html#local",target:"_blank"},"create-vue"),qn(", the official Vue + Vite starter ")],-1)),Ic=kr(()=>gt("p",null,[qn(" Install "),gt("a",{href:"https://github.com/vuejs/language-tools",target:"_blank"},"Volar"),qn(" in your IDE for a better DX ")],-1)),yc=kr(()=>gt("p",{class:"read-the-docs"},"Click on the Vite and Vue logos to learn more",-1)),_c=kr(()=>gt("div",{id:"reader"},null,-1)),Tc={__name:"HelloWorld",props:{msg:String},setup(o){const l=il(0),c=()=>{const d=new Cc("reader"),g=(C,m)=>{},h={fps:10,qrbox:{width:250,height:250}};d.start({facingMode:"environment"},h,g).catch(C=>C)};return(d,g)=>(Na(),Oa(jt,null,[gt("h1",null,qs(o.msg),1),gt("div",Ec,[gt("button",{type:"button",onClick:g[0]||(g[0]=h=>l.value++)},"count is "+qs(l.value),1),mc]),bc,Ic,yc,_c,gt("button",{class:"scan",onClick:c},"")],64))}},Sc=La(Tc,[["__scopeId","data-v-f98d404f"]]);const Nc=o=>(fa("data-v-d6420450"),o=o(),ua(),o),Oc=Nc(()=>gt("div",null,[gt("a",{href:"https://vitejs.dev",target:"_blank"},[gt("img",{src:Y0,class:"logo",alt:"Vite logo"})]),gt("a",{href:"https://vuejs.org/",target:"_blank"},[gt("img",{src:z0,class:"logo vue",alt:"Vue logo"})])],-1)),Rc={__name:"App",setup(o){return(l,c)=>(Na(),Oa(jt,null,[Oc,Bn(Sc,{msg:"Vite + Vue"})],64))}},Dc=La(Rc,[["__scopeId","data-v-d6420450"]]);G0(Dc).mount("#app");
